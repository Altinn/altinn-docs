[
{
	"uri": "https://altinn.github.io/docs/api/release-notes/",
	"title": "API release notes",
	"tags": [],
	"description": "",
	"content": "Versjon 15.1 (13.02.2015) Følgende funksjonalitet er nå tilgjengelig: Støtte for separat signering av innsendingstjenester. Støtte for innsynstjenester. Autorisasjonskontroll per API ressurs. Mulig å hente meldinger/sende inn for andre personer brukeren har rettigheter til. Filtrering på slettede enheter og underenheter. Støtte for sletting av meldinger og skjema. Versjon 14.2 (14.06.2014) Følgende overordnet funksjonalitet er nå tilgjengelig: 1. Metadata ressurs blir tilgjengelig i Altinn REST API Metadata ressursen vil gi oversikt over alle tjenestene i Altinn, med tilhørende metadata om tjenestene. Eksempler er tjenestetype, er innsending over REST api tillatt, lenke til XSD osv. Ressursen krever ikke autentisering eller bruk av API nøkkel, og kan dermed knyttes inn i andre nettsider/løsninger. Message ressurser av typen ‘FormTask’ er også utvidet med lenke direkte til metadata informasjon om den aktuelle tjenesten. 2. Profildata utvides med kontaktinformasjon brukt til varsel Kontaktinformasjon registrert på brukere under &amp;ldquo;Min Profil&amp;rdquo; inkluderes nå i Profil ressursen. 3. Kontaktinformasjon for Virksomheter er tilgjengelig i REST API Det er nå mulig å lese kontaktinformasjon registrert på virksomheter brukeren har rettigheter på via REST API. 4. POST av message til arbeidslisten i Altinn (mellomlagring) Dette gjør det mulig opprette innsendinger via REST API som ikke sendes inn til tjenesteeier. Ressursene kan så oppdateres i portalen, eller oppdateres via REST API (se punkt 5). For å opprette ett nytt skjema under utfylling gjøres POST med url parameter complete=false slik: https://www.altinn.no/api/my/messages?complete=false For å opprette ett nytt skjema til signering gjøres POST med url parameter sign=false slik: https://www.altinn.no/api/my/messages?sign=false 5. PUT operasjoner blir tilgjengelig på mellomlagrede skjema Det blir mulig å oppdatere følgende på message-ressurser: Samlet skjemasett og vedlegg Arbeidsflyt (Utfylling, Innsending, Signering, Arkivering) PUT operasjoner utføres direkte på den aktuelle message og må inneholde alle skjema og vedlegg i hvert kall, da tidligere lagret data vil overskrives ved ny PUT operasjon. Versjon 14.1 (24.02.2014) Følgende overordnet funksjonalitet er nå tilgjengelig: 1. Gjøre POST operasjoner på Message elementet i Altinn API Man kan nå sende inn skjema med vedlegg. Gjelder for skjema som tjenesteeier (etat) selv har bestemt at kan sendes inn via REST API. Skjemadata blir validert ihht valideringsreglene pr skjema og arkivert. 2. Laste ned XML payload for skjema (Skjemadata) Man kan nå laste ned (lese) XML-representasjon av Skjemadata. Skjemadata er representert i XML og vil være en egen ressurs som er lenket fra Form-ressursen. 3. Autentisering nivå 1 (Altinn autentisering med Altinn brukernavn og passord) Man kan nå også autentiserer seg på sikkerhetsnivå 1 (som ikke støttes av ID-porten) ved å benytte Altinns egen autentisering. Som registrerte Altinn bruker vil man kunne angi eget brukernavn og passord (Gjøres i Altinn portalen www.altinn.no). Autentisering gjøres i en POST operasjon som logger inn brukeren. 4. Lese egne profildata (Privatperson) Hente ut informasjon fra min brukerprofil i Altinn, gir oversikt over hvem som er logget inn (Navn,Adresse, Personnr, &amp;hellip;). 5. Lenker til Altinns portalvisning av gjeldende ressurs Nye lenker ressurser som kan åpnes i nettleser: Alle elementer av typen message har en PortalView lenke. Ved å følge lenken får brukeren opp Altinns presentasjon av elementet i portalen. I portalen vil ressursen vises i den status den befinner seg i (Utfylling, Signering, Arkivert). Lenke til Altinns portal-visning av my/messages/. Versjon 13.3 (25.11.2013) Dette er Trinn 1 i leveranse av et Altinn API basert på REST-prinsipper. Følgende overordnet funksjonalitet er nå tilgjengelig: 1. Autentisering via ID-porten Dette er en SAML basert autentisering der innlogget bruker vil være føderert mot alle offentlige tjenester som benytter ID-porten. Føderte offentlige portaler og Applikasjoner utviklet av tredjepart kan dermed benytte ID-porten for tilgang til Altinn via Altinn API. 2. GET operasjoner gir lesetilgang til følgende ressurser Hent alle mine organisasjoner Hent alle mine/min-organisasjons meldinger (støtte for OData-filtrering, f.eks. meldingstittel, avsender, dato, etc&amp;hellip; ) Hent detaljer om enkeltmelding Hent utskriftsversjon av enkeltmelding Hent vedlegg til enkeltmelding "
},
{
	"uri": "https://altinn.github.io/docs/api/",
	"title": "Altinn API",
	"tags": [],
	"description": "",
	"content": "Altinn tilbyr et REST-API med autentisering vha IDPorten, som gjør det mulig å bruke tjenestene i Altinn i en app eller ekstern nettside. På disse sidene finner du praktisk informasjon om hvordan API-et kan tas i bruk. Altinn API-et er ikke en ny tjeneste eller funksjonalitet - det er et nytt grensesnitt mellom brukerne og komponentene som allerede finnes i Altinn. Dette grensesnittet muliggjør å bruke Altinn-innhold i for eksempel smartphone-apps og andre nettportaler enn altinn.no. Altinn API-et er enkelt og gratis å bruke. For å komme i gang med å bruke API-et må du registrere løsningen din hos Altinn. Teknisk dokumentasjon av API&amp;rsquo;et finnes her. "
},
{
	"uri": "https://altinn.github.io/docs/api/autentisering/",
	"title": "Autentisering",
	"tags": [],
	"description": "",
	"content": "For å få tilgang til Altinn API-et må brukeren først autentisere seg. Altinn API støtter tre ulike autentiseringsmetoder. ID-porten Dersom brukeren ikke er autentisert vil API-et redirecte applikasjonen din til ID-portens påloggingsside med responsivt design. I en app vil brukeren kunne velge mellom å autentisere seg ved bruk av av MinID eller BankID. Når brukeren er autentisert i ID-porten vil brukeren bli redirected tilbake til opprinnelig URL. Dette vil fungere for alle klienter som støtter cookies og HTTP-redirect. Passord Altinns REST-API støtter autentisering med bruk av brukernavn og passord registrert i Altinn. Virksomhetssertifikat Dersom brukeren skal representere en virksomhet som har et virksomhetssertifikat, kan dette benyttes sammen med en virksomhetsbruker opprettet på Altinn.no til å autentisere seg mot Altinns REST-api. "
},
{
	"uri": "https://altinn.github.io/docs/api/autorisering/",
	"title": "Autorisering",
	"tags": [],
	"description": "",
	"content": "Rolledefinisjoner Roller og rettigheter "
},
{
	"uri": "https://altinn.github.io/docs/api/autentisering/brukernavn-og-passord/",
	"title": "Brukernavn og passord",
	"tags": [],
	"description": "Altinns REST-API støtter autentisering med bruk av brukernavn og passord registrert i Altinn.",
	"content": "Altinn API støtter autentisering med kun brukernavn(eller personnummer) og passordregistrert på brukerens profil i Altinn. Registrering av brukernavn og passord gjøres i Altinn portalen under Min Profil her. Autentisering med brukernavn og passord gir tilgang til å hente meldinger og sende inn skjema som krever sikkerhetsnivå 1. 1. Utfør autentisering Send følgende POST-forespørsel mot APIet: POST https://www.altinn.no/api/authentication/authenticatewithpassword HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey { &amp;quot;UserName&amp;quot;: &amp;quot;MyUsername&amp;quot;, &amp;quot;UserPassword&amp;quot;: &amp;quot;MyPassword&amp;quot; } Respons fra API Ved korrekt autentisering vil du få STATUS 200 OK som respons fra Altinn REST API 2. Hente ut påloggings-token Etter vellykket pålogging oppretter Altinn et sett med tokens i form av HTTP cookies i Set-Cookie header. Når Altinn har opprettet disse token burde din applikasjon hente de ut Her er eksempler på hvordan du kan hente ut token i HTTP cookie på de vanligste plattformene: Android: CookieManager#getCookie(URL) kan brukes til å hente ut cookien satt av Altinn. Detaljert eksempelkode på denne tekikken kan du finne her. iOS: Din applikasjon kan hente ut cookies satt av Altinn ved å bruke NSHTTPCookieStorage. Dette blir ofte kalt &amp;ldquo;cookie jar.&amp;rdquo; NSHTTPCookie *cookie; NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (cookie in [cookieJar cookies]) { NSLog(@&amp;quot;%@&amp;quot;, cookie); } Detaljert eksempelkode på denne teknikken for iOS finner du her. 3. Videreføre påloggings-token i kall til Altinn API Tokenet .ASPXAUTH legges i HTTP header som &amp;ldquo;Cookie&amp;rdquo; i videre på kall til Altinn API: Cookie: .ASPXAUTH=2AF7F203... API nøkkelen må også legges ved i HTTP header slik: ApiKey: myKey API nøkkel får du etter registrering av din applikasjon. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/",
	"title": "Digital dialog",
	"tags": [],
	"description": "Gir en oversikt over de tjenestenetypene som Altinn tilbyr samt annen funksjonalitet som understøtter digital dialog.",
	"content": "Gir en oversikt over de tjenestenetypene som Altinn tilbyr samt annen funksjonalitet som understøtter digital dialog. Brukerne kan nå tjenestene via Altinn portalen og/eller Mobile apps. Det er også mulig å kommunisere med Altinn via et fagsystem. Betaling I enkelte offentlige tjenester inngår betaling som en del av saksbehandlingen. Altinn har støtte for betaling med tre av de største betalingsleverandørene på det norske markedet. Formidling av data Formidlingstjenesten er en maskin-til-maskin formidling av store datamengder mellom ulike offentlige og private virksomheter. Innsending Er en tjeneste der bruker fyller ut, signerer og sender inn et skjema Innsyn Er en tjeneste som benyttes for å gi bruker innsyn i data som er registrert i tjenesteeier sitt system, for eksempel saksbehandlingsløsninger eller elektroniske arkiv. Lenketjeneste En lenketjeneste utfører autorisasjon i Altinn før brukeren sendes til et annet nettsted der selve tjenesten kjører. Melding Er en tjeneste som lar tjenesteeier sende informasjon i form av en melding som brukerne kan lese i Altinn-portalen eller laste ned til sitt datasystem. Samhandling Er en sammensetning av flere enkeltstående tjenester til en helhetlig prosess mellom en eller flere sluttbrukere og en eller flere offentlige virksomheter. Samtykke Gjennom samtykkeløsningen i Altinn kan personer/organisasjoner gi samtykke til at en tredjepart (offentlige og private virksomheter) får midlertidig innsynsrett på et spesifikt sett med opplysninger om dem som tidligere er innhentet. Varsling Er en tjeneste som kan benyttes til å varsle brukere på e-post og/eller sms når en melding eller et skjema er gjort tilgjengelig i meldingsboksen i Altinn. "
},
{
	"uri": "https://altinn.github.io/docs/guides/tjenesteeier/implementasjonsguide/",
	"title": "Guide for tjenesteeier",
	"tags": [],
	"description": "",
	"content": "1 Innledning Dette dokumentet beskriver de tjenester Altinn tilbyr alle tjenesteeiere og hvordan deres systemer kan integrere seg mot disse. Det er lagt vekt på å beskrive både det funksjonelle aspektet i forhold til hva integrasjonene tilbyr rent funksjonelt, og en teknisk detaljering av grensesnittene som tilbys av Altinn. Eventuelle tjenester/grensesnitt som er spesifikke for en tjenesteeier er ikke med her. 1.1 Hva er Altinn Altinn er myndighetenes løsning for innrapportering og dialog med næringslivet. Alle tjenester fra det offentlige til næringslivet skal gjøres tilgjengelige her. Målet er at næringslivet bare skal behøve å forholde seg til én nettportal for all rapportering og kommunikasjon med forvaltningen, og at Altinn skal bli et samhandlingsnav for offentlig norsk e-forvaltning. Videre skal Altinn som et transaksjonsnav sørge for håndtering av sluttbrukertjenester som innsendings-, meldings-, samhandlings-, formidlings- og innsynstjenester. 1.2 Valg av grensesnitt Flere av tjenestene tilbys med både web service– og batch-grensesnitt. Som en tommelfingerregel kan man si at skal man overføre færre enn 100 elementer (alternativt mindre enn 30 MB) kan man benytte web service grensesnitt, men for store datamengder bør batch-grensesnitt benyttes. Tommelfingerregelen er scenarioavhengig og ingen absoluttgrense. AltinnII plattformen er bygget på siste versjon av Microsoft software og teknologi, og er ikke en begrensning for transport av data. For overføring av store datamengder er det vel så viktig at eksterne systemer er optimalt konfigurert iht. ønsket grensesnitt. 1.3 Lesehenvisning Dette dokumentet bør leses i sammen med dokumentene &amp;ldquo;Funksjonell spesifikasjon – Sluttbrukerløsningen&amp;rdquo;, som gir en funksjonell beskrivelse av sluttbrukerløsningen, og &amp;ldquo;Implementasjonsguide for integrasjon mot Altinn&amp;rdquo;, som er den overordnede guiden for alle som skal integrere seg mot Altinn. I tillegg refereres leser til Tjenestekatalogen (Service Inventory) som en kontinuerlig oppdatert liste over tilgjengelige tjenester, med tilhørende funksjonell og tekniske informasjon, samt tjenestens WSDL tilgjengelig på endepunktet for den tekniske spesifikasjonen. Tjenestekatalogen vil gi en komplett liste over hvilke tjenester som er tilgjengelig for tjenesteeiere gjennom egen visning av listen (Tjenesteeier tjenester): https://altinn.brreg.no/sites/program/altinn%20II/Lists/Tjenestekatalog/Tjenesteeier%20tjenester.aspx 1.4 Like operasjoner med forskjellige protokoller og endepunkter Alle operasjonene er tilgjengelig på to protokoller (bindings). Operasjoner som benytter SOAP 1.1 er kjennetegnet med navnendelsen –Basic. Operasjoner som benytter SOAP 1.2 er kjennetegnet med navnendelsen –WS. Operasjoner som benytter SOAP 1.2 og sertifikat er kjennetegnet med navnendelsen –EC. Sertifikatet er knyttet til avgiver, slik at flere brukere kan benytte samme sertifikat. Utfyllende beskrivelse kommer senere i dokumentet. For tjenesteeiere blir EC grensesnitt autentisert ved bruk av et sertifikat og agency system brukernavn og passord. AEC grensesnitt benytter SOAP 1.2 og sertifikat, men krever ikke bruk av agency systemer, med brukernavn og passord. I stedet hentes Organisasjonsnummer direkte fra sertifikatet som brukes til autentisering, som så valideres opp mot registrerte tjenesteeiere. 1.5 Versjonering av operasjoner Flere av operasjonene i dette dokumentet vil kunne eksistere i flere versjoner. Dette for å være tilbakekompatibel med eventuelt eksisterende klienter. Når en endring blir gjort for en gitt operasjon opprettes det en ny operasjon med tilsvarende navn som ender med et versjonsnummer, for eksempel V2. Dette gjør at gamle klienter vil kunne fortsette å benytte gammel metode og WSDL, mens nye klienter kan (og oppfordres til) benytte nyeste metode og WSDL. Merk at ikke alle grensesnitt nødvendigvis vil benytte denne endelsen. Dette gjelder i de tilfeller hvor operasjonen ikke tidligere er tilgjengeliggjort og dermed ikke har noen forgjenger, for eksempel gjelder dette for mange av EC grensesnittene. Dette dokumentet vil dokumentere den nyeste versjonen av operasjonene. For dokumentasjon av tidligere versjoner henvises det til tidligere dokumentversjoner. 2 Definisjoner 3 Refererte dokumenter og linker 4 Registrering For å kunne sende og/eller motta data til/fra Altinn må tjenesteeier registrere sitt system og motta passord som skal benyttes ved overføring(ene). Registrering gjøres ved at tjenesteeier bestiller tilgang via skjema som finnes på Brønnøysundregistrenes eksternnett (https://altinn.brreg.no/sites/dokument2/Bestillingsskjema/Bestilling%20-%20Ny%20tjenesteeier%20i%20SBL.doc). Driftsleverandør registrerer systemet basert på registrert skjema, og passord kommuniseres tilbake til tjenesteeier. System og passord brukes da som henholdsvis systemUserName og systemPassword i kall mot Altinn. 5 Autentisering og autorisering Når tjenesteeier via egne systemer benytter tjenester mot Altinn blir det registrerte systemet autentisert og autorisert før det kan utføre operasjoner mot Altinn. Tjenesteeiers system må være registrert i Altinn og passord mottatt før tjenestene kan benyttes. Ved bruk av batch grensesnitt blir tjenesteeier autentisert gjennom FTP/SFTP protokollen på vanlig vis. Eller Altinn autentiserer seg ved henting på FTP/SFTP. 6 Varselsmaler Altinn har mulighet til å sende ut predefinerte varsler til sluttbrukerne når tjenesteeier sender meldinger (8.2.1), legger inn prefill (8.1.1), og ved sending av frittstående varsel (8.8). Disse varslene må være definert i Altinn før de kan benyttes av tjenesteeier. Varsel sendes basert på informasjon om konkret angitte adresser, mobiltelefonnummer og/eller e-post adresse, som sendes Altinn, eller ved å oppgi enten fødselsnummer eller organisasjonsnummer. I de to siste tilfellene vil Altinn slå opp i informasjon lagret i Altinn for å sende varsel: for fødselsnummer i brukerens kontaktinformasjon i det private samtykket, for organisasjonsnummer i organisasjonens profilside. Profilsiden til en organisasjon vil inneholde både kontaktinformasjonen som er angitt i Enhetsregisteret i tillegg til informasjon lagt inn av organisasjonen selv. For å opprette en ny varslingsmal må tjenesteeier bestille dette ved å benytte skjema som finnes på Brønnøysundregistrenes eksternnett . Her kan det velges hvilke språk (norsk, nynorsk og engelsk) og varslingsmetoder (e-post og SMS) varslesmalen skal støtte. Når varselsmalen skal benyttes i web services eller batch vil kombinasjonen av navn på varslingsmalen (NotificationType), varslingsmetode (TransportType) og språk angi hvilken tekst som sendes ut. Varselsmalen kan også opprettes med såkalte tokens/substitusjonsvariabler angitt ved {0}, {1} osv. som lar tjenesteeier sende inn egendefinerte tekststrenger. Disse angis i rekkefølge ved å benytte parameteren TokenValue. SMS varsler kan ikke inneholder mer enn 140 tegn. Et SMS varsel kuttes automatisk på 140 tegn dersom tjenesteeier forsøker å sende et varsel på mer enn 140 tegn. 6.1 Varselsmakroer Det er en del varslings-makroer tilgjengelig for bruk i Notification løsninger for tjenesteeier. En makro er en kort tekst som byttes ut med data fra Altinns Register. Register data blir hentet ut basert på ReporteeNumber eller ReporteeElementId koblet til en Notification. Makroer legges inn som en del av NotificationTemplate, men kan også leveres i en text-token. Makroer er case-sensitive. Makro Beskrivelse $reporteeFirstName$ Fornavn til Reportee $reporteeMiddleName$ Mellomnavn til Reportee $reporteeLastName$ Etternavn til Reportee $reporteeName$ Fullt navn til Reportee. $reporteeNumber$ Gir organisasjonsnummer for en organisasjon, gir en tom streng ikke noe for en person. $reporteeBirthMonth$ $reporteeBirthDay$ $reporteeBirthYear$ $reporteeBirthDay(dd/mm/yy)$ $reporteeBirthDay(yyyy-mm-dd)$ $reporteeBirthDay(yy/dd/mm)$ $reporteeBirthDay(dd.mm)$ Forskjellige utgaver av en persons fødselsdag. Dersom man bruker $reporteeBirthDay(#)$, så vil fødsels-dato avgis på formatet som er avgitt av #, med en kombinasjon av yyyy, yy, mm og dd. Så om man gir $reporteeBirthDay(yyyy-mm-dd)$ vil man for eksempel få ut 1977-11-23. $reporteePostalCode$ $reporteePostalArea$ $reporteePostalAddress1$ $reporteePostalAddress2$ $reporteePostalAddress3$ Post-addresse data til Reportee. $reporteeEmail$ $reporteeMobileNumber$ Telefonnavn eller Email til Reportee. $servicename$ Tjenestenavn på ReporteeElement som er koblet til en Notification. Brukes i Prefill/Correspondence sammenheng. 7 Tjenesteutvikling og samspill med integrasjon Tjenester for innsendinger, meldinger, formidling, innsyn og samhandling etableres i tjenesteutviklingsløsningen (TUL), og benyttes i sluttbrukerløsningen (SBL), dvs. Altinn portalen og integrerte systemer (sluttbrukersystemer og systemer hos tjenesteeiere). Samspillet mellom en tjeneste i TUL og integrasjonspunkter er etablert gjennom å benytte: Begrep i TUL Begrep i AltinnII Begrep i AltinnI Beskrivelse Tjenestekode ServiceCode (noen steder også angitt som ExternalServiceCode N/A Angir tjenestekode for Altinn tjenesten, for eksempel &amp;ldquo;MT0001&amp;rdquo; (innsendingstjeneste). Alfanumerisk verdi. Oppstår i TUL. Kombinasjonen av Tjenestekode og Tjenesteutgavekode er unik i Altinn. Tjenesteutgavekode ServiceEdition (noen steder også angitt som ServiceEditionCode eller ExternalServiceEditionCode N/A Angir utgaven på tjenestekoden, for eksempel 12311 (for tjenestekode &amp;ldquo;MT0001&amp;rdquo;). Tallverd. Oppstår i TUL. Kombinasjonen av Tjenestekode og Tjenesteutgavekode er unik i Altinn. N/A DataFormatId Skjemanummer Angir id som metadatakilde har satt på dataenheten (skjema), for eksempel &amp;ldquo;268&amp;rdquo;. Alfanumerisk verdi. Benyttes i elementet som omkranser faktiske skjemadata (xml). Metadatakilde kan for eksempel være Oppgaveregisteret (OR). Kombinasjonen av DataFormatId og DataFormatVersion er unik. N/A DataFormatVersion Spesifikasjonsnummer Angir versjon som metadatakilde har satt på dataenheten (skjema), for eksempel 6370. Tallverdi. Benyttes i elementet som omkranser faktiske skjemadata (xml). Metadatakilde kan for eksempel være Oppgaveregisteret (OR). Kombinasjonen av DataFormatId og DataFormatVersion er unik. Metode for oversending ShipmentDefinition N/A Angir forsendelsesoppsett, dvs. unik alfanumerisk id som peker til informasjon om hva slags data som sendes/mottas, og hvordan det skal pakkes/settes sammen før utsending. Oppstår ved etablering av grensesnitt mellom Altinn og system som vil integrere seg med Altinn. N/A ReporteeElementID N/A Angir den unike identifikatoren for en spesifikk tjeneste (innsendings-, meldings-, innsyns-, eller samhandlingstjeneste) N/A CaseID N/A Angir den unike identifikatoren for en spesifikk samhandlingstjeneste, benyttes blant annet til å knytte andre tjenester opp mot samhandlingstjenesten. 8 Funksjonelle scenario Altinn tilbyr flere tjenester innenfor flere funksjonelle områder for tjenesteeiere. Dette kapittelet beskriver hvilken funksjonalitet som finnes med referanser til hvilke grensesnitt som benyttes. Oversikt over den enkelte tjeneste, tjenesteoperasjon og parametere til disse er beskrevet i Tjenestekatalog og tjenestenes WSDL, samt i et eget avsnitt; kap 9 Grensesnitt – web servicesGrensesnittWebServices. Tilsvarende er det et eget avsnitt for batch beskrivelser; kap 10 Grensesnitt – batch til Altinn_Innsendingstjenester. De funksjonelle områder som finnes er: - Innsendingstjenester - Meldingstjenester - Formidlingstjenester - Kvitteringer - Innsynstjenester - Lenketjeneste - Samhandlingstjenester - Frittstående varsel - Autorisasjon - Uthenting fra tiltrodd tredjepart logg - Sluttbrukers meldingsboks (ikke tilgjengelig p.t.) - Tjenesteeierstyrt rettighetsregister 8.1 Innsendingstjenester Innsendingstjenester utvikles i tjenesteutviklingsløsningen (TUL) i Altinn, og er en definert innsending av spesifikke skjema/skjemasett med eller uten vedlegg. Fylles ut i Altinn portalen eller i integrert sluttbrukersystem, signeres og sendes inn. Påbegynte og innsendte innsendingstjenester kan oppbevares i sluttbrukers meldingsboks i Altinn. Svardata sendes tjenesteeier. Tjenesteeier kan også legge skjemaet klart i den enkeltes brukers arbeidsliste og varsle om frister og lignende. For tjenesteeiere omhandler &amp;ldquo;Innsendingstjenester&amp;rdquo; følgende: - innsending av prefilldata - innsending av abonnementsdata - mottak av ferdig utfylte innsendinger fra Altinn - uthenting av innsendte data fra tjenesteeiers eget arkiv - uthenting av kvittering for status på innsending 8.1.1 Innsending av prefilldata Tjenesteeier kan sende inn prefilldata for en tjeneste i Altinn, og dataene benyttes ved preutfylling. Preutfylling innebærer at en gitt tjeneste (skjema/skjemasett) ved aktivisering i Altinn blir forhåndsutfylt med data mottatt fra tjenesteeiere og nasjonale registre. Prefilldata kan sendes i sanntid eller satsvis (batch). Det finnes fem typer data ifbm. preutfylling: 1. Sende inn preutfylte skjemasett - Tjenesteeier kan sende inn ett eller flere preutfylte skjemasett for en gitt tjeneste versjon, eller rapporteringsplikt for lagring i database. - Benyttes når en avgiver eller abonnementsrutine aktiviserer tilknyttet tjeneste i portalen. - Skjemasettet kan inneholde identifiserende felter, for å kunne ha forskjellige preutfylte skjemasett ved rapportering flere ganger i året. Se eget punkt nedenfor om Identifiserende felter for mer info. - Kan sendes i sanntid eller satsvis. Ved overføring i sanntid overføres en liste av preutfylte skjemasett asynkront, og kvittering returneres. - Kvittering for info om status på asynkron innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending benyttes som nøkkel. 2. Identifiserende felter - Verdier som legges på et preutfylt skjemasett, for å gjøre skjemasettet unikt - Verdiene kan være &amp;ldquo;hva som helst&amp;rdquo;, men typisk noe som kan knyttes til det preutfylte skjemasettet, f.eks. &amp;ldquo;rapport X&amp;rdquo;, &amp;ldquo;periode Y&amp;rdquo; (2 verdier). - Preutfylte skjemasett uten identifiserende felter benyttes ved aktivisering av tjenester i Altinn portal, og/eller sammen med abonnement. - Preutfylte skjemasett med identifiserende felter benyttes kun sammen med abonnement. 3. Direkte aktivisering av ett preutfylt skjemasett - Tjenesteeier kan sende inn ett preutfylt skjemasett som øyeblikkelig blir tilgjengeliggjort i avgivers arbeidsliste i portalen - Med eller uten varsel etter tilgjengeliggjøring i arbeidslisten. - Det preutfylte skjemasettet kan lagres til database for senere bruk, som beskrevet i punkt 1. - Kan kun sendes i sanntid, synkront. - Man vil kunne angi om det instansiert og preutfylt skjema skal knyttes til en samhandlingstjeneste ved å angi referansen i den valgfrie parameteren caseId i operasjonen. 4. Sende inn feltbasert preutfyllingsdata - Tjenesteeier kan sende inn feltnavn og feltverdi for felter som benyttes i skjemaer. - Ingen direkte knytning til tjeneste eller skjema, dvs. feltet kan finnes på flere tjenester for samme avgiver. - Benyttes når avgiver aktiviserer tjeneste som inneholder feltet i portalen. - Kan kun sendes inn satsvis. - Kvittering for status på batch-innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt i xml ved innsending benyttes som nøkkel. 5. Preutfyllingsdata fra nasjonale registre - Data fra nasjonale registre som f.eks. Folkeregistre og Enhetsregisteret sendes inn til Altinn. - Register data knyttes til felter når tjeneste opprettes i Tjenesteutviklingsløsningen (TUL). - Benyttes når avgiver aktiviserer tjeneste som inneholder feltet Figur 1 - Skjermbildet viser utfylling av RF-1047 (Inntektsoppgave) i Altinn portalen. Feltene innenfor den røde firkanten har automatisk blitt utfylt vha. prefilldata sendt inn av tjenesteeier. Da det er flere kilder for preutfyllingsdata blir preutfyllingsdataene benyttet i følgende rekkefølge for å hindre uønskede overskrivelser: 1. Preutfylt skjemasett Hentes fra Altinn databasen dersom det finnes for gitt tjeneste og avgiver. 2. Feltbasert preutfylling. Felter som finnes for gitt avgiver og aktivisert skjema hentes fra Altinn databasen. Overskriver evt. Preutfylt skjemasett. 3. Preutfyllingsdata fra nasjonale registre. Data fra nasjonale registre er feltbasert og overskriver alle andre preutfyllingsdata typer. For satsvis overføring kan data hentes fra tjenesteeiers system, eller tjenesteeier kan levere data på et definert Altinn område. Tjenesten må være opprettet i TUL og eksportert til SBL, for at preutfyllingsdata for den gitte tjenesten skal kunne mottas. For flere detaljer rundt kontrakten for SubmitPrefilledFormTasks og SubmitAndInstantiatePrefilledFormTask vennligst se henholdsvis kapittel 9.6.2 og 9.6.1, Tjenestekatalog og WSDL. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: | Tjeneste | Operasjon | Type| |&amp;mdash;&amp;mdash;&amp;ndash;|&amp;mdash;&amp;mdash;&amp;ndash;|&amp;mdash;&amp;mdash;&amp;ndash;| |Prefill| SubmitPrefilledFormTasks|Basic/WS/EC| |Prefill|SubmitAndInstantiatePrefilledFormTask|Basic/WS/EC| |Receipt|GetReceipt|Basic/WS/EC| Batch grensesnitt som inngår i beskrevet funksjonalitet: Batch Operasjon Type Preutfylling XML FTP/SFTP 8.1.2 Innsending av abonnementsdata Tjenesteeiere kan opprette abonnement på innsendingstjenester som aktiverer og tilgjengeliggjør innsendingstjenesten i den gitte avgivers arbeidsliste. Kan sendes i sanntid eller satsvis (batch). Ved overføring i sanntid overføres en liste med abonnement, dvs. ett eller flere asynkron overføringer. For satsvis overføring kan data hentes fra tjenesteeiers system, eller tjenesteeier kan levere data på et definert Altinnområde. Tjenesten må være opprettet i TUL og eksportert til SBL, for at et abonnement for den gitte tjenesten skal kunne mottas. Man kan opprettet følgende abonnementstyper: • Engangsaktivering • For en gitt periode/periodisk rapporteringsplikt • I et gitt intervall • På gitte tidspunkter med gitte frister Et abonnement kan være tilknyttet identifiserende felter for å kunne koble et abonnement til et bestemt preutfylt skjemasett for den gitte avgiver. Det preutfylte skjemasettet med de samme identifiserende feltene må finnes i Altinn databasen før abonnementet aktiviseres. Se eget punkt om Identifiserende felter for mer info. Mottatte abonnementsdata lagres til databasen. Ved innsending av abonnementsdata vil man kunne angi om skjema skal knyttes til en samhandlingstjeneste ved å angi referansen i den valgfrie parameteren CaseId i SubmitSubscription. Kvittering for info om status på innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending via web service/batch grensesnitt (xml) benyttes som nøkkel. En rutinejobb i Altinn vil med jevne mellom gå igjennom abonnementsdatabasen for å finne abonnement/innsendingstjenester som er klare for instansiering, dvs. den vil aktivisere alle abonnement hvor startdato er mindre enn, eller lik, dagens dato. Startdato er satt av tjenesteeier, og neste aktiviseringsdato kalkuleres automatisk av rutinejobben i Altinn ut fra gitte parametre satt av tjenesteeier. Se parameter detaljer i avsnittet SubmitSubscription (web service) (9.7.1) eller Abonnement (batch) (10.3). For flere detaljer rundt kontrakten for SubmitSubscription vennligst se kapittel 9.7.1, Tjenestekatalog og WSDL. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type Subscription Basic/SubmitSubscription/EC Basic/WS/EC Receipt GetReceipt Basic/WS/EC Batch grensesnitt som inngår i beskrevet funksjonalitet: Batch Overføringsformat Protokoll Abonnement XML FTP/SFTP 8.1.3 Motta data for innsendinger Arkiverte innsendinger i Altinn tilgjengeliggjøres til tjenesteeier for henting/overføring. Kan enten sendes i sanntid per innsending, satsvis (batch), eller ved å bruke DownloadQueue. For sanntid, dvs. ved bruk av web service, må tjenesteeier etablere dedikert web service angitt av Altinn på egen plattform, og motta innsendinger automatisk etter hvert som de arkiveres. Se eget avsnitt: 9.15 Online overføring til Tjenesteeier. For satsvis overføring kan data leveres til en tjenesteeiers mottakssystem dersom det er etablert, eller tjenesteeier kan hente data på et definert Altinn område. Tjenesteeier kan velge å bruke DownloadQueue web service, som lar tjenesteeiere hente meta-data fra en kø, som så kan brukes til å hente individuelle arkiverte innsendinger. Tilgjengeliggjøres i standard Altinn format eller transformeres til tjenesteeiers eget mottaksformat. Kvittering først opprettet ved innsending fra tjenesteeier oppdateres med informasjon om utsending, dvs. livsløpet til innsendingstjenesten dokumenteres. Kvittering kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending benyttes som nøkkel. Innsendinger for tjenesteutgaver knyttet til DownloadQueue (konfigureres under utgaveparametere i TUL) vil legge til metadata for innsendinger i DownloadQueue. Tjenesteeier kan hente en liste med disse metadata ved å bruke et web service kall, se kapittel for DownloadQueue (9.16) Metadata kan så benyttes til å hente individuelle arkiverte innsendinger med vedlegg. I tillegg er det en tjenesteoperasjon som gir tilgang å hente ned en PDF versjon av et skjemasett. Denne vil støtte PDFA standarden. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet for overføring i sanntid: Tjeneste Operasjon Type Basic/ReceiveOnlineBatchExternalAttachment Basic Receipt GetReceipt Basic/WS/EC Batch grensesnitt som inngår i beskrevet funksjonalitet: Batch Overføringsformat Protokoll Innsendingstjenester XML FTP/SFTP Tjenester og tjenesteoperasjoner som inngår i DownloadQueue: Tjeneste Operasjon Type DownloadQueue GetDownloadQueueItems Basic/WS/EC DownloadQueue PurgeItem Basic/WS/EC DownloadQueue GetArchivedFormtaskDQ Basic/WS/EC DownloadQueue GetFormSetPdf Basic/WS/EC 8.1.4 Status på sending av innsendte element For arkiverte elementer som blir sendt til tjenesteeier i sanntid eller satsvis beskrevet i 8.1.3 kan tjenesteeier hente status på elementer ved bruk av ArchiveShipmentStatus tjenesten. Ved å bruke ArchiveShipmentStatus webtjenesten kan tjenesteeier hente en enkel oversikt over overførsels-status på individuelle elementer eller for lister av elementer sortert på tjeneste. Tjenester og tjenesteoperasjoner som inngår i ArchiveShipmentStatus: Tjeneste Operasjon Type ServiceOwnerArchive GetArchiveShipmentStatus Basic/WS/EC 8.1.5 Dekryptering av sensitive felter data i innsendingstjenesten Altinn støtter funksjonalitet for innsending av sensitive tjenester med sensitive felter. Slike skjema kan sendes inn via portalen eller sluttbrukersystemer. For å kunne lese de sensitive feltene tjenester må tjenesteeier benytte sine egne sertifikater for å dekryptere feltene. Krypteringen skjer ved at innsender benytter en symmetrisk nøkkel på 128 bit i en AES algoritme for å kryptere det sensitive feltene i skjemaet. Sluttbrukersystemer må selv generere denne nøkkelen og kryptere det sensitive felteneskjemaet, mens dette vil bli håndtere for bruker i portalen. For at bruker senere skal kunne dekryptere feltene fra skjemaet sendes den symmetriske nøkkelen med forsendelsen, men denne er da kryptert ved et selvvalgt brukerpassord på minst 8 tegn. Bruker kan da hente ut data, dekryptere symmetrisk nøkkel ved hjelp av sitt selvvalgte passord, og bruke denne til å dekryptere den sensitive dataen. For at tjenesteeier skal kunne dekryptere feltene må de også ha krypteringsnøkkelen. Den symmetriske nøkkelen må derfor også krypteres med tjenesteeierens offentlige sertifikat ved hjelp av algoritmen RSA, og lagt ved innsendingen. Når tjenesteeier da mottar sensitiv data vil de først bruke sin private nøkkel til å dekryptere krypteringsnøkkelen, deretter bruke denne nøkkelen til å dekryptere de sensitive feltenedata. Innsendinger med av sensitive felt tjenester og vedlegg overføres til etat via batch eller via online oppslag til tjenesteeiers arkiv på samme måte som andre innsendinger for tjenester uten sensitiv informasjon. 8.1.5.1 Tekniske detaljer Den symmetriske nøkkelen som er brukt til å kryptere de sensitive feltene i et skjema som skal dekrypteres hos tjenesteeier gjøres tilgjengelig i skjema ved hjelp av XML-Enc standarden (http://www.w3.org/TR/xmlenc-core/). Den krypterte symmetriske nøkkelen ligger pakket sammen med en referanse til sertifikatet som er brukt på følgende form. &amp;lt;my:txtFN&amp;gt; &amp;lt;EncryptedData Type=&amp;quot;http://www.w3.org/2001/04/xmlenc#Content&amp;quot; xmlns=&amp;quot;http://www.w3.org/2001/04/xmlenc#&amp;quot;&amp;gt; &amp;lt;EncryptionMethod Algorithm=&amp;quot;http://www.w3.org/2001/04/xmlenc#aes128-cbc&amp;quot; /&amp;gt; &amp;lt;ds:KeyInfo xmlns:ds=&amp;quot;http://www.w3.org/2000/09/xmldsig#&amp;quot;&amp;gt; &amp;lt;EncryptedKey xmlns=&amp;quot;http://www.w3.org/2001/04/xmlenc#&amp;quot;&amp;gt; &amp;lt;EncryptionMethod Algorithm=&amp;quot;http://www.w3.org/2001/04/xmlenc#rsa-1_5&amp;quot; /&amp;gt; &amp;lt;CipherData&amp;gt; &amp;lt;CipherValue&amp;gt;Ahgw/pNo9fcfUtOr8aTceVkFlCsC58HY0VrQUJW1B/AxMOzYsyKhWRorUViQENqSJabEiwfin4zO2qzRuELwGXBFZ4jtkwlJpnAd+6NuCZ/P0ZsxJG5A8XnALmVCBpIcOPaPUa3Q211Bnu3eCHaMmgw9/itX3g3FPZItkwNEfGg=&amp;lt;/CipherValue&amp;gt; &amp;lt;/CipherData&amp;gt; &amp;lt;/EncryptedKey&amp;gt; &amp;lt;ds:KeyName&amp;gt;CD13AEC20C0564C2B5499630BE478654D3ADD64A&amp;lt;/ds:KeyName&amp;gt; &amp;lt;/ds:KeyInfo&amp;gt; &amp;lt;CipherData&amp;gt; &amp;lt;CipherValue&amp;gt;TJ+KuQDc2ccduVlCIaM9sw==&amp;lt;/CipherValue&amp;gt; &amp;lt;/CipherData&amp;gt; &amp;lt;/EncryptedData&amp;gt; &amp;lt;/my:txtFN&amp;gt; I dette eksempelet er my:txtFN feltet i skjema som inneholder sensitive data. I slike felt vil man finne et EncryptedData element som inneholder følgende 3 viktige elementer 1. Symmetrisk nøkkel kryptert med sertifikat. (EncryptedData/KeyInfo/EncryptedKey/Cipherdata) 2. Referanse til sertifikat brukt for å kryptere symmetrisk nøkkel. Dette er en thumbprint av sertifikat for tjenesteier. Den brukes internt hos tjenesteeier til å gjøre oppslag i keystore for å få tak i privat nøkkel og dermed kunne dekryptere den symmetriske nøkkelen. (EncryptedData/KeyInfo/KeyName) 3. Skjemadata kryptert med symmetrisk nøkkel. (EncryptedData/CipherData/CipherValue) Skjemadata er kryptert ved hjelp av den symmetriske AES algorithmen med en blocksize på 128 bit, ciphermode CBC (Cipher-block chaining, http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation ) og padding er PKCS7. Den symmetriske nøkkelen er kryptert med RSA algoritmen, ECB mode og PKCS1 padding. For tjenester som har krypterte vedlegg og krypterte skjemaer benyttes nøkkelinformasjonen som ligger i GetArchivedFormTaskBasicV2Result eller i data fra fil &amp;lt;SOEncryptedSymmetricdKey&amp;gt; &amp;lt;EncryptedKey&amp;gt;u7CPRJ/ZtOoFPU4tkSqBDLW6e0V1Mr92C0oTC7bWztYuCvgl0+R2DUW/8iSSaH3+Wl1vnWTRSnuEDiKBVenfEjQ5j89WHvbA0QO1cMzIpYl53EDBt1tvoVHaJYq+4KJIo2DGNYNHyb2iFIgn39BYo4KpNLW1Yk2k8MegCgnajMnSICSuYuy5sGuBkvytottC0h2KKR7PAZtuuzJ4PRnby2AAMNmSB8VusNctDen/d8nF1Sh1DRcP9pArBvsxEH2A7SwiKS+dRC/J2QK7iM1I6Tphkalsyjmgn03LkJMm/8X9ufp+fN6n8Czg+BsZ1+rw2DD7vgTDGMyn+41gqZW1qg==&amp;lt;/EncryptedKey&amp;gt; &amp;lt;CertificateThumbprint&amp;gt;5D15D6E888632370E0223B779C4E0F0D9D45DED0&amp;lt;/CertificateThumbprint&amp;gt; &amp;lt;/SOEncryptedSymmetricdKey&amp;gt; Se kapittel 14 for kodeeksempler. FormDataXml er kryptert ved hjelp av den symmetriske AES algorithmen med en blocksize på 128 bit, ciphermode CBC (Cipher-block chaining, http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation ) og padding er ISO10126. ###8.2 Meldingstjenester Tjenesteeiere kan sende informasjon i form av meldinger til brukere av Altinn, og meldingene støtter HTML og vedlegg. Brukere kan varsles med e-post eller SMS om at informasjon er gjort tilgjengelig, for innsyn eller behandling. Tjenesteeiere får informasjon om hvilke utsendte meldinger som er åpnet, og kan eventuelt kreve at brukeren bekrefter mottaket innen en fastsatt frist. Tjenesteeier kan enkelt sjekke status for innsendte meldinger på en meldingstjeneste ved å benytte eget web service kall med et sett av søkeparametere. Meldingene kan oppbevares i sluttbrukers meldingsboks i Altinn i en fastsatt periode, eventuelt slettes av brukeren. Bruker kan også arkivere meldingene til sitt arkiv. Om meldingen krever bekreftelse må dette gjøres før meldingen eventuelt kan arkiveres. Meldinger kan også eventuelt sendes til &amp;ldquo;Digital postkasse til innbygger&amp;rdquo; hvis brukeren har registrert en slik postkasse i Kontakt- og reservasjonsregisteret. (Dette gjelder kun personer, ikke organisasjoner.) Digitale brev kan opprettes istedenfor eller i tillegg til en melding i Altinn. I sammenheng med opprettelse av digitale brev er det også mulig å bestille varsel fra DPI løsningen. DPI varsel vil bli sendt ut av postkasse leverandøren. Meldingsvarsel og DPI varsel er helt separate og bestilles hver for seg. For varsel fra DPI følger grensesnittet til Altinn i stor grad definisjonene til difi. http://begrep.difi.no/SikkerDigitalPost/1.2.0/begrep/Varsler 8.2.1 Sende inn meldingstjenester Tjenesteeiere kan sende en melding til en gitt person eller bedrift som tilgjengeliggjøres for lesing/henting via Altinn. Kan enten sendes i sanntid per innsending, eller satsvis (batch). Melding kan være: • Ren tekst. • HTML basert (formatert visning i nettleser). • XML basert med referanse til tilhørende visningsskjema. (Skjema må defineres på tjenesten i TUL.) • PDF. Dette gjelder kun sikker digital post. (Altinn vil selv behandle det som vedlegg.) • Kombinasjon av alle over. Annet: • Brukere kan reservere seg mot å motta digital korrespondence gjennom kanaler som Altinn og digital postkasse. Tjenesteeiere kan velge å respektere eller ignorere slike reservasjoner. Se IsReservable. • Inneholde binære vedlegg (for nedlasting), valgfri parameter DestinationType vil kunne begrense om vedleggene er tilgjengelig i portal eller sluttbrukersystem, eller begge. Om ikke sendt inn blir den satt til standard verdi ShowToAll. Ved videresending til &amp;ldquo;Digital postkasse til innbygger&amp;rdquo; er det obligatorisk med minst ett vedlegg. Dette vil da benyttes som hoveddokument i det som sendes til brukerens digitale postkasse. • Varsles til en eller flere brukere på forskjellige kommunikasjonskanaler: - SMS - E-post • Tilknyttet en eksisterende samhandlingstjeneste ved å benytte valgfri caseID parameter. Om meldingstjenesten ikke tilhører den angitte samhandlingstjenesten eller denne ikke eksisterer vil operasjonen avbrytes. • Mulig å videresende meldingen til en e-post adresse om angitt i valgfri parameter AllowForwarding. Er denne satt til true vil bruker kunne sende meldingen videre som en e-post fra portalen. Om ikke satt settes den til standardverdi som er True. • En melding kan kobles til innsending ved å oppgi ArchiveReference. Dette vil da oppfattes som et svar på en innsending. • Det er også mulig å gi instrukser for hvordan en bruker kan svare på en melding. - I form av en enkel link brukeren kan åpne. - I from av et skjema som bruker må sende inn. - I from av en kopi av eksisterende innsending. Brukeren korrigerer og sender inn. Digital postkasse til innbygger: Løsningen for «Digital postkasse til innbygger» har ikke støtte for all funksjonalitet som finnes i Altinn. Funksjoner som ikke blir brukt hvis det ikke opprettes noen melding i Altinn: • Opprettelse av kobling mellom melding og en innsending. (Tjenesteeier svar på innsending) • Svar på melding. (Sluttbruker svar på melding fra tjenesteeier.) • Knyttning mot samhandlingstjenester. • Varsel for h.h.v melding og digitalt brev styres med ulike innstillinger. Ved overføring i sanntid sendes en og en melding av gangen. Synkron overføring. For satsvis overføring kan data hentes fra tjenesteeiers system, eller tjenesteeier kan levere data på et definert Altinn område. Tjenesten må være opprettet i TUL og eksportert til SBL, for at meldingene skal vises for sluttbrukerne/sluttbrukersystemer. Kvittering for info om status på innsending kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending via web service/batch grensesnitt (xml) benyttes som nøkkel. For flere detaljer rundt kontrakten for InsertCorrespondenceV2 vennligst se kapittel 9.4.1, Tjenestekatalog og WSDL. Det tilbys støtte for gammelt AltUt format for eksisterende tjenesteeiere i Altinn. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type Correspondence InsertCorrespondenceV2 Basic/WS/EC AltUt SubmitAltutMessagePw Basic Receipt GetReceiptV2 Basic/WS/EC Batch grensesnitt som inngår i beskrevet funksjonalitet: Batch Overføringsformat Protokoll Correspondence format XML FTP/SFTP AltUt Format XML FTP/SFTP 8.2.2 Motta meldingsbekreftelse En meldingstjeneste kan defineres med at tjenesteeier ønsker: • Åpne bekreftelse • Lese bekreftelse Meldingsbekreftelser tilgjengeliggjøres for overføring / henting: • Tilgjengeliggjøres i &amp;ldquo;sanntid&amp;rdquo; per innsending • Samles opp og tilgjengeliggjøres på gitte intervall eller spesifikt tidspunkt (batch) Data kan leveres til en tjenesteeiers mottakssystem dersom det er etablert, eller tjenesteeier kan hente data på et definert Altinn område. Tilgjengeliggjøres i standard Altinn format eller transformeres til tjenesteeiers eget mottaksformat. Kvittering først opprettet ved innsending fra tjenesteeier oppdateres med informasjon om utsending, dvs. livsløpet til meldingstjenesten dokumenteres. Kvittering kan hentes ut vha. web service kall, se avsnitt Receipt (9.3). Referanse angitt ved innsending benyttes som nøkkel. Tilbyr støtte for gammelt AltUt format for eksisterende tjenesteeiere i Altinn. Batch grensesnitt som inngår i beskrevet funksjonalitet: Batch Overføringsformat Protokoll CorrespondenceConfirmations XML FTP/SFTP AltUtConfirmationBatch XML FTP/SFTP Det tilbys også egen funksjonalitet for rapportering av en samlet meldingstjeneste hvor tjenesteeier vil motta informasjon om status for alle brukere etter et gitt antall dager definert for tjenesten i TUL. Status for hver bruker her vil kunne være ikke lest, lest, og bekreftet. Data leveres til tjenesteeiers mottakssystem dersom det er etablert. Batch Overføringsformat Protokoll CorrespondenceUsageData XML FTP/SFTP 8.2.3 Sjekke status på meldingstjenester Tjenesteeier kan enkelt sjekke status på meldinger de har sendt inn på en tjeneste ved å benytte egen web service for dette. Resultatsettet fra tjenesten vil være avhengig av søkeparameterne som tjenesteeier sender inn. Tjenestekode (ServiceCode) og tjenesteutgavekode (ServiceEditionCode) er pålagte parametere i spørringen, mens det videre kan filtreres ved å sende inn SendersReference, avgiver (Reportee), til og fra dato (CreatedAfterDate og CreatedBeforeDate), konkrete meldingsstatuser (CurrentStatus), samt hvorvidt det har blitt sendt varsel (NorificationSent). For hver enkelt melding som passer til søkekriteriene tjenesteeier angir vil man få returnert følgende informasjon: - ID for meldingen - Når meldingen ble opprettet - Avgiver meldingen tilhører - Avsenders referanse (satt av tjenesteeier) - Liste over statusendringer med tidspunkt - Liste med varsler knyttet til meldingen, inkludert mottaker, tidspunkt for når varselet er sendt (om sendt) og varselskanal. Statussjekk operasjonen kan også returnere status på det som er blitt forsøkt videresendt til Digital postkasse til innbygger. Statusinformasjon for post som er videresendt inneholder: - ID for sikkert brev slik det er registrert i Altinn - Unik ID for brevet slik det fremkommer i sikker digital post systemet. - Når brevet ble opprettet - Når status for brevet ble sist endret - Avgiver brevet tilhører - Avsenders referanse - List med alle statusene brevet har hatt. I tillegg til denne informasjonen returneres også tjenestekode og tjenesteversjonskode tilbake, samt en parameteren som angir om en grense for antall returmeldinger er nådd (LimitReached). Er grensen nådd må tjenesteeier spisse søket sitt, f.eks. ved å begrense tidsrommet, for å få hentet ut status for alle meldingene. For flere detaljer rundt kontrakten for GetCorrespondenceStatusDetails vennligst se kapittel 9.4.5. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type Correspondence GetCorrespondenceStatusDetails Basic/WS/EC 8.3 Lenketjeneste Formålet med en lenketjeneste er å overføre en bruker i Altinn til en annen nettside og er derfor alltid assosiert med en URL. Lenketjenester blir ikke instansiert i Altinn og er derfor ikke å finne i min meldingsboks i Altinn. For å kunne identifisere hvilken avgiver brukeren valgte å starte tjenesten med, sendes det med en nøkkel som den eksterne tjenesteportalen kan benytte for å spørre Altinn om informasjon om valgt avgiver. Det er også mulig å etterspørre informasjon om hvilke avgivere en bruker kan representere ved å benytte web service metoden GetReportees. Lenketjenester defineres i TUL som de andre tjenestetypene slik at man kan sette autentiseringsnivå og autorisasjonsregler for start av tjenesten. Ekstern portal må verifisere at bruker faktisk skal ha tilgang til tjenestene portalen tilbyr, ved å benytte seg av Altinns XACML grensesnitt for ekstern autorisasjon. For flere detaljer rundt kontrakten for GetReporteeByTempKey og GetReportees vennligst se henholdsvis kapittel 9.8.4 og 9.8.3. For mer informasjon om ekstern autorisasjon se kapittel 8.9.2 og 9.9.1. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type AuthorizationAdministration GetReporteeByTempKey WS/EC AuthorizationAdministration GetReportees WS/EC AuthorizationDecisionPointExternal AuthorizeAccessExternal WS 8.4 Formidlingstjenester Formidlingstjenester handler om å transportere data fra en eller flere avgivere til en eller flere mottakere, hvor Altinn fungerer som mellommann som sørger for transport og infrastruktur. Altinn er sådan en passiv part i prosessen, og både avsender og mottaker må benytte grensesnitt tilgjengeliggjort av Altinn. Innholdet i en formidlingstjeneste er data som er bestemt mellom aktørene som inngår i en formidlingstjeneste, og er ikke kjent av Altinn. Formidlingstjenesten overføres fra avsender til mottaker, og tjenesteeiere benytter derfor ikke egne grensesnitt kun for tjenesteeiere for formidlingstjenesten, men benytter i stedet de samme grensesnitt som er tilgjengelig for alle brukere av Altinn. Se derfor Implementasjonsguide for sluttbrukersystemer for mer informasjon om hvordan disse grensesnittene skal benyttes. Transport av data i en formidlingstjeneste kan gå via web service og SFTP kanal, både for opp- og nedlasting. Ved bruk av web service vil det være en funksjonell begrensning i størrelsen på filer som kan lastes opp og ned, satt til 1GB, mens grensen for SFTP-kanalen vil ligge på i underkant av 2GB. Data som skal overføres over SFTP kanalen pakkes i en ZIP-fil med to forhåndsdefinerte Altinn XML filer for å definere metadata (manifest.xml) og mottakere (recipients.xml). Ved bruk av web service sendes først metadata og mottaker liste, før selve dataen overføres i en egen operasjon. Utover dette kan ZIP-filen i prinsippet inneholde hva som helst av data som må overføres til en eller flere aktører. Utover viruskontroll gjør ikke Altinn noen form for validering eller prosessering av denne dataen som forsendes, men sørger for at oppgitt metadata og mottakerinformasjon er korrekt og validerer, samt holder orden på kvitteringer og sporingsinformasjon om forsendelsen. Formidlingstjenester er tenkt brukt primært for formidlinger: - B2B (Business-to-Business), B2G (Business-to-Government), G2B (Government-to-Business), eller G2G(Government-To-Government) Når en avsender laster opp en formidlingstjeneste vil Altinn verifisere metadata og mottakere. Når dette er gjort vil forsendelsen gjøres tilgjengelig for mottakere for nedlasting. Samtidig vil Altinn opprette en kvitteringshierarki med en hovedkvittering tilhørende avsender, samt en underkvittering per mottaker. Hver underkvittering vil inneholde status på nedlastingen for denne mottakeren. Alle kvitteringer vil være knyttet til referanse satt av avsender. Avsender og mottaker kan også utveksle ytterligere statustekst på disse kvitteringene gjennom web service. På denne måten kan avsender følge opp status for hver enkelt mottaker. Tiden en formidlingstjeneste vil være tilgjengelig for nedlasting i Altinn vil kunne variere fra tjeneste til tjeneste og styres av tjenesteeier. Dette betyr at filene etter en viss tidsperiode vil bli slettet selv om filene ikke er lastet ned av en eller flere av mottakerne. Formidlingstjenesten kan av tjenesteeier også settes opp til å benytte seg av et tjenesteeierstyrt rettighetsregister. Dette registeret kan begrense hvem som har tilgang til opp- og nedlasting av spesifikke tjenester, og styres av tjenesteeier. Se kapittel 8.12 for mer informasjon om dette registeret og hvordan dette styres. For formidlingstjenesten er det tjenesteeierstyrte rettighetsregisteret definert med følgende grunnleggende regler: - For å kunne laste opp en formidlingstjeneste må avsender inneha «write»-rettigheten for formidlingstjenesten. - For å kunne laste ned en formidlingstjeneste må mottaker inneha «read»-rettigheten for formidlingstjenesten. I enkelte brukstilfeller er det i tillegg ønskelig at mottaker også skal kunne sende informasjon tilbake til avsender. For å unngå at alle mottaker da også får «write»-rettigheten, og på den måten kan sende til andre mottakere, benyttes feltet «condition» (betingelse) i det tjenesteeierstyrte rettighetsregisteret. For å støtte brukstilfellet har man derfor også følgende regler: - En mottaker som kun skal kunne sende tilbake til en avsender av tjenesten må ha rettigheten «write», men da med «condition» satt til verdien «recipient». Denne betingelsen benyttes så i Altinn til å validere mottakerlisten, og kun brukere som har rettigheten «read» med «condition» satt til «sender» vil være godkjente mottakere. Dette er vist med Org D i figuren under som kun kan sende til Org A. - Merk her at avsender med rettigheten «write» uten «condition» kan sende til en mottaker med rettighet «read» med «condition» satt til «sender». Dette er vist med Org B i figuren under som kan sende til samtlige andre mottakere. Ved bruk av tjenestene som tilbys av tjenesteeierstyrt rettighetsregister (9.17) kan det bemerkes at parameteren «Party» ikke benyttes for formidlingstjenesten. Figur 2 - Rettigheter og betingelser for formidlingstjenester viser de ulike mulighetene for formidlingstjenesten som er gyldige og hvilke rettigheter og betingelser som trengs. Se også Vedlegg C: Flytdiagram for formidlingstjeneste for overordnet flyt ved bruk av formidlingstjeneste mellom avsender og mottaker. 8.5 Innsynstjenester Når en tjenesteeier ønsker å tilgjengeliggjøre et register for oppslag for brukere, men uten å ha tilgjengelig presentasjon for dette så kan det realiseres ved hjelp av en innsynstjeneste i Altinn. Konseptuelt kan man se en innsynstjeneste som en kombinasjon av en innsendingstjeneste og en meldingstjeneste der hvor det ikke foregår noen behandling av den innsendte informasjonen. En innsynstjeneste bygger på en Web Service eksponert fra tjenesteeierens side og kan benyttes av både portalbrukere og sluttbrukersystemer via Altinn som et mellomledd. Innsynstjenester kan i TUL settes opp slik at tjenesteeier kan motta informasjon om brukere som har aktivert en innsynstjeneste. For dette kreves det at et forsendelsesoppsett settes opp i Altinn mot tjenesteeieren (ShipmentDefinition). Denne vil angi metode og overordnet mal (ShipmentOutboundTemplate) forsendelsen skal sendes på. Hver forsendelse består av den definerte malen, samt en eller flere forsendelses-deler som hver representerer en åpnet innsynstjeneste. En forsendelses-del følger et gitt format: Innsynstjeneste forsendelses-del (LookupServiceUseConfirmation) &amp;lt;LookupServiceUseConfirmation&amp;gt; &amp;lt;ServiceCode&amp;gt; &amp;lt;!--Angir innsynstjenestens tjeneste kode--&amp;gt; &amp;lt;/ServiceCode&amp;gt; &amp;lt;ServiceEdition&amp;gt; &amp;lt;!--Angir innsynstjenestens tjeneste versjon kode--&amp;gt; &amp;lt;/ServiceEdition&amp;gt; &amp;lt;ReporteeNumber&amp;gt; &amp;lt;!--Angir aktuell avgiver som aktiverer innsynstjenesten, fødselsnummer eller organisasjonsnummer--&amp;gt; &amp;lt;/ReporteeNumber&amp;gt; &amp;lt;ReadDateTime&amp;gt; &amp;lt;!--Angir dato og tid når innsynstjenesten ble aktivert--&amp;gt; &amp;lt;/ReadDateTime&amp;gt; &amp;lt;/LookupServiceUseConfirmation&amp;gt; For mer informasjon om hvordan en innsendingstjeneste tilgjengeliggjøres i portal og for sluttbrukersystemer, se TR435 Brukerdokumentasjon for tjenesteutvikling. 8.6 Samhandlingstjenester En samhandlingstjeneste er ikke som andre tjenestetyper i Altinn da oppgaven til denne er å sette sammen flere andre tjenestetyper til én logisk prosess for brukeren. Dette er uavhengig av om de underliggende tjenestetypene er rettet mot én eller flere tjenesteeiere. Et eksempel på en samhandlingstjeneste kan være Skattedialog. Her kan man ha flere underliggende innsendingstjenester, meldingstjenester og innsynstjenester ovenfor Skatteetaten som knyttes sammen til én logisk forretningsprosess. Et annet eksempel vil kunne være Navnedialog. En samhandlingstjeneste som kan knytte sammen innsendingstjenester og meldingstjenester mot flere tjenesteeiere. Samhandlingstjenester kan være definert av sluttbrukere (brukerdefinert samhandlingstjeneste – en samleside) eller av tjenesteeiere (tjenesteeierdefinert samhandlingstjeneste – en e-dialog). Den brukerdefinerte samhandlingstjenesten er predefinert i TUL av en tjenesteutvikler. Denne kan instansieres og til en viss grad tilpasses av sluttbruker i SBL. Tjenesteeiere definerer i sin helhet egne samhandlingstjenester ved hjelp av TUL. Disse blir deretter migrert til SBL i likhet med andre tjenestetyper. I integrasjonssammenheng er det de tjenesteeierdefinert samhandlingstjenestene som er interessante. En instans av en samhandlingstjeneste har en unik Case ID tilknyttet – en saks id. Når det da refereres til en instans av en samhandlingstjeneste, beskrives det ved bruk av Case ID. Følgende illustrerer mulighetsrommet for Samhandlingstjenester og en typisk kronologisk rekkefølge: TUL: 1. Definisjon av Altinn-tjenester med tjenestetype “Samhandlingstjeneste&amp;rdquo;. Definisjon av tjenestesammensetning. Tjenester som kan velges til å inngå i en samhandlingstjeneste må være av typen innsynstjeneste, meldingstjeneste eller innsendingstjeneste. Definisjon av gjenbruk av data mellom deltakende tjenester i samhandlingstjenesten. Produsent og konsument av data settes opp. Merk at kun innsendingstjenester kan settes opp som konsument. Definisjon av en tilstandsmaskin som identifiserer forretningsprosessen som et logisk sett av tilstander sammen med tilhørende presentasjon i form av dialogsider (se punkt 5). Definisjon av hendelser som kan medføre en tilstandsovergang for samhandlingstjenesten. Betingelser kan knyttes til hendelsene slik at de må oppfylles før en tilstandsovergang kan skje. Hendelsene er typisk knyttet til stadier for de underliggende tjenestene som inngår i samhandlingstjenesten. Hendelser deles inn i forhåndsdefinerte og skreddersydde hendelser. De forhåndsdefinerte hendelse trigges automatisk i Altinn og består av følgende: Hendelses Navn Tjenestetype Portal Sluttbrukersystem Etatssystem Instantiated Innsendingstjeneste, Innsynstjeneste :white_check_mark: :white_check_mark: Instantiated Innsendingstjeneste, Meldingstjeneste :white_check_mark: Submitted Innsendingstjeneste :white_check_mark: :white_check_mark: Archived Alle :white_check_mark: :white_check_mark: Opened Meldingstjeneste, Innsynstjeneste :white_check_mark: :white_check_mark: Confirmed Meldingstjeneste :white_check_mark: :white_check_mark: Tabellen viser de forhåndsdefinerte hendelsene, hvilken tjenestetype de er relatert til, samt om de trigges fra portal, sluttbrukersystem eller etatssystem. For eksempel kan etatssystem instansiere innsendingstjenester eller meldingstjenester, og dermed kun trigge hendelsen Instantiated for disse. Skreddersydde hendelser er hendelser definert av etat. Navn på disse hendelsene må defineres inn i tilstandsmaskinen (se punkt 3). Etaten kan kalle web service med hendelsen, både de forhåndsdefinerte og de skreddersydde, for å trigge en tilstandsovergang (se 8.6.1.6). Opplasting av grafikkfiler til bruk i forhåndsdefinert dialogkomponent Definisjon av dialogsider for samhandlingstjenesten basert på et sett av 6 forhåndsdefinerte maler og 10 forhåndsdefinerte dialogkomponenter. Definisjon av merknadsmaler for samhandlingstjenesten. Etaten kan ved bruk av et eksternt grensesnitt (se 8.6.1.5) sette predefinert merknad på samhandlingstjenesten eller tilhørende underliggende tjenester. Oversettelse til flere språk (engelsk, bokmål og nynorsk) for språkstøttet tekst i samhandlingstjenesten. Migrering av samhandlingstjeneste til SBL. Alle underliggende tjenesteutgaver som inngår i samhandlingstjenesten må være migrert før selve samhandlingstjenesten kan migreres. For mer informasjon om oppsett av en samhandlingstjeneste i TUL, vennligst se Brukerveiledning for TUL. SBL: Opprettelse av en sak (instansiering av en spesifikk utgave og versjon av samhandlingstjenesten definert i TUL og migrert til SBL) Presentasjon av en sak til sluttbrukeren i et arbeidsområde i SBL, modellert for å gi støtte i prosessen relatert til samhandlingstjenesten med enkel tilgang til de underliggende tjenestene. Muliggjøre for sluttbruker og sluttbrukersystemer å interagere med de underliggende tjenestene gjennom henholdsvis dialogsidene for samhandlingstjenesten eller ved hjelp av de eksterne grensesnittene. Starte en tjeneste fra tjenestekatalogen som inngår som underliggende tjeneste til en samhandlingstjeneste, og deretter bli presentert med valget om man i stedet skal starte en ny eller åpne en eksisterende samhandlingstjeneste. Forårsake tilstandsoverganger som følge av de definerte hendelsene for tilstandsmaskinen. Muliggjøre at tjenesteeierssystemer kan sende merknader til saken og underliggende forekomster av tjenesteutgavene som inngår i sakens samhandlingstjeneste. Muliggjøre at tjenesteeierssystemer kan sende hendelser til den bestemte saken, eller til alle saker for en bestemt utgave og versjon av samhandlingstjenesten, gjennom eksternt grensesnitt. Merk at en arkivert samhandlingstjeneste ikke vil være tilgjengelig i tjenesteeiers arkiv, kun i brukers arkiv. 8.6.1 Tjenester i forhold til bruk av samhandlingstjenester Nedenfor beskrives funksjonalitet for samhandlingstjenester som kan benyttes av tjenesteeiere. 8.6.1.1 Instansier en samhandlingstjeneste I de tilfellene en tjenesteeier ønsker å instansiere en samhandlingstjeneste (typisk knyttet til abonnementsinstanseriering) så kan en velge å instansiere en samhandlingstjeneste for en bruker/kunde. Tjeneste Operasjon Type CaseAgencySystem InstantiateCollaborationAgencySystem Basic/WS/EC Samtlige parametere i operasjonen unntatt visibleDateTime og dueDate må sendes inn for å få opprette en sak. visibleDateTime kan benyttes for å sette når samhandlingstjenesten vil være synlig for brukeren frem i tid, om denne ikke angis vil tjenesten være synlig umiddelbart. Funksjonelt vil InstantiateCollaborationAgencySystem returnere en referanse til instansen som ble opprettet, caseID. Denne caseID må benyttes av tjenesteeieren på andre tjenester som ønsker å kommunisere med den opprettede instansen. Skulle en time-out oppstå vil ikke samhandlingstjenesten instansieres siden tjenesten er transaksjonshåndtert. For flere detaljer rundt kontrakten vennligst se kapittel 9.10.1, Tjenestekatalog og WSDL. 8.6.1.2 Hente ut kjørende instanser av samhandlingstjenester Hvis en tjenesteeier har valgt å ikke lagre case ID fra et tidligere grensesnitt (mottatt innsendingstjeneste eller instansiert samhandlingstjeneste) og mottar oppgaver på papir, så kan den utføre oppslag mot Altinn for å finne eventuelle saker (samhandlingstjenesteinstanser). Andre tilfeller der dette kan være aktuelt er hvis en annen tjenesteeier, eller brukeren selv, har instansiert samhandlingstjenesten. Tjeneste Operasjon Type CaseAgencySystem GetCaseListAgencySystem Basic/WS/EC GetCaseListAgencySystem kan brukes til to formål: 1. Hente ut caseID, tilstand og merknad for kjørende instanser av samhandlingstjenester for bestemt fødselsnummer/organisasjonsnummer (reporteeNumber), tjeneste (externalServiceCode) og tjenesteutgave (externalServiceEditionCode). Hente ut caseID, tilstand og merknad for kjørende instanser av bestemt type samhandlingstjeneste basert på tjeneste (externalServiceCode) og tjenesteutgave (externalServiceEditionCode). Hente ut tilstand og merknad for bestemt sak basert på fødselsnummer/organisasjonsnummer (reporteeNumber) og CaseID (caseID) For punkt 1 og 2 må parametrene externalServiceCode og externalServiceEditionCode angis, mens parameter caseID må benyttes for punkt 3. Om parameter languageID ikke angis, eller forespurt språk ikke støttes vil språkavhengige returverdier returneres på tjenestens satte standardspråk. Alle andre parametere er obligatoriske og må angis. Operasjonen returnerer informasjon om samhandlingstjenestens unike identifikator, CaseID, navnet på tjenesten, CaseName, og eventuelt om det er satt noen merknader på samhandlingstjenesten ved å returnere den unike identifikatoren, NoticeTemplateID. I tillegg returneres det informasjon om samhandlingstjenestens tilstand i form av visningsvennlig navn basert på språkparameter, CurrentStateFriendlyName, unik identifikator for tilstanden, CurrentStateID, og tilstandens navn, CurrentStateName. Alle disse er definert for tjenesten i TUL. CaseID vil kunne benyttes i andre operasjoner mot Altinn, enten alene som for eksempel ved å instansiere en innsendingstjeneste som skal knyttes til samhandlingstjenesten via operasjonen SubmitAndInstantiatePrefilledFormTask (se 8.1.1 og 9.6.1), eller sammen med informasjon om tilstand til å registrere en hendelse for samhandlingstjenesten via operasjonen NotifyEventAgencySystem (se 8.6.1.6 og 9.10.3). Vennligst observer at hvis en bruker har instansiert flere forekomster av samme samhandlingstjeneste så vil ikke bare én forekomst returneres og derfor må tjenesteeieren basert på tilstand og merknad kunne identifisere den riktige instansen. Rent teknisk kan også tjenesteeiere ha opprettet flere instanser av samme tjenesteutgave om ønskelig. For flere detaljer rundt kontrakten vennligst se kapittel 9.10.2, Tjenestekatalog og WSDL. 8.6.1.3 Knytte innsendingstjeneste til sak En tjenesteeier kan forhåndsinstansiere en innsendingstjeneste for en bruker og samtidig knyttet denne til en løpende sak. Dette gjøres ved å sende med den valgfrie parameteren Case ID i operasjonskallet for operasjonen SubmitAndInstantiatePrefilledFormTask. For mer informasjon se Innsendingstjenester (8.1) og operasjonen SubmitAndInstantiatePrefilledFormTask (9.6.1). 8.6.1.4 Knytte meldingstjeneste til sak En tjenesteeier kan velge å knytte en meldingsatjeneste til en løpende sak. Dette gjøres ved at den valgfrie parameteren Case ID benyttes i operasjonskallet for meldingstjenesten. For mer informasjon se Meldingstjenester (8.2) og operasjonen InsertCorrespondenceV2 (9.4.1). 8.6.1.5 Sett merknad på sak eller underliggende tjeneste Ved å sette merknader på tjenester, kan tjenesteeier formidle informasjon til sluttbruker om samhandlingstjenester. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type CaseAgencySystem SetNoticeAgencySystem Basic/WS/EC Obligatorisk parameter reporteeElementID angir hvilken sak (Case ID), eller tilordnet tjeneste (innsendingstjeneste, meldingstjeneste, innsynstjeneste (kun arkivert)) merknaden skal settes på. Settes merknad på en tilordnet tjeneste som er arkivert (innsendingstjeneste, meldingstjeneste eller innsynstjeneste) må identifikatoren prefikses med AR. Identifikatoren for samhandlingstjenesten kan ha blitt mottatt fra InstantiateCollaborationAgencySystem, en arkivert innsendingstjeneste, eller den kan hentes ved bruk av GetCaseListAgencySystem. Alle maler (templates) for merknader må forhåndsdefineres av tjenesteeier på samhandlingstjenesten i tjenesteutviklingsløsningen og refereres til i kallet sammen med key-value par for variabler til merknaden. Mal defineres gjennom obligatorisk parameter NoticeTemplateID. Angis det feil mal eller nøkkel for samhandlingstjenesten vil feilmelding returneres. For flere detaljer rundt kontrakten vennligst se kapittel 9.10.4, Tjenestekatalog og WSDL. 8.6.1.6 Sende hendelse til sak Tjenesteeier kan påvirke tilstanden for en samhandlingstjeneste ved å registrere en ny hendelse (Event). Et eksempel hvor dette er nyttig er dersom tjenesteeier har mottatt informasjon via en annen kanal enn Altinn (f.eks. ved papirbasert innrapportering), og derfor ønsker å flytte samhandlingstjenesten til neste tilstand. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type CaseAgencySystem NotifyEventAgencySystem Basic/WS/EC Denne operasjonen tar en entitet av typen StateMachineEventNotificationBE som input. Denne inneholder som de fleste andre for samhandlingstjenester CaseID parameteren som da unikt identifiserer en samhandlingsinstans hendelsen gjelder. Alternativt kan tjenesteeier velge å heller spesifisere tjeneste og tjenesteutgave, via parametrene ExternalServiceCode og ExternalServiceEditionCode. I det tilfellet vil hendelsen internt i Altinn bli kommunisert til alle kjørende instanser for kombinasjonen av nevnte tjeneste og tjenesteutgave. Til sammenligning vil hendelser som skjer innad i Altinn-løsningen kun kommuniseres til den saken som trigget hendelsen. I de tilfellene saken er opprettet av bruker selv eller av annen tjenesteeier vil man kunne hente saks id for bestemt samhandlingstjeneste (tjeneste og tjenesteutgave) vha GetCaseListAgencySystem som beskrevet i 8.6.1.2, eller eventuelt fra en allerede innsendt innsendingstjeneste knyttet til saken. Event er obligatorisk parameter for operasjonen som angir hendelsen, mens ReporteeElementID er valgfri og benyttes kun i loggsammenheng i Altinn for å knytte hendelsen opp mot et subelement (dette kan for eksempel være en identifikator for en arkivert innsendingstjeneste tilknyttet samhandlingstjenesten). Hendelsen som skal sendes bør sees i sammenheng med tilstandsmaskinen for den aktuelle samhandlingstjenesten, og de hendelser som er definert der. Merk at en hendelse ikke nødvendigvis vil trigge en tilstandsendring; følgende vil være avgjørende: Er hendelsen aktuell for samhandlingstjenestens nåværende tilstand? og, finnes betingelser knyttet til hendelsen som ikke er oppfylt? Om 1. eller 2. blir evaluert til false vil det ikke skje en tilstandsendring. Tilstander, hendelser og eventuelle betingelser er alle definert i TUL for samhandlingstjenesten. Operasjonen returnerer en liste av StateMachineNotificationResultBE. En liste returneres om hendelsen blir sendt til flere samhandlingsinstanser basert på parametrene ExternalServiceCode og ExternalServiceEditionCode. Om hendelsen kun sendes til en samhandlingstinstans vil kun en entitet returneres. StateMachineNotificationResultBE angir identifikator for samhandlingstjenesten resultatet gjelder for (CaseID), hvorvidt det skjedde en tilstandsendring (IsStateChanged) og dens navn (CurrentStateName). I tillegg angis evt betingelse (ConditionName) og evalueringen av betingelsen (ConditionEvaluationResult). Om det skulle oppstå en feilsituasjon i tilstandsmaskinen vil parameteren HasException være angit som true. Feilinformasjon og feilkode vil da ligge i henholdsvis ExceptionDetail og ErrorCode. For flere detaljer rundt kontrakten vennligst se kapittel 9.10.2, Tjenestekatalog og WSDL. 8.6.2 Eksempler på bruk av tjenestegrensesnitt for samhandlingstjenester De påfølgende avsnittene viser eksempler på bruka av samhandlingstjenester. 8.6.2.1 Brukerinstansiert samhandlingstjeneste med én etat Dette eksempelet viser en enkel samhandlingstjeneste som er definert i TUL og som blir instansiert av brukeren. Tilstandsmaskinen består av to tilstander og det er definert gjenbruk av data mellom en meldingstjeneste og siste innsendingstjeneste. Selve kopieringen av data foregår idet innsendingstjenesten instansieres. Figur 3 - Brukerinstansiert samhandlingstjeneste med gjenbruk av data 8.6.2.2 Etatsinstansiert samhandlingstjeneste med én etat. Dette scenarioet beskriver en samhandlingstjeneste som Skattedialogen hvor etat tar initiativ og instansierer første innsendingstjeneste for brukeren. Figur 4 - Etatsinstanisert samhandlingstjeneste I forhold til forrige eksempel så er eneste forskjellen de to første kallene. Deretter fungerer systemdialogen på samme måte. I tillegg bør det nevnes at gjenbruk av data ikke kan benyttes når etaten instansierer innsendingstjeneste. Dette må i stedet løses på etatens side før innsendingstjeneste instansieres. 8.6.2.3 Brukerinstansiert samhandlingstjeneste med to etater med kanaluavhengighet I dette eksempelet så vil en bruker velge å sende inn på papir mens selve samhandlingstjenesten er blitt startet i Altinn. Figur 5 - Brukerinstansiert samhandlingstjeneste med to etater med kanaluavhengighet I dette eksempelet starter samhandlingstjenesten som i første scenario, men deretter velger en bruker å sende inn på papir. Etat 2 vil da bruke oppslagstjenesten knyttet til samhandlingstjenesten og deretter finne riktig samhandlingstjeneste. Deretter vil tilstandsmaskinen bli &amp;ldquo;oppdatert&amp;rdquo; med at oppgave er innsendt og fortsette som før. 8.7 Kvitteringer For alle forsendelser inn og ut av Altinn skapes eller oppdateres en kvittering. Kvitteringer bidrar til at tjenesteeier kan får større innsikt i livsløpet fra f.eks. opprettelse av innsending til mottak av arkivert innsendingstjeneste. Kvitteringene skaper også bedre sporbarhet i Altinn løsningen. For formidlingstjenester vil det lages en hovedkvittering for den som laster opp en fil og en underkvittering for hver mottaker av filen. Hovedkvittering med underkvittering kan på den måten brukes til å danne et komplett bilde av opplasting og nedlastinger.Dette kan også benyttes som en enkel kommunikasjonskanal ved at deltakere på forsendelsen kan oppdatere kvitteringen de har fått tildelt med en ny tekst og status. For samhandlingstjenester vil det ikke bli generert kvitteringer da disse ikke arkiveres til tjenesteeiers arkiv. Frittstående varsel vil heller ikke generere kvitteringer. For innsynstjenester vil tjenesteeier kunne motta kvittering for bruk av tjenesten og arkivering av tjenesten. Tjenesteutvikler vil kunne velge om det skal sendes kvittering i disse to tilfellene. For å muliggjøre dette kreves det at tjenesteeier markerer sine forsendelser inn til Altinn med referanser som lagres på kvitteringen. Samme referanse benyttes ved oppslag/kvittering. Eksempler a) Ved satsvis innsending av abonnementsdata benyttes xml elementet ServiceOwner/Subscription/ExternalShipmentReference for angivelse av referanse. b) Ved sanntid overføring av abonnementsdata benyttes parameteren externalBatchId i web service metoden SubmitSubscription for angivelse av referanse. Se xsd referanse for aktuell dataoverføring i kapittelet om Grensesnitt – batch til Altinn, for detaljer om plassering av referanse ved satsvis overføring. For overføring i sanntid henvises det til den aktuelle web service i kapittelet om Grensesnitt – web services. Mulige kvitteringsoperasjoner: - Hente kvitteringer for innsendte data - Kvittere for mottak av data - Hente lister med kvitteringer Kvitteringsinformasjon kan kun hentes i sanntid. For å søke opp kvitteringer brukes GetReceiptList. Har mann SendersReference evt ExternalShipmentReference vil dette spisse søket. De fleste referanser vil fungere i søkefunksjonaliteten. For flere detaljer rundt kontrakten for GetReceipt, GetReceiptList og SaveReceipt vennligst se henholdsvis kapittel 9.3.1, 9.3.2 og 9.3.3, Tjenestekatalog og WSDL. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type Receipt GetReceipt Basic/WS/EC Receipt GetReceiptList Basic/WS/EC Receipt UpdateReceipt Basic/WS/EC 8.8 Frittstående varsel Tjenesteeier kan velge å sende frittstående varsler til personbrukere og enheter i Altinn. Dette er varsler som kan sendes til fødselsnummer eller organisasjonsnummer uten at varselet trenger å være tilknyttet en meldingstjeneste, prefill, eller utsendelse av PIN. Tjeneste Operasjon Type NotificationAgencyExternal SendStandaloneNotification Basic/WS/EC NotificationAgencyExternal SendStandaloneNotificationV2 Basic/WS/EC NotificationAgencyExternal SendStandaloneNotificationV3 Basic/WS/EC Operasjonen SendStandaloneNotification benyttes for å sende de frittstående varslene. Denne operasjonen kan sende et konfigurerbart antall varsler til forskjellige brukere. For å gjøre dette benyttes parameteren standaloneNotifications som kan inneholde flere StandaloneNotification (en per varsel). For hvert varsel må følgende angis: ReporteeNumber angir fødselsnummer eller organisasjonsnummer varselet skal sendes til, den kan brukes til å slå opp mottakeradresse for varselet i brukerens kontaktprofil (privat samtykke) i tilfelle fødselsnummer, eller angitte kontaktpersoner på enhetsprofilen i tilfelle organisasjonsnummer. Service med parameterene ServiceCode og ServiceEdition fungerer som et filter på ReporteeNumber for organisasjonsnummer. Dersom disse er angitt vil varsel opprettes for de kontaktpersoner på enhetsprofilen som har satt opp at de vil motta varsel for den angitte tjenesten eller har satt opp at de vil motta alle varsler for organisasjonen, dersom de er autorisert mede lesetilgang for tjenesten for organisasjonen. ReceiverEndPoints benyttes til å angi en eller flere måter varselet skal sendes på (TransportType), SMS eller Email. Eventuelt kan også ReceiverAddress benyttes til å definere hvor det skal sendes, typisk da e-post adresse eller mobiltelefonnummer. Om ikke denne angis vil Altinn benytte ReporteeNumber og se etter kontaktinformasjon i brukerens eller enhetens profil. LanguageID og NotificationType vil sammen definere hvilken mal som skal benyttes for varselet. Denne må være forhåndsdefinert i databasen. TextTokens med parameteren TokenValue kan benyttes hvis valgt mal har substitusjoner definert. Substitusjoner blir gjort basert på rekkefølgen TokenValue blir angitt i forespørselen. Substitusjonene som varselsmalen har må begynne på 0 og fortsette oppover. Parameteren TokenNum har for tiden ingen funksjon og kan utelates. FromAddress strengen angir fra adresse når transport type er e-post (må være på gyldig e-post format). Denne er valgfri, og hvis ikke angitt vil det for e-post varsler bli brukt en standard Altinn e-post adresse. ShipmentDateTime parameteren kan benyttes hvis varselet ønskes sendt på et senere tidspunkt, hvis ikke angis vil varselet sendes umiddelbart. SendStandaloneNotification tjenesten fantes i to tidligere versjon i tillegg til nyeste versjon (Versjon 3), hvorav: Versjon 1; Operasjonen returnerer ingen verdi, kun feilmeldinger. Versjon 2; Operasjonen returnerer en streng med mottakere som var reservert mot varsel, med enten en «varsel feilet» eller «varsel feilet delvis» melding. Varsel vil ses på som feilet dersom alle mottakkere var reservert og delvis feilet dersom noen, men ikke alle, mottakkere var reservert mot varsel. Versjon 3; Operasjonen returnerer et resultat-objekt SendStandAloneNotificationResult som inneholder samme return melding som fra Versjon 2, og en liste med resultater for de varsler som ble levert. I disse resultatene er følgende angitt: - NotificationType inneholder NotificationType fra det originale varselet som ble levert. Brukes til å identifisere hvilket levert varsel resultatet tilhører. ReporteeNumber inneholder ReporteeNumber fra det originale varselet som ble levert. Brukes til å identifisere hvilket levert varsel resultatet tilhører. EndPoints er en liste med mottakere som mottok varsel. Hvert mottakker objekt inneholder følgende verdier: Name er navn på mottaker der dette er tilgjengelig. ReceiverAddress er addressen varselet vil leveres til. TransportType er hva slags transport varsel levers på. RetrieveFromProfile beskriver om mottakker ble hentet fra en organisasjon eller brukers profil. For flere detaljer rundt kontrakten vennligst se kapittel 9.11.1, Tjenestekatalog og WSDL. 8.9 Autorisasjonsfunksjonalitet for tjenesteeiere Altinn 2 versjon 2 tilbyr at eksterne løsninger kan benytte Altinn som autorisasjons komponent. Dette betyr at eksterne system kan definere eksterne ressurser og regler tilknyttet disse. Deretter kan eksterne systemer verifisere at bruker har tilgang til ressurs. Tjenestene kan aksesseres fra tjenesteeierssystem fra gyldig ip-adresse. Verifiseringstjenesten kan også benyttes til å autentisere en brukers tilgang til tjenesteeiers tjenester. Denne typen verifisering benytter de autorisasjonsregler som er definert på tjenesten i TUL. 8.9.1 Importere eksterne regler Tjenesteeiere har mulighet til å importere eksterne ressurser og regler som senere kan benyttes eksternt til å avgjøre tilgang ved hjelp av tilgangsmekanismenen i Altinn. Tjeneste Operasjon Type AdministrationExternal ImportAuthorizationPolicy WS ImportAuthorizationPolicy er operasjonen som tjenesteeiers system kan benytte for å importere de eksterne policyene. Operasjonen tar en XML streng som input parameter. Denne XML strengen må følge det standardiserte formatet XACML For flere detaljer rundt kontrakten vennligst se kapittel 9.8.1, Tjenestekatalog og WSDL. 8.9.2 Ekstern autorisasjon Tjenesteeierne har etter å ha importert eksterne regler muligheten for å gjøre kall mot Altinn for å benytte Altinns autorisasjonskomponent for autorisasjonsavgjørelser. Altinn vil motta forespørsel og ta en avgjørelse basert på de eksterne reglene og ressursene som er lagt inn. Regler som er satt i TUL på en tjeneste er også tilgjengelig for tilsvarende verifisering for å sjekke en brukers tilgang til tjenesten. AuthorizationDecisionPointExternal er tjenesten i Altinn II som har ansvaret for alle avgjørelser rundt autorisasjon basert på regler og roller i Altinns autorisasjonskomponent. Operasjonen AuthorizeAccessExternal tar imot en forespørsel på XACML format. Tjeneste Operasjon Type AuthorizationDecisionPointExternal AuthorizeAccessExternal WS For flere detaljer rundt kontrakten vennligst se kapittel 9.9.1, Tjenestekatalog og WSDL. 8.9.3 Hente roller GetRoles er tjenesten i Altinn II som tjenesteeiere kan bruke til å hente ut roller etter angitte søkekriterier i søkeobjektet. Tjeneste Operasjon Type AdministrationExternal GetRoles WS For flere detaljer rundt kontrakten vennligst se kapittel 9.8.2, Tjenestekatalog og WSDL. 8.10 Uthenting av tiltrodd tredjeparts logg Tjenesteeiere vil ha muligheten til å hente ut logg over alle hendelser for innsendte innsendingstjenester. Tjeneste Operasjon Type TTPArchiveAgencyExternalBasic GetAuditTrailBasic Basic Operasjonen GetAuditTrailBasic benytter enten parameteren ReporteeNumber eller Username for å identifisere for hvilken bruker eller organisasjon det skal hentes ut for. Reportee parameteren kan da enten være et fødselsnummer eller et organisasjonsnummer, avhengig av hva man ønsker. Parameter Username brukes når man vil angi hente basert på brukervalgt brukernavn. Videre må parametrene FromDate og ToDate benyttes for å begrense søket – begge er obligatoriske. For å snevre søket ytterligere kan eventuelt parametrene ExternalServiceCode og ExternalServiceEditionCode benyttes. Operasjonen vil returnere en eller flere elementer (TTPElementBE) som angir den interne ReporteeElementID’en, resultat av integritetssjekk (IntegrirtyCheck), samt et XML element (TTPData) som vil inneholde log dataen som er registrert for den aktuelle innsendingen. For flere detaljer rundt kontrakten vennligst se kapittel 9.12.1, Tjenestekatalog og WSDL. 8.11 Sluttbrukers meldingsboks En sluttbruker som logger inn i Altinn, vil kunne se en liste med sine tjenesteelementer på siden Min meldingsboks. Det er mange muligheter for å filtrere innholdet i listen, og hvert element kan åpnes på en separat side. En tjenesteeier har mulighet til å presentere innholdet i sluttbrukers meldingsboks i sin egen portal/selvbetjeningsløsning. Forutsetningen er at sluttbrukeren er autentisert og føderert fra IDPorten. Uthenting av sluttbrukers meldingsboks fra Altinn kan være aktuelt for tjenesteeiere som ønsker å tilby et &amp;ldquo;min side&amp;rdquo;-konsept i sin egen løsning, uten å synliggjøre at tjenestene er implementert i Altinn. 8.11.1 Presenter innhold i sluttbrukers meldingsboks – Altinn API For detaljer om hvordan innhold i sluttbrukers meldingsboks i Altinn kan presenteres i tjenesteeieres egen selvbetjeningsløsning/portal henvises det til detaljert informasjon om Altinn API som finnes på Altinnett:https://altinnett.brreg.no/Altinn-API 8.12 Tjenesteeierstyrt rettighetsregister Tjenesteeierstyrt rettighetsregister er innført som en ytterligere mulighet for tjenesteeiere å spesifisere hvem som skal ha tilgang til ulike tjenester i Altinn. Registeret vil kunne benyttes på toppen av eksisterende rolle- og rettighetsfunksjonalitet. Registeret benyttes foreløpig kun for formidlingstjenester. Bruk av registeret vil introdusere en ekstra sjekk på hvorvidt en konkret bruker har mottatt nødvendige rettigheter av tjenesteeieren til å benytte seg av en spesifikk tjeneste. Informasjon som legges inn i registeret er nøkkelinformasjon om brukeren, tjenestekoder, og rettighet. Konkret funksjonalitet og effekt av operasjoner i registeret vil være avhengig av tjenestetype. Registeret i Altinn tilbyr 3 operasjoner for å hente ut, legge til og slette regler. GetRights operasjonen vil returnere hvilke regler som ligger i registeret, AddRights og DeleteRights er operasjoner for å henholdsvis legge til nye og slette eksisterende regler. Begge de to sistnevnte operasjonen vil returnere en liste med reglene som kom inn sammen med en status for resultatet av endringen for hver regel. Operasjonen er beskrevet i mer detalj i kapittel 9.17.1, 9.17.2 og 9.17.3. Tjenester og tjenesteoperasjoner som inngår i beskrevet funksjonalitet: Tjeneste Operasjon Type RegisterSSRAgencyExternal GetRights Basic/WS/EC RegisterSSRAgencyExternal AddRights Basic/WS/EC RegisterSSRAgencyExternal DeleteRights Basic/WS/EC 8.13 BatchLogging Tjenesteeiere som har levert inn data filer-til behandling har mulighet til å sjekke status og historikk ved å bruke BatchLogging tjenesten i Intermediary. Tjeneste Operasjon Type BatchLoggingAgencyExternal GetStatusOverview Basic/WS/EC BatchLoggingAgencyExternal GetDetailedStatus Basic/WS/EC BatchLoggingAgencyExternal GetDataItem Basic/WS/EC Status henting er delt opp i 3 nivåer. GetStatusOverview henter ut en liste med alle DataBatcher (en levert fil er en DataBatch) som er behandlet basert på søke-kriteria som Tjenesteeier leverer. Denne listen inneholder metadata for filen, og antall feil som er opplevd under behandling av filen. GetDetailedStatus henter ut tre lister. Listen med DataBatcher som er blitt behandlet, en liste med de DataItems (Xml objektene som filen består av) som har opplevd feil under behandling og en liste med Issues som er opplevd under behandling. Et Issue refererer til DataItem og DataBatch med en Id verdier, som kan brukes til å referere mellom listene. DataItem listen vil ikke inneholde rå Xml-data. GetDataItem henter ut et enkelt DataItem basert på Id. DataItem inneholder metadata og rå Xml-data. 9 Grensesnitt – web services Her følger et uttrekk over hvilke web services som tilbys i Altinn. Tjenestene er beskrevet uavhengig av hvilken autentiseringsmetode den enkelte tjenesteeier ønsker å benytte. Se avsnitt om Autentisering og autorisering, for informasjon om metodenavn. For ytterligere informasjon for web services henvises leser også til Tjenestekatalogen og de enkelte tekniske spesifikasjoner tilgjengelig som WSDL’er fra respektive endepunkt. Se Vedlegg A: Feilkoder i Altinn for en liste over mulige feilkoder i Altinn. 9.1 ArchiveCommon Tjenesten ArchiveCommon inneholder operasjoner for uthenting av arkivdata fra tjenesteeiers arkiv. Påfølgende kapittel beskriver tjenesteoperasjonen for denne arkivtjenesten. 9.1.1 GetServiceOwnerArchiveReporteeElementsV2 Denne operasjonen benyttes for å hente ut data for en gitt avgiver (privatperson eller foretak) fra en tjenesteeiers arkiv. Data kan være skjemasett arkivert i nåværende eller tidligere versjoner av Altinn, eller meldinger sendt fra tjenesteeier til avgiver. Merk at siden samhandlingstjenester og innsynstjenester ikke arkiveres til tjenesteeiers arkiv vil de ikke kunne hentes ut på denne måten. Kun elementer som innlogget bruker har tilgang til returneres, typisk ikke elementer for tjenester tilknyttet andre tjenesteeiere. Det er for eksempel nødvendig å kunne ha direkte tilgang til disse dataene i tilfeller hvor tjenesteeier ønsker å veilede en avgiver i sanntid basert på avgivers arkiverte data. Tjenesteeier får rutinemessig tilsendt alle arkiverte elementer for alle avgivere via batch-grensesnittet Innsendingstjenester. Operasjonen er versjonert, gjeldende versjon er V2. Tabellen under beskriver datakontrakten for operasjonen: Input Beskrivelse SearchServiceOwnerArchive Objektet av typen ExternalSOASearchBE, som inneholder søkeparametre for uthenting av elementer fra tjenesteeiers arkiv. languageID Språk id: 1033 Engelsk 1044 Bokmål 2068 Nynorsk. Språk angitt på arkivert element benyttes uavhengig av hva som settes. Returverdi Beskrivelse ServiceOwnerArchiveReporteeElementList Liste med objektet av typen ServiceOwnerArchiveReporteeElementBEV2, som inneholder elementer fra tjenesteeiers arkiv som tilfredsstiller angitte søkeparametre. Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten. ExternalSOASearchBE Property Beskrivelse SSNOrOrgNumber Fødselsnummer eller organisasjonsnummer ReferenceId Unik referanse id Subject Hvilket emne søket gjelder DateFrom Fra dato i arkivet DateTo Til dato i arkivet CaseID Identifikator for samhandlingstjeneste elementet skal tilhøre UserName Søk basert på brukernavn ServiceOwnerArchiveReporteeElementBEV2 Property Beskrivelse Subject Emne for elementet IsSubjectMessageTitle Angir om tittel er satt av MessageTitle LastChangedDate Dato for siste endring DatReporteeId Intern id SSNOrOrganizationNumber Fødselsnummer eller organisasjonsnummer tilknyttet arkivert element ReporteeName Navn på avgiver som eier arkivert element ReporteeElementId Intern id Altinn1ArchiveUnitId Intern id fra AltinnI arkivet. Kan være tomt Altinn1AMReference AM referansen fra AltinnI arkivet. Kan være tomt Altinn1FormCode Skjemanummer fra AltinnI arkivet. Kan være tomt EndUserSystemId Id for sluttbrukersystem. Kan være tomt SendComplete Hvorvidt forsendelsen er komplett eller ikke for elementet. Kan være tomt ElementType Element type: Archive, Active, Correspondence, ArchiveCorrespondence, LookUp, Collaboration IsAltinn1 Flagg som indikerer om elementet eksisterer i AltinnI IsCorrespondenceConfirmationRequired Hvorvidt meldingsbekreftelse er påkrevd eller ikke ArchiveReference Referansen fra Altinn arkivet. SystemTypeName Typenavn på sluttbrukersystem. Kan være tomt ExpiryDate Angir eventuelt når elementet er planlagt slettet 9.2 ServiceOwnerArchive Tjenesten ServiceOwnerArchive inneholder operasjoner for uthenting av elementer fra tjenesteeiers arkiv (ikke tilgang til arkiverte elementer fra tidligere versjoner av Altinn). Påfølgende kapitler beskriver operasjonen for denne tjenesten. 9.2.1 GetArchivedFormTaskV2 Denne operasjonen benyttes for å hente ut alle skjemaer og vedlegg som tilhører et gitt skjemasett. Operasjonen er versjonert, gjeldende versjon er V2. Tabellen under beskriver datakontrakten for operasjonen: Input Beskrivelse reporteeElementId Unik identifikator for skjemasettet som skal hentes. Identifikatoren er obligatorisk input til tjenesten languageID Språk kode: 1033 Engelsk, 1044 Bokmål, 2068 Nynorsk Returverdi Beskrivelse ArchivedFormTask Objektet av typen ArchivedFormTaskBEV2 som skjemasettet som tilfredsstilte det gitte søkekriteriet. Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten. ArchivedFormTaskBEV2 Property Beskrivelse reporteeElementId Unik identifikator for skjemasettet. LastChanged Tidspunkt for når det sist ble gjort endringer på skjemasettet ReporteeID Intern id. ArchivedDateTime Tidspunkt for når skjemasettet ble arkivert ServiceOwner Unik identifikator for tjenesteeier for skjemasettet InvoiceInformation Eventuell betalingsinformasjon som er vedlagt skjemasettet ArchivedFormList Liste med ArchivedFormBE-objekter (nærmere beskrevet nedenfor), som inneholder alle skjemaene i skjemasettet ExternalServiceCode Tjenestekode ExternalServiceEditionCode Tjenesteutgavekode ssnOrgNumber Fødselsnummer eller organisasjonsnummer tilhørende skjemasettet PasswordEncryptedSymmetricKey Passordkryptert symmetrisk nøkkel for å dekryptere eventuell sensitive felter SOEncryptedSymmetricdKey Samme symmetriske nøkkel som over, men kryptert med tjenesteeiers sertifikat. Tjenesteeier kan da bruke privat nøkkel til å dekryptere denne nøkkelen ArchiveTaskList Liste med arkiv-objekter av typen ArchiveTaskBEV2 ArchivedFormBE Property Beskrivelse FormID Intern id FormName Navn på skjema FormDataXML Innhold i skjema. Må legges i en CDATA blokk ParentReference Referanse til hovedskjema. Denne referansen er kun satt dersom gjeldende skjema er et underskjema FormPresentationFieldValue Presentasjonsfelt for skjemaet, dersom dette finnes. PaymentInformationE2B Betalingsinformasjon på E2B-format PaymentInformationHTML Betalingsinformasjon på XML-format DataFormatId Id til skjema fra metadata kilde DataFormatVersion Betalingsinformasjon vedlagt skjema FormPaymentInfo Skjemabeskrivelse ArchivedAttachmentBEV2 Property Beskrivelse AttachmentID Intern Id AttachmentFunctionType Angir hvilken funksjonstype vedlegget utgjør: Invoice, Unspecified AttachmentName Navn på vedlegg MimeTypeName Angir MIME-typen for vedlegget: application_none, application_pdf, application_msword, application_vnd_ms_excel, application_vns_oasis_opendocument_text, application_vnd_oasis_opendocument_presentation, application_vnd_oasis_opendocument_spreadsheet, application_rtf, application_vnd_ms_powerpoint, application_postscript, application_zip, text_plain, text_html, text_xml, text_rtf, text_richtext, binary_octet_stream, not_Applicable CreatedByUserID Intern Altinn identifikator på bruker som har lagt til vedlegget CreatedDateTime Dato for når vedlegget ble opprettet IsAddedAfterFormFillin Angir om vedlegget ble lagt til i løpet av signeringen (etter utfylling) IsEncrypted Angir om vedlegget er kryptert ArchivedFormTaskSigningStepBEV2 Property Beskrivelse SignatureID Intern Id SignedByUser Intern id bruker som har signert skjemasettet SignedByUserSSN Fødselsnummer til bruker som har signert SignedByUserName Navn på bruker som har signert skjemasettet. CreatedDateTime Dato og tidspunkt for når skjemasettet ble signert Signature Signaturen, binært format SignatureText Signeringsteksten RequiresGroupSigning Angir om signatur gjelder for alle elementer i skjemasettet AuthenticationLevelID Intern id for autentiseringsnivået for bruker når signering ble gjort AuthenticationMethod Autentiseringsnivået for bruker når signering ble gjort CertificateIssuedByName Navnet sertifikatet er utstedt til CertificateIssuedForName Navnet signaturen er utstedt til CertificateValidFrom Tidspunkt (dato og klokkeslett) for når sertifikatet er gyldig CertificateValidTo Tidspunkt (dato og klokkeslett) for når sertifikatet blir ugyldig SignedAttachmentList Liste over signerte vedlegg. SignedFromList Liste over signerte skjemaer IsSigningAllRequired Angir om signering er utført for alle elementer i skjemasett: YES – signering på alle skjema, NO – valgfri signering på skjema, SET_PER_FORM – valg for signering satt på skjema nivå ProcessStepID Den unike identifikatoren for steget signaturen gjelder for ArchiveTaskBEV2 Property Beskrivelse EndUserSystemID Sluttbrukersystem identifikator LastChanged Angir dato for sist endring NumberOfSignaturesAdded Antall signaturer som er lagt til ProcessStepID_FK Intern ID for prosessteg SentComplete Angir om element ble sent som komplett fra sluttbrukersystem TaskID Identifikator for elementet, samme som ReporteeElementID UserDefinedNumberOfSignaturesRequired Antall signaturer krevd for et evt brukerstyrt signeringssteg WorkflowReference Intern ID forarbeidsflyt 9.2.2 GetArchiveShipmentStatusV2 Denne operasjonen benyttes for å hente ut status på oversending fra Altinn til Tjenesteeier for et arkivert skjema. Man kan hente ut status ved å bruke enten ArchiveReference eller ServiceReference. Disse kan ikke brukes samtidig. Operasjonen er versjonert, gjeldende versjon er V2. Tabellen under beskriver datakontrakten for operasjonen: Input Beskrivelse ArchiveReference (string) Tar inn en ArkivReferanse for et arkivert element. Når dette elementet er brukt skal ikke ServiceReference brukes. ServiceReference (objekt) Inneholder en liste med ArchiveShipmentStatusExternalV2 objekter. Hvert objekt representerer et elementen som ble funnet av tjenesten, og har en egen liste over statuser registrert på elementet. ServiceReference ServiceCode Unik identifikator. Dette er en mandatory parameter når man bruker ServiceReference til å hente ut status data. ServiceEditionCode Unik identifikator. Dette er en mandatory parameter når man bruker ServiceReference til å hente ut status data. Unik identifikator. Dette er en mandatory parameter når man bruker ServiceReference til å hente ut status data. DateFrom Definerer dato og tidspunkt tjenesten skal hente ut status data fra. DateTo Definerer dato og tidspunkt tjenesten skal hente ut status data til ArchiveShipmentStatusExternalBEV2List LimitReached Når dette flagget er satt ble det funnet flere arkiverte elementer enn det som det er returnert statuser for ArchiveShipmentStatusList Liste over de returnerte arkiv elementene som en liste av ArchiveShipmentStatusExternalV2-entiteter ArchiveShipmentStatusExternalV2 ArchiveReference Unik arkiv referanse TimeOfArchiving Tidspunkt for arkivering ServiceCode Tjenestekode ServiceEditionCode Tjeneste utgave kode ShipmentStatusLog Liste over arkiv elementets status endringer som en liste av ShipmentStatusLogEntry-entiteter. ShipmentStatusLogEntry ShipmentDescription En beskrivelse av Shipment relatert til statusen, som inneholder navnet på ShipmentDefinition og TransportSekvensNummeret for shipmentet til tjenesteeier. Disse blir adskilt med et pipe-tegn ShipmentStatus En beskrivelse av Shipment relatert til statusen, som inneholder navnet på ShipmentDefinition og TransportSekvensNummeret for shipmentet til tjenesteeier. Disse blir adskilt med et pipe-tegn ShipmentStatus ShipmentStatus for arkiv elementet. Kan være: NotSet - Elementet er ikke gjort klar til oversendelse. NotSent – Elementet er ikke sendt til tjenesteeier. Sent – Element er sent til tjenesteeier. Error – Overførsel til tjenesteeier feilet. Correlated – Correspondence er opprettet som er knyttet til denne ArkivReferansen ShipmentStatusDateTime Dato og klokkeslett for når statusen ble satt på arkiv elementet 9.2.3 GetAttachmentDataStreamed Denne operasjonen benyttes for å hente ut data for ett gitt vedlegg in den tilfelle vedlegg er større en 30MB. GetArchivedFormTaskV2 må kalles for å få detailene om den binær filen returnerte av denne metoden. Tabellen under beskriver datakontrakten for operasjonen. Input Beskrivelse AttachmentID Unik identifikator for et vedlegg Returverdi Beskrivelse Attachment Stream som inneholder et binært vedlegg 9.3 Receipt Tjenesten Receipt inneholder operasjoner for å oppdatere og hente kvitteringer i Altinn. Påfølgende kapitler beskriver tjenesteoperasjonene for denne tjenesten. 9.3.1 GetReceiptV2 Denne operasjonen henter en kvittering basert på enten unik identifikator for kvitteringen eller en referanse for kvitteringen. Kvitteringen kan være knyttet til et skjemasett innsendt via Altinn fra sluttbruker eller sluttbrukersystem, data sendt fra tjenesteeier til Altinn (meldinger, PIN-koder, abonnement eller prefilldata) eller data sendt fra Altinn til tjenesteeier. Navnet på operasjonen kan variere noe fra grensesnitt til grensesnitt. Operasjonen heter for eksempel GetReceiptBasicV2 på basic (SOAP 1.1) grensesnittet. En eldre versjon av operasjonen med navn GetReceipt finnes fortsatt, men kan i fremtiden bli fjernet. Se aliasoversikt (9.19) for informasjon om endepunkter. Tabellen under beskriver datakontrakten for operasjonen: Input Beskrivelse ReceiptSearch Objekt av typen ReceiptSearch som inneholder nødvendige søkeparametre for å hente ut en kvittering Returverdi Beskrivelse Receipt Objekt av typen Receipt som inneholder alle data for en kvittering som tilfredsstilte det gitte søkekriteriet Tabellen under gir en nærmere beskrivelse av objektene som inngår i datakontrakten. Property Beskrivelse ReceiptSearch ReceiptId Unik identifikator en kvittering i Altinn References Liste med referansen som skal brukes i søket. I praksis er det kun en referanse som benyttes i søket. Følgende referansetyper kan benyttes i søk: ArchiveReference, OutboundShipmentReference, BatchReference,EndUserSystemReference, ExternalShipmentReference, SendersReference Receipt ReceiptId Unik identifikator kvitteringen i Altinn. ReceiptText Tekst i kvitteringen ReceiptHistory Når en kvittering oppdateres så vil den gamle kvitteringsteksten flyttes og legges til øverst i denne historikken LastChanged Dato og tidspunkt for når kvitteringen sist ble endret (yyyy-MM-ddThh:mm:ss) ReceiptType Angir hva kvittering gjelder. Mulige verdier: NotSet – Brukes når type er ukjent, FormTask – Skjemasett innsending, Correspondence – Innlesning av meldinger, PINCODE –bestilling av PIN-koder, Subscription – Innelsning av abonnementer, Outbound – Forsendelse sendt fra Altinn, PreFill – Innlesning av prefill, RegisterDLS – DLS registerdata, RegisterDSF – DSF registerdata, RegisterER – ER registerdata, RegisterDSFProperty, RegisterDSFStreet, RegisterDSFCountry, RegisterDSFUser, LookUp – Innsynstjeneste, RegisterDSFStreetAdd, RegisterDSFPropertyAdd, BrokerService – Overføring av fil på en Formidlingstjeneste "
},
{
	"uri": "https://altinn.github.io/docs/api/meldinger/hente/",
	"title": "Hente meldinger",
	"tags": [],
	"description": "",
	"content": "1. Hent ut liste med meldinger og finn lenker Det sentrale elementet som tilgjengeliggjøres i APIet er Message. Den representerer et element i sluttbrukerens meldingsboks i Altinn og kan være av typen FormTask og Correspondence og ha ulik status alt etter hvilken tilstand elementet er i. Ved å gå til rot-ressursen https://www.altinn.no/api/my/messages/ er det mulig å navigere seg fram til elementene i brukerens meldingsboks. Send følgende GET-forespørsel mot APIet, og du vil få returnert brukerens innhold i meldingsboksen (resultatet er begrenset til de 50 første elementene, se punkt 7 under for informasjon om hvordan du får fram de 50 neste). GET https://www.altinn.no/api/my/messages HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Ved korrekt autentisering vil du få følgende svar fra APIet: { &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages&amp;quot; }, &amp;quot;find&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/{MessageId}&amp;quot;, &amp;quot;isTemplated&amp;quot;: true } }, &amp;quot;_embedded&amp;quot;: { &amp;quot;messages&amp;quot;: [ { &amp;quot;MessageId&amp;quot;: &amp;quot;a385107&amp;quot;, &amp;quot;Subject&amp;quot;: &amp;quot;Vedr. saksnr 201301840, journalnr 2013021622 &amp;quot;, &amp;quot;Status&amp;quot;: &amp;quot;Ulest&amp;quot;, &amp;quot;LastChangedDateTime&amp;quot;: &amp;quot;2013-11-11T13:41:01.703&amp;quot;, &amp;quot;LastChangedBy&amp;quot;: &amp;quot;Kommunene&amp;quot;, &amp;quot;ServiceOwner&amp;quot;: &amp;quot;Kommunene&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;Correspondence&amp;quot;, &amp;quot;MessageSender&amp;quot;: &amp;quot;Brønnøy Kommune&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;2479&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 2, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a385107&amp;quot; }, &amp;quot;metadata&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/correspondence/2479/2&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/Pages....&amp;quot; } }, { &amp;quot;MessageId&amp;quot;: &amp;quot;a385103&amp;quot;, &amp;quot;Subject&amp;quot;: &amp;quot;Søknad om tilskudd til lokale samlivskurs&amp;quot;, &amp;quot;Status&amp;quot;: &amp;quot;Utfylling&amp;quot;, &amp;quot;LastChangedDateTime&amp;quot;: &amp;quot;2013-11-11T13:39:22.817&amp;quot;, &amp;quot;LastChangedBy&amp;quot;: &amp;quot;HÅKON TRANA&amp;quot;, &amp;quot;ServiceOwner&amp;quot;: &amp;quot;Barne-, ungdoms- og familiedirektoratet&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;3606&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 130731, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a385103&amp;quot; }, &amp;quot;print&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a385103/print&amp;quot;, &amp;quot;mime-type&amp;quot;: &amp;quot;application/pdf&amp;quot; }, &amp;quot;metadata&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/3606/130731&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/Pages.....&amp;quot; } } }, { &amp;quot;MessageId&amp;quot;: &amp;quot;a382871&amp;quot;, &amp;quot;Subject&amp;quot;: &amp;quot;RF-1015 Lønns- og trekkopplysninger for 2012&amp;quot;, &amp;quot;Status&amp;quot;: &amp;quot;Utfylling&amp;quot;, &amp;quot;LastChangedDateTime&amp;quot;: &amp;quot;2013-11-11T13:37:48.093&amp;quot;, &amp;quot;LastChangedBy&amp;quot;: &amp;quot;HÅKON TRANA&amp;quot;, &amp;quot;ServiceOwner&amp;quot;: &amp;quot;Skatteetaten&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;2802&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 2203, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a382871&amp;quot; }, &amp;quot;print&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a382871/print&amp;quot;, &amp;quot;mime-type&amp;quot;: &amp;quot;application/pdf&amp;quot; }, &amp;quot;metadata&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/2802/2203&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/Pages......&amp;quot; } } ] } } Message av typen FormTask En message med type FormTask representerer en innsendingstjeneste (skjema) som ligger i sluttbrukers meldingsboks. Status parameteren angir hvilken tilstand skjemaet har (&amp;ldquo;Utfylling&amp;rdquo;, &amp;ldquo;Signering&amp;rdquo;, &amp;ldquo;Sendt og arkivert&amp;rdquo;). Message av typen Correspondence En message med type Correspondence representerer en meldingstjeneste (melding fra etat til bruker) som ligger i sluttbrukers meldingsboks. Status parameteren angir hvilken tilstand meldingen har (&amp;ldquo;Ulest&amp;rdquo;, &amp;ldquo;Lest&amp;rdquo;, &amp;ldquo;Arkivert&amp;rdquo;). Lenker Hvert enkelt message-element inneholder en hash tabell &amp;ldquo;_links&amp;rdquo; som inneholder lenker til beslektede elementer. Det er viktig at din applikasjon aktivt bruker disse lenkene, og ikke hardkoder en rekke URL-er i applikasjonen. &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a382871&amp;quot; }, &amp;quot;print&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a382871/print&amp;quot;, &amp;quot;mime-type&amp;quot;: &amp;quot;application/pdf&amp;quot; } &amp;quot;metadata&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/2802/2203&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/Pages......&amp;quot; } } Feltene i _links betyr følgende: self - URI til representasjon av den enkelte meldingen. print - URI til utskriftsversjonen av et arkivert skjema eller et skjema under utfylling. Er kun gyldig for message elementer av typen FormTask. For print relasjoner er &amp;ldquo;mime-type&amp;rdquo; i de fleste tilfeller &amp;ldquo;application/pdf&amp;rdquo; men vil i noen tilfeller også være &amp;ldquo;application/text-html&amp;rdquo;. metadata - URI til metadata ressurs for den aktuelle meldingen. portalview - URI til portalpresentasjonen av meldingen. Ved å følge lenken får brukeren opp Altinns presentasjon av elementet i portalen. I portalen vil ressursen vises i den status den befinner seg i (Utfylling, Signering, Arkivert). _links kan bli utvidet med ytterligere relasjoner i fremtidige oppdateringer av APIet. 2. Hent ut liste med enheter brukeren kan representere &amp;ldquo;Reportee&amp;rdquo; representerer en avgiver den påloggede brukeren har rettighet til å representere. Ved å gå til rot-ressursen https://www.altinn.no/api/reportees/ er det mulig å få en liste over alle avgivere en pålogget bruker kan representere og derfra navigere seg fram til en liste over elementene i avgiverens meldingsboks. Avgivere kan være andre personer (type=person) eller organisasjoner (type=organization) brukeren har rettighet til å representere. For avgivere av typen organization indikerer status parameteren om organisasjonen er slettet eller fremdeles aktiv. Parameteren ReporteeID angir en unik id for aktuell avgiver, denne IDn kan benyttes i {my} parameteren i URL strukturen i APIet til å angi hvilken avgiver som operasjonen mot APIet utføres for. Eks. https://www.altinn.no/api/{reporteeID}/messages/. Send følgende GET-forespørsel mot APIet, og du vil få returnert en liste over avgivere brukeren har rettighet til å representere. Resultatet er begrenset til de 50 første elementene, se punkt 7 under for informasjon om hvordan du får fram de 50 neste) GET https://www.altinn.no/api/reportees HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Ved korrekt autentisering vil du få følgende svar fra APIet: { &amp;quot;_links&amp;quot;: { &amp;quot;find&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/reportees/{reporteeId}&amp;quot;, &amp;quot;isTemplated&amp;quot;: true }, &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/reportees&amp;quot; } }, &amp;quot;_embedded&amp;quot;: { &amp;quot;reportees&amp;quot;: [ { &amp;quot;ReporteeId&amp;quot;: &amp;quot;r50170460&amp;quot;, &amp;quot;Name&amp;quot;: &amp;quot;DALEKVAM OG BORGEN&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;Foretak&amp;quot;, &amp;quot;OrganizationNumber&amp;quot;: &amp;quot;910672991&amp;quot;, &amp;quot;Status&amp;quot;: &amp;quot;Active&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/reportees/r50170460&amp;quot; }, &amp;quot;messages&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/r50170460/messages&amp;quot; } } }, { &amp;quot;ReporteeId&amp;quot;: &amp;quot;r50165842&amp;quot;, &amp;quot;Name&amp;quot;: &amp;quot;FOTLANDSVÅG OG VERMA REGNSKAP&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;Foretak&amp;quot;, &amp;quot;OrganizationNumber&amp;quot;: &amp;quot;910454013&amp;quot;, &amp;quot;Status&amp;quot;: &amp;quot;Active&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/reportees/r50165842&amp;quot; }, &amp;quot;messages&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/r50165842/messages&amp;quot; } } }, { &amp;quot;ReporteeId&amp;quot;: &amp;quot;r50019105&amp;quot;, &amp;quot;Name&amp;quot;: &amp;quot;HÅKON TRANA&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;Person&amp;quot;, &amp;quot;SocialSecurityNumber&amp;quot;: &amp;quot;05116602352&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/reportees/r50019105&amp;quot; }, &amp;quot;messages&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://altinn.no/api/r50019105/messages&amp;quot; } } } ] } } Lenker fra reportee Hvert enkelt reportee-element har en hash tabell _links som inneholder lenker til beslektede elementer. Det er viktig at din applikasjon aktivt bruker disse lenkene, og ikke hardkoder en rekke URL-er i applikasjonen. _links&amp;quot;: { &amp;quot;messages&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/910926551/messages&amp;quot; } } Feltene i _links betyr følgende: messages - URI til liste over meldinger i meldingsboksen til den aktuelle organisasjonen. _links kan bli utvidet med ytterligere flere relasjoner i fremtidige oppdateringer av APIet. 3. Hent enkelt melding med vedlegg For å hente ut en enkelt melding kan applikasjonen følge _self lenken som finnnes for hvert message element. Følgende request henter en enkelt melding fra brukerens meldingsboks. GET https://www.altinn.no/api/my/messages/a1507495 HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Eksempel respons fra API for message av typen FormTask: { &amp;quot;MessageId&amp;quot;: &amp;quot;a1507495&amp;quot;, &amp;quot;Subject&amp;quot;: &amp;quot;RF-1028 Selvangivelse for aksjeselskap mv. 2012, Anonym ASA&amp;quot;, &amp;quot;Status&amp;quot;: &amp;quot;Utfylling&amp;quot;, &amp;quot;LastChangedDateTime&amp;quot;: &amp;quot;2013-11-20T19:50:54.86&amp;quot;, &amp;quot;LastChangedBy&amp;quot;: &amp;quot;HÅKON TRANA&amp;quot;, &amp;quot;ServiceOwner&amp;quot;: &amp;quot;Skatteetaten&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;2933&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 120806, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altin.no/api/my/messages/a1507495&amp;quot; }, &amp;quot;print&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a1507495/print&amp;quot;, &amp;quot;mime-type&amp;quot;: &amp;quot;application/pdf&amp;quot; }, &amp;quot;metadata&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/2933/120806&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/Pages......&amp;quot; }, &amp;quot;form&amp;quot;: [ { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760772&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;RF-1028 Selvangivelse for aksjeselskap mv. 2012, Anonym ASA&amp;quot; }, { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760773&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;RF-1016 Formue av skogseiendom 2012&amp;quot; } ], &amp;quot;attachment&amp;quot;: [ { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a1507495/attachments/282783&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;oppgaver.txt&amp;quot;, &amp;quot;encrypted&amp;quot;: false } ] } } Eksempel respons fra API for message av typen Correspondence: { &amp;quot;MessageId&amp;quot;: &amp;quot;a385571&amp;quot;, &amp;quot;Subject&amp;quot;: &amp;quot;Vedr. saksnr 201301840, journalnr 2013021622 &amp;quot;, &amp;quot;Status&amp;quot;: &amp;quot;Ulest&amp;quot;, &amp;quot;LastChangedDateTime&amp;quot;: &amp;quot;2013-11-26T13:58:44.34&amp;quot;, &amp;quot;LastChangedBy&amp;quot;: &amp;quot;Testdepartementet&amp;quot;, &amp;quot;ServiceOwner&amp;quot;: &amp;quot;Testdepartement&amp;quot;, &amp;quot;Type&amp;quot;: &amp;quot;Correspondence&amp;quot;, &amp;quot;MessageSender&amp;quot;: &amp;quot;Brønnøy Kommune&amp;quot;, &amp;quot;Summary&amp;quot;: &amp;quot;Vedr. saksnr 201301840, journalnr 2013021622&amp;quot;, &amp;quot;Body&amp;quot;: &amp;quot;&amp;lt;p&amp;gt;Vedr. saksnr 201301840, journalnr 2013021622&amp;lt;/p&amp;gt;\n&amp;lt;p&amp;gt;Tillatelse til tiltak. Gnr 127 bnr 506, Skarelien 35.&amp;lt;/p&amp;gt;\n \n&amp;lt;p&amp;gt;Klikk under for å åpne dokumentet. &amp;lt;/p&amp;gt;\n&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;2479&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 2, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a385571&amp;quot; }, &amp;quot;metadata&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/correspondence/2479/2&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/Pages......&amp;quot; } &amp;quot;attachment&amp;quot;: [ { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/my/messages/a385571/attachments/187938&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;Tiltak_201301840.pdf&amp;quot;, &amp;quot;encrypted&amp;quot;: false } ] } Message lenker Message-element inneholder en hash tabell _links som inneholder lenker til beslektede elementer. &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495&amp;quot; }, &amp;quot;print&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/print&amp;quot;, &amp;quot;mime-type&amp;quot;: &amp;quot;application/pdf&amp;quot; }, &amp;quot;metadata&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/metadata/formtask/2933/120806&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/Pages/.......&amp;quot; }, &amp;quot;attachment&amp;quot;: [ { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/attachments/282783&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;oppgaver.txt&amp;quot;, &amp;quot;encrypted&amp;quot;: false } ], &amp;quot;form&amp;quot;: [ { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760772&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;RF-1028 Selvangivelse for aksjeselskap mv. 2012, Anonym ASA&amp;quot; }, { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/messages/a1507495/forms/760773&amp;quot;, &amp;quot;name&amp;quot;: &amp;quot;RF-1016 Formue av skogseiendom 2012&amp;quot; } ] } Feltene i _links betyr følgende: self - URI til representasjon av den enkelte meldingen. print - URI til utskriftsversjonen av et arkivert skjema eller et skjema under utfylling. Er kun gyldig for message elementer av typen &amp;ldquo;FormTask&amp;rdquo;. For &amp;ldquo;print&amp;rdquo; relasjoner er &amp;ldquo;mime-type&amp;rdquo; i de fleste tilfeller &amp;ldquo;application/pdf&amp;rdquo; men vil i noen tilfeller også være &amp;ldquo;application/text-html&amp;rdquo;. metadata - URI til metadata ressurs for den aktuelle meldingen. portalview - URI til portalpresentasjonen av meldingen. Ved å følge lenken får brukeren opp Altinns presentasjon av elementet i Portalen (www.altinn.no). I portalen vil ressursen vises i den status den befinner seg i (Utfylling, Signering, Arkivert). form - URI til skjema knyttet til message av typen FormTask. attachment - URI til brukeropplastet vedlegg knyttet til skjema under utfylling eller vedlegg knyttet til melding fra etat. encrypted-parameter angir om vedlegget er kryptert. _links kan bli utvidet med ytterligere flere relasjoner i fremtidige oppdateringer av APIet. 4. Filtrering av liste OData kan brukes til filtrering, paging og sortering i lister av elementer av alle typer. Lister i APIet er begrenset i kode til å maksimalt inneholde 50 elementer. Paging Det er mulig å utføre paging ved å sende med OData parameteren skip (for eksempel $skip=50). GET https://www.altinn.no/api/my/messages?$skip=50 HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Filtrering Det er også mulig å filtrere listene som returneres basert på hvilke informasjonselementer de inneholder. For eksempel vil følgende request med parameterene $filter=ServiceOwner eq &#39;Skatteetaten&#39;&amp;amp; $top=3 kun returnere de siste 3 meldinger fra Skatteetaten. GET https://www.altinn.no/api/my/messages?$filter=ServiceOwner eq &#39;Skatteetaten&#39;&amp;amp;$top=3 HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey 5. Laste ned XML payload for skjema (Skjemadata) Man kan nå laste ned (lese) XML-representasjon av Skjemadata. Skjemadata er representert i XML og vil være en egen ressurs som er lenket fra Form-ressursen. For å laste ned XML-representasjon av et skjema/underskjema kan man ta utgangspunkt i aktuelt message element og følge lenke form. Eksempel: https://www.altinn.no/api/910621211/messages/a1685777 Responsen på denne vil inneholde lenke&amp;reg; til de faktiske skjema, f.eks: &amp;quot;form&amp;quot;: [ { &amp;quot;href&amp;quot;: https://www.altinn.no/api/910621211/messages/a1685777/forms/1049574, &amp;quot;name&amp;quot;: &amp;quot;RF-0004 Omsetningsoppgave for primærnæringene, Hovedoppgave, Årlig, 2012&amp;quot; } ] Når du følger denne lenken vil respons inkludere en lenke til selve XML payload i form av lenke formdata: { &amp;quot;Type&amp;quot;: &amp;quot;MainForm&amp;quot;, &amp;quot;DataFormatId&amp;quot;: &amp;quot;213&amp;quot;, &amp;quot;DataFormatVersion&amp;quot;: 10422, &amp;quot;ValidationStatus&amp;quot;: &amp;quot;NotValidated&amp;quot;, &amp;quot;Name&amp;quot;: &amp;quot;RF-0004 Omsetningsoppgave for primærnæringene, Hovedoppgave, Årlig, 2012&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: https://www.altinn.no/api/910621211/messages/a1685777/forms/1049574 }, &amp;quot;formdata&amp;quot;: { &amp;quot;href&amp;quot;: https://www.altinn.no/api/910621211/messages/a1685777/forms/1049574/formdata, &amp;quot;mime-type&amp;quot;: &amp;quot;application/xml&amp;quot; } } } Lenken formdata vil returnere XML representasjon av Skjema, f.eks: &amp;lt;Skjema&amp;gt; ... &amp;lt;Termin-grp-2591 gruppeid=&amp;quot;2591&amp;quot;&amp;gt; &amp;lt;OppgaveType-datadef-5659 orid=&amp;quot;5659&amp;quot;&amp;gt;1&amp;lt;/OppgaveType-datadef-5659&amp;gt; &amp;lt;TerminType-datadef-20654 orid=&amp;quot;20654&amp;quot;&amp;gt;1&amp;lt;/TerminType-datadef-20654&amp;gt; &amp;lt;Termin-datadef-20655 orid=&amp;quot;20655&amp;quot;&amp;gt;011&amp;lt;/Termin-datadef-20655&amp;gt; &amp;lt;TerminAr-datadef-20656 orid=&amp;quot;20656&amp;quot;&amp;gt;2012&amp;lt;/TerminAr-datadef-20656&amp;gt; &amp;lt;/Termin-grp-2591&amp;gt; ... &amp;lt;/Skjema&amp;gt; "
},
{
	"uri": "https://altinn.github.io/docs/api/autentisering/id-porten/",
	"title": "ID-porten",
	"tags": [],
	"description": "Dersom brukeren ikke er autentisert vil API-et redirecte applikasjonen din til ID-portens påloggingsside med responsivt design. I en app vil brukeren kunne velge mellom å autentisere seg ved bruk av av MinID eller BankID. Når brukeren er autentisert i ID-porten vil brukeren bli redirected tilbake til opprinnelig URL. Dette vil fungere for alle klienter som støtter cookies og HTTP-redirect.",
	"content": "Altinn API benytter ID-porten til autentisering av brukere. ID-porten er en felles infrastruktur for å logge inn til offentlige tjenester. I ID-porten er det lagt til rette for at innbyggerene selv kan velge hvilken elektronisk ID de ønsker å benytte. Det er mulig å logge inn med elektronisk ID fra MinID, BankID, Buypass og Commfides. ID-porten sine autentiseringsløsinger bruker OpenSSO/OpenAM som fødereringsplattform. Fødereringen baserer seg på SAML2 OASIS-standarden. Single Sign-On (SSO) SSO vil si at du sømløst gjenbruker autentiseringen din. Med ID-porten/MinID betyr det i praksis at dersom du har logget inn på en tjeneste hos for eksempel NAV, vil det ikke være nødvendig å gjøre en ny pålogging for å få tilgang til Altinn, eller andre tjenester som benytter ID-porten/MinID. I utgangspunktet er alle tjenester som benytter ID-porten/MinID en del av SSO. Vi vil nå forklare hvordan du kan implementere støtte for autentisering ved bruk av ID-porten i din applikasjon. 1. Innebygd nettleser For at din applikasjon skal kunne benytte web-baserte autentiserings protokoller som SAML til autentisering, må du la brukerne logge inn med en innebygd nettleser. Å bygge inn en nettleser i din applikasjon er enkelt på de vanligste plattformene: Android: bruk WebView. iOS: bruk UIWebView Du kan peke nettleseren til starturl for Altinn API: https://www.altinn.no/api/my/messages/ Da vil brukeren automatisk bli videreført til ID-portens påloggingsside med responsivt design. På denne siden vil brukeren få valget mellom å logge inn med MinID eller BankID. BankID har egne applikasjoner for pålogging (iOS og Android) og disse vil automatisk åpnes og lukkes ved autentisering. 2. Hente ut påloggings-token Etter vellykket pålogging i ID-porten, vil brukeren bli ført tilbake til Altinn og Altinn oppretter et sett med tokens i form av HTTP cookies i Set-Cookie header. Når Altinn har opprettet disse token burde din applikasjon hente de ut og deretter lukke den innebygde nettleseren. Her er eksempler på hvordan du kan hente ut token i HTTP cookie på de vanligste plattformene: Android: CookieManager#getCookie(URL) kan brukes til å hente ut cookier satt av Altinn. Detaljert eksempelkode på denne tekikken kan du finne her. iOS: Din applikasjon kan hente ut cookies satt av Altinn ved å bruke NSHTTPCookieStorage. Dette blir ofte kalt &amp;ldquo;cookie jar.&amp;rdquo; NSHTTPCookie *cookie; NSHTTPCookieStorage *cookieJar = [NSHTTPCookieStorage sharedHTTPCookieStorage]; for (cookie in [cookieJar cookies]) { NSLog(@&amp;quot;%@&amp;quot;, cookie); } Detaljert eksempelkode på denne teknikken for iOS finner du her. 3. Videreføre påloggings-token i kall til Altinn API Tokenet .ASPXAUTH legges i HTTP header som &amp;ldquo;Cookie&amp;rdquo; i videre på kall til Altinn API: Cookie: .ASPXAUTH=2AF7F203...., etc... API nøkkelen må også legges ved i HTTP header slik: ApiKey: myKey API nøkkel får du etter registrering av din applikasjon. 4. Autentisering ved integrasjon i andre portaler Det er mulig å integrere innhold i brukernes meldingsboks i Altinn i eksterne portaler ved å bruke Altinn API. Dette krever at den eksterne portalen også fødererer mot ID-porten og er medlem av samme Circle of Trust som Altinn. Altinn API benytter også CORS for ekstra sikkerhet ved kryssdomene forespørsler. For å integrere brukerens meldingsboks i Altinn i en ekstern nettside må dermed domenet til denne nettsiden ligge i Altinns CORS whitelist. Det er derfor nødvendig å registrere nettsiden som skal integrere Altinnsmeldingsboks hos Altinn. Se denne siden for informasjon om registrering. Bruk av Altinn API i eksterne nettsider er bare tilgjengelig for offentlige etater/institusjoner som er tjenesteeiere i Altinn. Flyten for redirect-løsningen for å få sesjon i Altinn er: 1. Ekstern portal kontakter https://www.altinn.no/Pages/ExternalAuthentication/Redirect.aspx?returnUrl=https://www.minportal.no/portal&amp;amp;userToken=sha256-hash &amp;ldquo;sha256-hash&amp;rdquo; er hash av fødselsnummer på autentisert bruker på ekstern portal. UserToken er valgfri og brukes til å sikre at det ikke allerede eksisterer en sesjon i Altinn som tilhører en annen bruker enn den som er autentisert på ekstern portal. 2. Brukeren blir sendt til Altinn 2-1a. Med userToken angitt: Dersom brukeren allerede er logget inn i ID-porten opprettes .ASPXAUTH cookie som inneholder sesjonsopplysninger nødvendige for REST-kall. Om det finnes en sesjon i Altinn for en annen bruker, vil denne logges ut og ny sesjon opprettes for brukeren i userToken. 2-1b. Dersom bruker ikke er logget inn sendes bruker til innloggingsside og må logge inn. 2-1c. Dersom samme bruker er logget inn i Altinn fra før valideres sesjon. 2-2a. Uten userToken: Dersom bruker allerede er logget inn i ID-porten opprettes .ASPXAUTH cookie som inneholder sesjonsopplysninger nødvendige for REST-kall. 2-2b. Dersom bruker ikke er logget inn sendes bruker til innloggingsside 2-2c. OBS! Dersom bruker velger Altinn-innlogging vil man bli sendt tilbake til idporten for å autentisere seg med idporten. 3 a. Bruker logger inn og det opprettes .ASPXAUTH-cookie som inneholder sesjonsopplysningene man trenger for ytterligere REST-kall b. Dersom bruker ikke logger inn, blir brukeren stående på innloggingsside 4. Altinn sjekker om verdien i returnUrl (https://www.minportal.no/portal i dette eksempelet) er gyldig og ligger inne i CORS whitelist a. Dersom domenet er gyldig gjennomføres redirect til den eksterne adressen b. Dersom domenet ikke er gyldig sendes bruker til «Min Meldingsboks» i Altinn Adressen eksterne portaler må bruke blir da: https://www.altinn.no/Pages/ExternalAuthentication/Redirect.aspx?returnUrl=URL_SOM_BRUKER_SKAL_SENDES_TILBAKE_TIL_ETTER_INNLOGGING "
},
{
	"uri": "https://altinn.github.io/docs/katalog/kanaler/",
	"title": "Kanaler",
	"tags": [],
	"description": "Gir en oversikt over hvilke alternative måter tjenesteeiere, sluttbrukersystem og andre kan integrere seg mot Altinn på.",
	"content": "Gir en oversikt over hvilke alternative måter tjenesteeiere, sluttbrukersystem og andre kan integrere seg mot Altinn på. REST API Altinn tilbyr et REST-API med autentisering ved hjelp av ID-Porten som gjør det mulig å bruke tjenestene i Altinn i en app eller ekstern nettside. Altinn API-et er enkelt og gratis å bruke. Web services Altinn støtter åpne grensesnitt og har helt siden starten jobbet for størst mulig grad av integrasjon mot datasystemene som brukes i næringslivet og blant de profesjonelle brukerne. Tjenesteeier Tjenesteeier må etablere et grensesnitt mellom sine etatssystemer og Altinn for å sende og motta data. Portal Altinn-portalen tilbyr en felles meldingsboks til sluttbrukerne av Altinn samt standardfunksjonalitet for de forskjellige tjenestene. Apps Altinn Apps er i dag tre applikasjoner som er utviklet på de tre dominerende mobile plattformene iOS, Android og Windows Phone. "
},
{
	"uri": "https://altinn.github.io/docs/api/kom-i-gang/",
	"title": "Kom i gang",
	"tags": [],
	"description": "",
	"content": "Denne guiden vil hjelpe deg med å komme igang med bruk av Altinns REST API. 1. Registrer din løsning Tilgang til å bruke Altinn API er i utgangspunktet åpent, men for at vi skal kunne hindre misbruk og feilbruk krever vi at alle som ønsker tilgang, registrerer sin løsning. Informasjon om registrering finner du her. 2. Autentisering med IDPorten Selv om tilgang til Altinn API er åpent, kreves det at brukeren autentiserer seg for at tilgangen til innholdet i brukerens meldingsboks skal gis. Informasjon om hvordan autentisering av brukerne kan utføres i en applikasjon og informasjon om føderering av brukere finner du her. For å teste APIet i en nettleser kan du logge inn i Altinn på vanlig måte. 3. Respons formater Alle kall som brukes for å hente ut informasjon fra Altinn API bruker GET-metoden i HTTP. Formatet som returneres bestemmes av HTTP-headeren &amp;ldquo;Accept&amp;rdquo;. Følgende kall returnerer innhold fra brukerens meldingsboks i JSON-format. GET https://www.altinn.no/api/my/messages HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Mens følgende kall returnerer innhold på XML-format: GET https://www.altinn.no/api/my/messages HTTP/1.1 Host: www.altinn.no Accept: application/hal+xml ApiKey: myKey 4. Detaljert teknisk hjelpeside og testklient Altinn API har egne selvdokumenterene hjelpesider (på engelsk) som du finner på https://www.altinn.no/api/help/. Disse hjelpesidene inneholder detaljert teknisk informasjon om de ulike modellene som eksponeres og aksjonene som er mulig å utføre. Hjelpesidene inneholder også en testklient som kan benyttes til å utføre spørringer direkte mot Altinn API fra din nettleser (krever at du er pålogget Altinn). 5. Feilbehandling og utilgjengelighet Informasjon kommer. Feil ved for lavt sikkerhetsnivå Feil ved autorisasjon "
},
{
	"uri": "https://altinn.github.io/docs/api/meldinger/",
	"title": "Meldinger",
	"tags": [],
	"description": "",
	"content": "Hente Sende inn Signere Slette "
},
{
	"uri": "https://altinn.github.io/docs/api/metadata/",
	"title": "Metadata",
	"tags": [],
	"description": "",
	"content": "Altinn API tilbyr en ressurs som gir tilgang til metadata for tjenester tilgjengelige i Altinn. Metadata ressursen er åpent tilgjengelig og krever ikke autentisering. GET operasjon for å hente metadata for alle tjenester GET https://www.altinn.no/api/metadata HTTP/1.1 ApiKey: myKey Accept: application/hal+json Respons fra API: { &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata&amp;quot; } }, &amp;quot;_embedded&amp;quot;: { &amp;quot;metadata&amp;quot;: [{ &amp;quot;ServiceOwnerCode&amp;quot;: &amp;quot;BUF&amp;quot;, &amp;quot;ServiceOwnerName&amp;quot;: &amp;quot;Barne-, ungdoms- og familiedirektoratet&amp;quot;, &amp;quot;ServiceName&amp;quot;: &amp;quot;BUF-0021 Søknad om tilskudd til frivillige, landsomfattende barne- og ungdomsorganisasjoner - internasjonal grunnstøtte for partipolitiske ungdomsorganisasjoner&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;3734&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 150114, &amp;quot;ValidFrom&amp;quot;: &amp;quot;2014-05-15T08:00:00&amp;quot;, &amp;quot;ValidTo&amp;quot;: &amp;quot;2099-01-15T00:56:00&amp;quot;, &amp;quot;ServiceType&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/3734/150114&amp;quot; } } }, { &amp;quot;ServiceOwnerCode&amp;quot;: &amp;quot;BUF&amp;quot;, &amp;quot;ServiceOwnerName&amp;quot;: &amp;quot;Barne-, ungdoms- og familiedirektoratet&amp;quot;, &amp;quot;ServiceName&amp;quot;: &amp;quot;Søknad om aktivitetstilskot for å betre levekår og livskvalitet blant lesbiske, homofile, bifile og transpersonar (LHBT)&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;3610&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 130802, &amp;quot;ValidFrom&amp;quot;: &amp;quot;2014-01-16T10:23:50&amp;quot;, &amp;quot;ValidTo&amp;quot;: &amp;quot;2099-02-01T00:51:00&amp;quot;, &amp;quot;ServiceType&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/3610/130802&amp;quot; } } }] } } GET operasjon for å hente metadata for enkelt tjeneste GET https://www.altinn.no/api/metadata/formtask/3734/150114 HTTP/1.1 ApiKey: myKey Accept: application/hal+json Respons fra API: { &amp;quot;ServiceOwnerCode&amp;quot;: &amp;quot;BUF&amp;quot;, &amp;quot;ServiceOwnerName&amp;quot;: &amp;quot;Barne-, ungdoms- og familiedirektoratet&amp;quot;, &amp;quot;ServiceName&amp;quot;: &amp;quot;BUF-0021 Søknad om tilskudd til frivillige, landsomfattende barne- og ungdomsorganisasjoner - internasjonal grunnstøtte for partipolitiske ungdomsorganisasjoner&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;3734&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 150114, &amp;quot;ValidFrom&amp;quot;: &amp;quot;2014-05-15T08:00:00&amp;quot;, &amp;quot;ValidTo&amp;quot;: &amp;quot;2099-01-15T00:56:00&amp;quot;, &amp;quot;ServiceType&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;RestEnabled&amp;quot;: false, &amp;quot;FormsMetaData&amp;quot;: [{ &amp;quot;FormID&amp;quot;: 3686, &amp;quot;FormName&amp;quot;: &amp;quot;BUF-0021 Søknad om tilskudd til frivillige, landsomfattende barne- og ungdomsorganisasjoner - internasjonal grunnstøtte for partipolitiske ungdomsorganisasjoner&amp;quot;, &amp;quot;DataFormatProviderType&amp;quot;: &amp;quot;Seres&amp;quot;, &amp;quot;DataFormatID&amp;quot;: &amp;quot;4362&amp;quot;, &amp;quot;DataFormatVersion&amp;quot;: 36770, &amp;quot;IsOnlyXsdValidation&amp;quot;: false, &amp;quot;FormType&amp;quot;: &amp;quot;MainForm&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;schema&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/3734/150114/forms/4362/36770/xsd&amp;quot; } } }], &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/metadata/formtask/3734/150114&amp;quot; } } } Metadata om den enkelte tjenesten vil for eksempel inkludere informasjon om det er mulig å sende inn skjema via REST API, samt gi tilgang til XSD for skjema (Datamodell) "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/goals/",
	"title": "Målsettinger",
	"tags": [],
	"description": "",
	"content": "En oppsummering av de overordnede hovedmålsettingene for tjenester 3.0. Brukervennlige og responsive tjenester Brukergrensesnitt som er brukervennlig, effektive og moderne (f.eks. som vist på altinn-dagen) Støtte for mobil og ulike skjermstørrelser er innebygd, såkalt responsivt design. Dette gjelder også for utviklingsverktøy. Innebygd universell utforming med støtte for WCAG 2 God ytelse og lav responstid Effektiv og selvbetjent tjenesteutvikling Man kan enkelt gjøre alt selv (inkl. prodsetting) når man ønsker det, uten behov for bestillinger, kursing, etc. Flaskehalser elimineres. Effektiv og reell testing, der enhetstest oppfører seg likt som testmiljøer og prod (alle miljøer baseres på samme plattform-kode) Støtte for å lage automatisert testing av tjenester Regler og logikk defineres kun en gang for alle kanaler (portal/WS/API), og på en mer robust måte enn i dag Datamodellering innebygd i det samme web-baserte verktøyet (og støtte for import fra SERES, OR, etc. ) Ikke nødvendig med Citrix for tilgang til utviklingsmiljø Enkelt for fagpersoner, fleksibelt for utviklere Fagpersoner har tilgang til nødvendig funksjonalitet direkte i nettleser Man gjenbruker gode og ferdig-testede komponenter/widgets Enkelt å gjøre kall mot API&amp;rsquo;er i andre systemer (hente data, kjøre logikk som ligger i egne fagsystemer) Mer tekniske utviklere kan i tillegg tilpasse alle aspekter hvis man har behov for det ved bruk av kode-editor, f.eks. lage gjenbrukbare widgets, stilark, etc. Gjenbruk av tekster og andre ressurser på det nivået som man ønsker (plattform, tjenesteeier, tjeneste), samt vilkårlig språkstøtte Git (versjonskontroll) benyttes for lagring av tjenestene som utvikles, både fra nettleser og kode-editor. Åpen kildekode, cross-platform Tjenester 3.0 skal baseres på åpen kildekode Tjenester 3.0 skal også deles som åpen kildekode Dette betyr at alle kan bidra til å forbedre plattformen. Altinn-organisasjonen blir mao. ikke flaskehals for utvikling. Kan kjøres lokalt på egen maskin, på egne servere og på både Windows, macOS eller Linux Alt baseres på åpne web-standarder og vanlig utviklerkompetanse (ingen &amp;ldquo;sære&amp;rdquo; eller proprietære verktøy innføres) "
},
{
	"uri": "https://altinn.github.io/docs/api/registrering/",
	"title": "Registrering",
	"tags": [],
	"description": "",
	"content": "Registrer din applikasjon hos Altinn For at vi skal kunne stoppe misbruk og feilbruk må du registrere deg for å kunne bruke Altinn API-et. Dette gjelder både for sluttbruker og tjenesteeier apiene Altinn tilbyr. Sluttbruker API Tjenesteeier API "
},
{
	"uri": "https://altinn.github.io/docs/api/retningslinjer/",
	"title": "Retningslinjer",
	"tags": [],
	"description": "",
	"content": "Krav til merking Det må kommer frem for brukeren at data kommer fra Altinn. All bruk av Altinn API i applikasjoner skal derfor merkes med følgende tekst: &amp;ldquo;Data levert av Altinn&amp;rdquo; Bokmål &amp;ldquo;Data delivered by Altinn&amp;rdquo;. Engelsk Vi har ikke krav til hvordan teksten skal vises, men den skal være godt synlig for brukeren, når vedkommende tar i bruk eller starter applikasjonen. Andre krav Du har ikke lov til å lage tjenester/applikasjoner som framstår som om de er laget av Altinn. Du kan ikke endre på innholdet i data som leveres. Du har ikke lov til å bruke innholdet på nettsider med pornografisk eller rasistisk innhold, eller på nettsider som bryter norsk lov. Se dokumentasjonen for informasjon om autentisering og sikkerhet. Det kreves at applikasjonsleverandøren fyller ut egenerklæringskjema for bruk av Altinn API. Ved integrasjon av innhold fra Altinn API i andre fødererte portaler er det et krav at brukeren opplyses om bruken av Altinn API og hvilke ressurser i Altinn portalen benytter. "
},
{
	"uri": "https://altinn.github.io/docs/api/autorisering/rolledefinisjoner/",
	"title": "Rolledefinisjoner",
	"tags": [],
	"description": "",
	"content": "Hente rolledefinisjoner Henter ut alle rolledefinisjoner tilgjengelig for {who}. Se også altinn.no/api/help. GET https://www.altinn.no/api/{who}/authorization/roledefinitions HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Eksempel på respons [ { &amp;quot;RoleType&amp;quot;: &amp;quot;External&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 82, &amp;quot;RoleName&amp;quot;: &amp;quot;Privatperson&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Privatperson&amp;quot; }, { &amp;quot;RoleType&amp;quot;: &amp;quot;Altinn&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 1525, &amp;quot;RoleName&amp;quot;: &amp;quot;UDI referanseperson&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Videreformidlingstjeneste UDI&amp;quot; }, { &amp;quot;RoleType&amp;quot;: &amp;quot;Altinn&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 2215, &amp;quot;RoleName&amp;quot;: &amp;quot;hildetest&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;testrolle&amp;quot; } ] Hente ut en enkelt rolle Hente ut alle rettigheter tilknyttet en spesifikk rolle angitt med roledefinitionid fra rollelisten i punktet over. Se også altinn.no/api/help. GET https://www.altinn.no/api/{who}/authorization/roledefinitions/{roledefinitionid} HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Eksempel på respons: { &amp;quot;RoleType&amp;quot;: &amp;quot;External&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 82, &amp;quot;RoleName&amp;quot;: &amp;quot;Privatperson&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Privatperson&amp;quot;, &amp;quot;Rights&amp;quot;: [ { &amp;quot;RightID&amp;quot;: 63, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;SKBERG&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 1, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: false }, { &amp;quot;RightID&amp;quot;: 68, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;SKDPSA&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 2, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: false }, { &amp;quot;RightID&amp;quot;: 70, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;SKDSLN&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 1, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: false } ] } Opprette lokal rolle Oppretter en egendefinert rolle med de spesifikke rettighetene til tjenester/ressurser som angis i kallet. Språk er valgfri inputparameter. Tillatte actions er Read, Write, Delete, Sign, ReadArchive, DeleteArchive og disse angir hvilke rettigheter rollen gir for de forskjellige stegene i arbeidsflyten gjennom Altinn. Etter at den er opprettet, må rollen delegeres for faktisk gi rettighetene man har valgt. Se også altinn.no/api/help. POST https://www.altinn.no/api/{who}/authorization/roledefinitions/ HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey { &amp;quot;RoleName&amp;quot;: &amp;quot;min egen lokale rolle2&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;en beskrivelse av rollen&amp;quot;, &amp;quot;_embedded&amp;quot;: { &amp;quot;Rights&amp;quot;: [ { &amp;quot;ServiceCode&amp;quot;: &amp;quot;3357&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: &amp;quot;130429&amp;quot;, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot; } ] } } Eksempel på respons: Det returneres en tom respons, men location header angir id på den nye lokale rollen dersom den ble opprettet OK. HTTP 201 - Created Location: https://www.altinn.no/api/my/authorization/roledefinitions/13667 Slette lokal rolle Se også altinn.no/api/help. DELETE https://www.altinn.no/api/my/authorization/roledefinitions/13667 HTTP/1.1 Host: www.altinn.no ApiKey: myKey Eksempel på respons: HTTP 204 - No Content Oppdatere rolle Oppdaterer angitt rolle for {who}. Språk er valgfri input-parameter Se også altinn.no/api/help. PUT https://www.altinn.no/api/{who}/authorization/roledefinitions/{roledefinitionid} HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey { &amp;quot;RoleName&amp;quot;: &amp;quot;min egen lokale rolle5&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;en beskrivelse av rollen&amp;quot;, &amp;quot;RoleType&amp;quot;: &amp;quot;service&amp;quot;, &amp;quot;_embedded&amp;quot;: { &amp;quot;Rights&amp;quot;: [ { &amp;quot;ServiceCode&amp;quot;: &amp;quot;3357&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: &amp;quot;130429&amp;quot;, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot; } ] } } Eksempel på respons: HTTP 204 - No content Location: https://www.altinn.no/api/my/authorization/roledefinitions/13667 "
},
{
	"uri": "https://altinn.github.io/docs/api/autorisering/roller-og-rettigheter/",
	"title": "Roller og rettigheter",
	"tags": [],
	"description": "",
	"content": "Hente roller Hente ut roller innlogget bruker har for {who} - kan være my, organisasjonsnummer eller andre privatpersoner der man spør ved hjelp av r{id} som hentes fra api/reportees. Se beskrivelse på altinn.no/api/help. GET https://www.altinn.no/api/{who}/authorization/roles HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Eksempel på respons på rettigheter innlogget bruker har for 910252240: { &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https:\/\/www.altinn.no\/api\/910252240\/authorization\/roles&amp;quot; } }, &amp;quot;_embedded&amp;quot;: { &amp;quot;roles&amp;quot;: [ { &amp;quot;RoleId&amp;quot;: 38069107, &amp;quot;RoleType&amp;quot;: &amp;quot;Altinn&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 3, &amp;quot;RoleName&amp;quot;: &amp;quot;L\u00f8nn og personalmedarbeider&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Tilgang til l\u00f8nns- og personalrelaterte tjenester&amp;quot;, &amp;quot;Delegator&amp;quot;: &amp;quot;ELLEN FISKE&amp;quot;, &amp;quot;DelegatedTime&amp;quot;: &amp;quot;2014-11-19T08:27:40.577&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;roledefinition&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https:\/\/www.altinn.no\/api\/910252240\/authorization\/roledefinitions\/3&amp;quot; } } }, { &amp;quot;RoleId&amp;quot;: 38069108, &amp;quot;RoleType&amp;quot;: &amp;quot;Altinn&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 6, &amp;quot;RoleName&amp;quot;: &amp;quot;Regnskapsmedarbeider&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Tilgang til regnskapsrelaterte skjema og tjenester&amp;quot;, &amp;quot;Delegator&amp;quot;: &amp;quot;ELLEN FISKE&amp;quot;, &amp;quot;DelegatedTime&amp;quot;: &amp;quot;2014-11-19T08:27:40.577&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;roledefinition&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https:\/\/www.altinn.no\/api\/910252240\/authorization\/roledefinitions\/6&amp;quot; } } }, { &amp;quot;RoleId&amp;quot;: 38069101, &amp;quot;RoleType&amp;quot;: &amp;quot;Altinn&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 8, &amp;quot;RoleName&amp;quot;: &amp;quot;Begrenset signeringsrettighet&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Tilgang til \u00e5 signere utvalgte skjema og tjenester&amp;quot;, &amp;quot;Delegator&amp;quot;: &amp;quot;ELLEN FISKE&amp;quot;, &amp;quot;DelegatedTime&amp;quot;: &amp;quot;2014-11-19T08:22:21.653&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;roledefinition&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https:\/\/www.altinn.no\/api\/910252240\/authorization\/roledefinitions\/8&amp;quot; } } }, { &amp;quot;RoleId&amp;quot;: 38069102, &amp;quot;RoleType&amp;quot;: &amp;quot;Altinn&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 11, &amp;quot;RoleName&amp;quot;: &amp;quot;Utfyller\/Innsender&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Tilgang til utvalgte skjema og tjenester&amp;quot;, &amp;quot;Delegator&amp;quot;: &amp;quot;ELLEN FISKE&amp;quot;, &amp;quot;DelegatedTime&amp;quot;: &amp;quot;2014-11-19T08:22:21.653&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;roledefinition&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https:\/\/www.altinn.no\/api\/910252240\/authorization\/roledefinitions\/11&amp;quot; } } }, { &amp;quot;RoleType&amp;quot;: &amp;quot;Altinn&amp;quot;, &amp;quot;RoleDefinitionId&amp;quot;: 89, &amp;quot;RoleName&amp;quot;: &amp;quot;Basisrolle&amp;quot;, &amp;quot;RoleDescription&amp;quot;: &amp;quot;Rolle som f\u00f8lger automatisk med n\u00e5r en bruker f\u00e5r en annen Altinn-rolle&amp;quot;, &amp;quot;_links&amp;quot;: { &amp;quot;roledefinition&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https:\/\/www.altinn.no\/api\/910252240\/authorization\/roledefinitions\/89&amp;quot; } } } ] } } Hente rettigheter Hente ut rettigheter innlogget bruker har for {who} - kan være my, organisasjonsnummer eller andre privatpersoner der man spør ved hjelp av r{id} som hentes fra api/reportees. Se beskrivelse på altinn.no/api/help. GET https://www.altinn.no/api/{who}/authorization/rights HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey Eksempel på respons: { &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https:\/\/www.altinn.no\/api\/910252240\/authorization\/rights&amp;quot; } }, &amp;quot;_embedded&amp;quot;: { &amp;quot;rights&amp;quot;: [ { &amp;quot;RightID&amp;quot;: 103, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1261&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 1, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: true }, { &amp;quot;RightID&amp;quot;: 104, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1238&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 3, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: false }, { &amp;quot;RightID&amp;quot;: 10481822, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1051&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 140619, &amp;quot;Action&amp;quot;: &amp;quot;Read&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: true }, { &amp;quot;RightID&amp;quot;: 10481823, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1051&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 140619, &amp;quot;Action&amp;quot;: &amp;quot;Write&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: true }, { &amp;quot;RightID&amp;quot;: 10481824, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1051&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 140619, &amp;quot;Action&amp;quot;: &amp;quot;ArchiveRead&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: true }, { &amp;quot;RightID&amp;quot;: 10481825, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1051&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 140619, &amp;quot;Action&amp;quot;: &amp;quot;ArchiveDelete&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: true }, { &amp;quot;RightID&amp;quot;: 10481843, &amp;quot;RightType&amp;quot;: &amp;quot;Service&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1051&amp;quot;, &amp;quot;ServiceEditionCode&amp;quot;: 140619, &amp;quot;Action&amp;quot;: &amp;quot;Sign&amp;quot;, &amp;quot;RightSourceType&amp;quot;: &amp;quot;RoleTypeRights&amp;quot;, &amp;quot;IsDelegatable&amp;quot;: true } ] } } Slette tildelte roller Sletter en rolle for {who} (r{id} fra api/reportees, organisasjonsnummer eller brukernavn) ved hjelp av roleid fra GET. Se beskrivelse på altinn.no/api/help. DELETE https://www.altinn.no/api/{who}/authorization/roles/{rolleid} HTTP/1.1 Host: www.altinn.no ApiKey: myKey Returnerer tom respons og statuskode/-melding. ###Slette tildelte rettigheter Sletter en rettighet for {who} (r{id} fra api/reportees, organisasjonsnummer eller brukernavn) ved hjelp av rightid fra GET rights. Se beskrivelse på altinn.no/api/help. DELETE https://www.altinn.no/api/{who}/authorization/rights/{rettighetsid} HTTP/1.1 Host: www.altinn.no ApiKey: myKey Returnerer tom respons og statuskode/-melding. "
},
{
	"uri": "https://altinn.github.io/docs/api/meldinger/sende-inn/",
	"title": "Sende inn",
	"tags": [],
	"description": "",
	"content": "Sende Gjøre POST operasjoner på Message elementet i Altinn API Man kan sende inn skjema med vedlegg. Skjema er i API-et Message av type FormTask. Generelt om Skjema Innsendingstjenester i Altinn I Altinn er bygget inn mye funksjonalitet får å tilby brukere skjema med ulike behov og krav. Det meste av denne funksjonaliteten er foreløpig ikke bygget inn i REST API-et, men det tilbys en enkel og synkron prosess for innsending, inkludert alle type valideringer som gjelder pr skjema. Den synkrone prosessen avsluttes med en respons at skjema er lagret i arkiv, og med en lenke til denne nye ressursen. I Altinn kan tjenesteeier selv angi hvilke innsendingskanaler som er gyldige. REST API må derfor angis av tjenesteeier som en gyldig kanal.Metadata ressursen som lister alle produksjonsatte tjenester i Altinn vil indikere om aktuell tjeneste er tilgjengelig for innsending fra REST API. Skjema i Altinn er bygget på en XSD datamodell (http://en.wikipedia.org/wiki/XSD), som igjen er knyttet til en overordnet semantisk modell. Denne XSD angir de tekniske valideringene for et skjema. Andre typer valideringsregler (kalkyler, forretningsregler) kan angis som en del av utviklingen av skjema. XSD for aktuell tjeneste kan lastes ned fra metadata ressursen. Skjema må sees på som en payload &amp;ldquo;Blob&amp;rdquo; representert i XML, og må representeres som XML også i JSON, se eksempel under. POST operasjon for innsending av skjema til arkiv Følgende request sender inn skjema med vedlegg til Arkivet i brukerens meldingsboks. Adressen til det arkiverte skjemaet vil returneres i Location respons header. Header POST https://www.altinn.no/api/my/messages HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey Body { &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1029&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 64, &amp;quot;_embedded&amp;quot; : { &amp;quot;forms&amp;quot; : [ { &amp;quot;Type&amp;quot;: &amp;quot;MainForm&amp;quot;, &amp;quot;DataFormatId&amp;quot;: &amp;quot;1232&amp;quot;, &amp;quot;DataFormatVersion&amp;quot;: &amp;quot;10123&amp;quot;, &amp;quot;FormData&amp;quot;: &amp;quot;&amp;lt;Skjema xmlns:xsi=\&amp;quot;http://www.w3.org/2001/XMLSchema-instance\&amp;quot;...&amp;gt;...&amp;lt;/Skjema&amp;gt;&amp;quot; } ], &amp;quot;attachments&amp;quot; : [ { &amp;quot;FileName&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;AttachmentType&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;Data&amp;quot;: &amp;quot;base64 encoded&amp;quot; } ] } } POST operasjon for innsending av skjema til arbeidslisten (mellomlagring) Det er også mulig å sende inn skjema til arbeidslisten i Altinn. Da vil skjema få status &amp;ldquo;Utfylling&amp;rdquo;. Skjema kan så fylles ut ferdig i Altinn portal eller fullføres med ny PUT operasjon på meldingen. At skjemaet skal få status &amp;lsquo;Utfylling&amp;rsquo; angis ved å inkludere URL-parameter complete=false. Adressen til skjemaet i arbeidslisten returneres i Location respons header. Header POST https://www.altinn.no/api/my/messages?complete=false HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey Body { &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;123&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 64, &amp;quot;_embedded&amp;quot; : { &amp;quot;forms&amp;quot; : [{ &amp;quot;Type&amp;quot;: &amp;quot;MainForm&amp;quot;, &amp;quot;DataFormatId&amp;quot;: &amp;quot;1023&amp;quot;, &amp;quot;DataFormatVersion&amp;quot;: &amp;quot;1&amp;quot;, &amp;quot;FormData&amp;quot;: &amp;quot;&amp;lt;Skjema xmlns:xsi=\&amp;quot;http://www.w3.org/2001/XMLSchema-instance\&amp;quot;...&amp;gt;...&amp;lt;/Skjema&amp;gt;&amp;quot; }], &amp;quot;attachments&amp;quot; : [{ &amp;quot;FileName&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;AttachmentType&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;Data&amp;quot;: &amp;quot;base64 encoded&amp;quot; }] } } POST operasjon for å opprette preutfylt skjema Det er også mulig å sende tom payload for å opprette et tomt skjema med preutfylling. Da vil skjema bli opprette med data satt av tjenesteeier. Skjemaet vil få status &amp;ldquo;Utfylling&amp;rdquo;, og kan så fylles ut ferdig i Altinn portal eller fullføres med ny PUT operasjon. Header POST https://www.altinn.no/api/my/messages?complete=false HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey Body { &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;123&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 64, &amp;quot;_embedded&amp;quot; : { } } POST operasjon for innsending av skjema til signering Det er også mulig å sende inn skjema til signering i Altinn. Da vil skjema få status &amp;ldquo;Signering&amp;rdquo;. Skjema kan så signeres i Altinn portal eller fullføres med ny PUT operasjon på meldingen. At skjemaet skal få status &amp;lsquo;Signering&amp;rsquo; angis ved å inkludere URL-parameter Sign=false. Adressen til skjemaet i arbeidslisten returneres i Location respons header. Header POST https://www.altinn.no/api/my/messages?sign=false HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey Body { &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;123&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 64, &amp;quot;_embedded&amp;quot; : { &amp;quot;forms&amp;quot; : [{ &amp;quot;Type&amp;quot;: &amp;quot;MainForm&amp;quot;, &amp;quot;DataFormatId&amp;quot;: &amp;quot;1023&amp;quot;, &amp;quot;DataFormatVersion&amp;quot;: &amp;quot;1&amp;quot;, &amp;quot;FormData&amp;quot;: &amp;quot;&amp;lt;Skjema xmlns:xsi=\&amp;quot;http://www.w3.org/2001/XMLSchema-instance\&amp;quot;...&amp;gt;...&amp;lt;/Skjema&amp;gt;&amp;quot; }], &amp;quot;attachments&amp;quot; : [{ &amp;quot;FileName&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;AttachmentType&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;Data&amp;quot;: &amp;quot;base64 encoded&amp;quot; }] } } Oppdatere Gjøre PUT operasjoner på Message element i Altinn API. Det er mulig å oppdatere skjema med vedlegg som ligger i arbeidslisten til brukeren. Oppdatering utføres ved å gjøre PUT operasjoner på den enkelte message som skal oppdateres. Alle skjema og vedlegg må inkluderes i hver oppdatering, da tidligere data på message vil overskrives. Følgende URL parametere styrer hva som utføres på skjemaet etter oppdatering: complete = [true|false] sign = [true|false] Defaultverdi for complete og sign er true, så om ingen av parameterne er satt til false vil skjemaet signeres og arkiveres etter oppdatering. complete=false vil sette status &amp;ldquo;Utfylling&amp;rdquo; etter oppdatering, mens sign=false sender skjema til signering etter oppdatering. Header PUT https://www.altinn.no/api/my/messages/a1234 HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey Body { &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;123&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 64, &amp;quot;_embedded&amp;quot; : { &amp;quot;forms&amp;quot; : [{ &amp;quot;Type&amp;quot;: &amp;quot;MainForm&amp;quot;, &amp;quot;DataFormatId&amp;quot;: &amp;quot;1023&amp;quot;, &amp;quot;DataFormatVersion&amp;quot;: &amp;quot;1&amp;quot;, &amp;quot;FormData&amp;quot;: &amp;quot;&amp;lt;Skjema xmlns:xsi=\&amp;quot;http://www.w3.org/2001/XMLSchema-instance\&amp;quot;...&amp;gt;...&amp;lt;/Skjema&amp;gt;&amp;quot; }], &amp;quot;attachments&amp;quot; : [{ &amp;quot;FileName&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;AttachmentType&amp;quot;: &amp;quot;string example 43&amp;quot;, &amp;quot;Data&amp;quot;: &amp;quot;base64 encoded&amp;quot; }] } } "
},
{
	"uri": "https://altinn.github.io/docs/api/meldinger/signere/",
	"title": "Signere meldinger",
	"tags": [],
	"description": "",
	"content": "Signering utføres med PUT operasjoner på Message elementet i Altinn API Skjema med vedlegg kan signeres samlet og det er mulig å signere enkelte skjema/vedlegg enkeltvis. PUT operasjon for signering av skjema med status signering Følgende request signerer det aktuelle skjemaet og skjemaet blir lagret i Arkivet i brukerens meldingsboks. Adressen til det signerte og arkiverte skjemaet vil returneres i Location respons header. Header PUT https://www.altinn.no/api/my/messages/a2312332 HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey Body { &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;1029&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 64, } PUT operasjon for signering av enkelte skjema i skjemasett og enkelte vedlegg Det er også mulig å kun signere enkelte skjema i et skjemasett og kun enkelte av vedleggene. Parameteren signinglocked angir om skjemaet/vedlegget må signeres. Dersom signinglocked=true må det aktuelle skjemaet/vedlegget signeres, signinglocked=false angir at signering er valgfritt. Hvilke skjema og vedlegg som skal signeres angis i SignatureSpec. Id for aktuelt skjema og Attachments må hentes fra message-ressursen før signering og angis i PUT operasjonen. Header PUT https://www.altinn.no/api/my/messages/a1231231 HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey Body { &amp;quot;Type&amp;quot;: &amp;quot;FormTask&amp;quot;, &amp;quot;ServiceCode&amp;quot;: &amp;quot;123&amp;quot;, &amp;quot;ServiceEdition&amp;quot;: 64, &amp;quot;_embedded&amp;quot; : { &amp;quot;SignatureSpec&amp;quot;: { &amp;quot;FormIds&amp;quot;: [12121,1232], &amp;quot;AttachmentIds&amp;quot;: [1123,1123] } } } Get operasjon for å hente signeringstekst Signeringsteksten spesifisert for signerinssteget skal presenters for brukeren før signering. Teksten kan lastes ned ved å følge lenken signingtest Header GET https://www.altinn.no/api/my/messages/a123123/signingtext HTTP/1.1 Host: www.altinn.no Accept: application/hal+json ApiKey: myKey "
},
{
	"uri": "https://altinn.github.io/docs/api/meldinger/slette/",
	"title": "Slette meldinger",
	"tags": [],
	"description": "",
	"content": "Sletting utføres med DELETE operasjoner på Message elementet i Altinn Følgende request sletter den aktuelle meldingen eller skjema. Når slettingen er utført returneres HTTP 204 - No Content. Header DELETE https://www.altinn.no/api/my/messages/a2312332 HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey "
},
{
	"uri": "https://altinn.github.io/docs/api/registrering/sluttbruker-api/",
	"title": "Sluttbruker API",
	"tags": [],
	"description": "",
	"content": "Registrer din applikasjon hos Altinn Før du skal bruke APIet må du ta stilling til hvilke ressurser i APIet du skal benytte og på hvilken måte (Read=lesetilgang, Write=skrivetilgang). API-nøkkelen du blir tildelt vil kun være gyldig for de ressursene du har bedt om tilgang til. Read på Message gir tilgang til å hente meldinger og skjema. Write gir tilgang til å sende inn skjema, samt slette meldinger og skjema. Read på Profile gir tilgang til å hente brukerens Navn, adresse og kontaktinformasjon, samt kontaktinformasjon for virksomheter brukeren kan representere Read på Organizations gir tilgang til å hente ut virksomhetene pålogget bruker kan representere. Read på Reportee gir tilgang til å hente ut alle avgivere (privatpersoner og virksomheter) pålogget bruker kan representere. Read på Lookup gir tilgang til å aksessere eksponerte innsynstjenester i REST API. Read/Write på Authorization gir tilgang til å se på eller endre delegerte roller og rettigheter på vegne av innlogget bruker eller virksomheter som brukere kan representere. Send følgende to skjemaer ferdig utfylt i en e-post til api@altinn.no Bestillingsskjema Egenerklæringsskjema Når vi har registrert informasjonen vil vi sende en API-nøkkel som du må benytte i din applikasjon. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/support/",
	"title": "Support",
	"tags": [],
	"description": "Består av generelle tjenester som veiledning, kurs, support og rapportering fra Altinn Sentralforvaltning mot Tjenesteeiere, Sluttbrukere, Sluttbrukersystemer og andre samarbeidspartnere i markedet. ",
	"content": "Består av generelle tjenester som veiledning, kurs, support og rapportering fra Altinn Sentralforvaltning mot Tjenesteeiere, Sluttbrukere, Sluttbrukersystemer og andre samarbeidspartnere i markedet. Brukersupport Altinn Brukerservice tilbyr veiledningstjenster omkring spørsmål som gjelder innlogging, hvordan finne fram til riktig tjeneste, forståelse av felles funksjonalitet og teknisk veiledning til skjemautfylling, innsending, signering og mye mer. Kurs og seminar Altinn Sentralforvaltning har som krav at alle som skal utvikle tjenester mot Altinn, må gjennomføre grunnkurs i tjenesteutvikling. Operativ veiledning Altinn Sentralforvaltning tilbyr rådgivning og veiledning for å kunne supportere tjenesteiere, sluttbrukersystemer og sluttbrukere. Rammeavtale Brønnøysundregistrene har inngått rammeavtaler på konsulentbistand for tjenesteutvikling i Altinn, som tjenesteeierne kan benytte seg av. Sluttbrukersystem Altinn tilbyr støtte for åpne grensesnitt, og har helt siden starten i 2003 jobbet for størst mulig grad av integrasjon mot datasystemene som brukes i næringslivet og blant de profesjonelle brukerne. Statistikk Altinn leverer ulike statistikker og rapporter til Tjenesteeiere. "
},
{
	"uri": "https://altinn.github.io/docs/api/registrering/tjenesteeier-api/",
	"title": "Tjenesteeier API",
	"tags": [],
	"description": "",
	"content": "Registrer din bruk av tjenesteeier API hos Altinn Registrering gir tilgang aller ressurser under tjenesteier API. Kun Read (GET) operasjoner er tilgjengelig inntil videre. Send følgende skjema ferdig utfylt i en e-post til api@altinn.no Bestillingsskjema Egenerklæringsskjema Når vi har registrert informasjonen vil vi sende en API-nøkkel som du må benytte i din applikasjon. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/",
	"title": "Tjenestekatalog",
	"tags": [],
	"description": "",
	"content": "Tjenestekatalogen skal gi en samlet oversikt over tjenestene vi tilbyr til enhver tid, samt sikre at våre samarbeidspartnere, tjenesteeiere, sluttbrukere og sluttbrukersystemer har en omforent forståelse av nytteverdien av tjenestene som Altinn-samarbeidet tilbyr. NB! Tjenestekatalogen er fortsatt under utvikling. Digital dialog Gir en oversikt over de tjenestenetypene som Altinn tilbyr samt annen funksjonalitet som understøtter digital dialog. Kanaler Gir en oversikt over hvilke alternative måter tjenesteeiere, sluttbrukersystem og andre kan integrere seg mot Altinn på. Support Består av generelle tjenester som veiledning, kurs, support og rapportering fra Altinn Sentralforvaltning mot Tjenesteeiere, Sluttbrukere, Sluttbrukersystemer og andre samarbeidspartnere i markedet. Sikkerhet Altinn tilbyr omfattende sikkerhetsfunksjonalitet for å gi en trygg og sikker opplevelse både for tjenesteeiere og sluttbrukere. "
},
{
	"uri": "https://altinn.github.io/docs/api/autentisering/virksomhetssertifikat/",
	"title": "Virksomhetssertifikat",
	"tags": [],
	"description": "Dersom brukeren skal representere en virksomhet som har et virksomhetssertifikat, kan dette benyttes sammen med en virksomhetsbruker opprettet på Altinn.no til å autentisere seg mot Altinns REST-api.",
	"content": "For å kunne tilby en autentiseringsmekanisme uten personlig bruker/pin-koder, tilbyr Altinns REST-api støtte for bruk av virksomhetssertifikat. Autentiseringen gir sikkerhetsnivå 3 og kan brukes mot alle API-ets ressurser på vegne av organisasjonen sertifikatet tilhører og andre som organisasjonen har rettigheter på vegne av. Dersom man utvikler en ekstern portalløsning der brukerne er innlogget med f.eks. ID-porten, kan IKKE sertifikatet brukes til å sende inn på vegne av disse. 1. Sette opp virksomhetsbruker Etter at man har installert sertifikat fra utsteder, må man registrere sertifikatet i Altinn og opprette en såkalt virksomhetsbruker. Dette er beskrevet her. 2. Tildele roller og rettigheter Når man logger inn med en virksomhetsbruker første gang, har ikke denne tilstrekkelig med roller og rettigheter for en organisasjon til å kunne verken se aktive skjema eller sende inn nye før roller/rettigheter har blitt delegert. 3. Autentisere seg mot Altinn API Send følgende POST-request mot APIet med brukernavn/passord for virksomhetsbruker opprettet i 1. POST https://www.altinn.no/api/authentication/authenticatewithpassword?ForceEIAuthentication HTTP/1.1 Host: www.altinn.no Content-Type: application/hal+json ApiKey: myKey { &amp;quot;UserName&amp;quot;: &amp;quot;MyUsername&amp;quot;, &amp;quot;UserPassword&amp;quot;: &amp;quot;MyPassword&amp;quot; } Dersom requesten genereres fra ekstern webside, vil brukeren få beskjed om å velge sertifikat av nettleser (trigges av parameteren ?ForceEIAuthentication). Ved programmatisk bruk fra f.eks. Java eller .NET legger man ved sertifikatet i HttpRequest.ClientCertificates. Eksempelkode ligger her (krever innlogging). Når man autentiserer seg mot REST-apiet ved hjelp av sertifikat, bruker man hele sertifikatet (eks .p12) - ikke .cer som man eksporterer for å opprette virksomhetsbruker i portal. "
},
{
	"uri": "https://altinn.github.io/docs/guides/tjenesteeier/lenketjenester/",
	"title": "Lenketjenester",
	"tags": [],
	"description": "",
	"content": "1 Innledning Implementasjonsguiden for lenketjenester gir en teknisk beskrivelse av hvordan lenketjenester i Altinn skal implementeres. Dokumentet er ment for utviklingsressurser hos tjenesteeiere som skal utvikle lenketjenester. Implementasjon av lenketjenesten i Altinn krever at tjenesteeiere også oppretter føderering av brukere fra IDPorten mot sin tjeneste. Dette dokumentet inneholder ikke detaljert informasjon om oppsett av føderering mot IDPorten, men beskriver hvordan løsningen for lenketjenester forholder seg til IDPorten, og hva dette innebærer for tjenesteeieren. 2 Definisjoner 3 Refererte dokumenter og linker Dokument Beskrivelse Implementasjonsguide for integrasjon mot Altinn.doc Dette dokumentet beskriver den overordnede arkitekturen for integrasjon mot Altinn, samt sikkerhetsmekanismer som benyttes for kommunikasjon mellom Altinn og eksterne systemer. Altinns selvbetjeningsportal https://selvbetjening.brreg.no/src/secure/main.jsp#services/home 4 Overordnet flyt for lenketjenesten Lenketjenester i Altinn kan benyttes av tjenesteeiere som ønsker å tilgjengeliggjøre sine tjenester via Altinn, og ta i bruk Altinns autorisasjonsmodell, men ønsker å beholde egen tjenestemotor. Lenketjenester defineres i TUL og migreres til SBL på linje med andre tjeneste¬typer, slik at avgiver- og rettighetskrav kan konfigureres i TUL og lenketjenester kan knyttes inn i samhandlingstjenester. Til forskjell fra lenketjenesten på Altinn I plattformen er det ikke lenger Altinn som leverer autentiseringsinformasjon til tjenesteeieren, derimot må tjenesteiere integrere seg med IDPorten for føderering av brukere (Single Sign On). Lenketjenesten har dermed tre aktører: IDPorten, som er Identity Provider og foretar autentisering av sluttbruker Altinn, som har lenketjenensten og foretar autorisasjonskontroll, tjenestekontroller og viderefører sluttbruker til tjeneste i ekstern portal. Tjenesteeier for ekstern tjeneste som tilbyr tjenesten til sluttbruker. Normalflyten for en lenketjeneste og hvordan de tre aktørene spiller sammen vil nå beskrives nærmere. Figur 1 – Flyt for lenketjeneste - autentisering Figur 1 viser IDPorten, Altinn, tjenesten og tjenesteeier i et standard «SAML-univers». Altinn er ikke Identity Provider og IDPorten utfører dermed all autentisering av sluttbrukere som deretter fødereres mot Altinn som er Service Provider. Altinn deltar i IDPortens Circle of trust sammen med tjenesteeiere for lenketjenester som også er Service Provider. Punkt 1a og 1b. Sluttbruker når lenketjenesten på to måter; via tjenestekatalogen i Altinn eller via dyplenke hos tjenenesteeier. Punkt 2. Når sluttbruker prøver å nå lenketjenesten i Altinn blir det sjekket om sluttbruker er pålogget Altinn. Dersom sluttbruker ikke er pålogget Altinn, blir brukeren ført til IDPorten for autentisering. Sluttbruker blir autentisert i IDPorten og IDPorten fødererer sluttbrukerens identitet til Altinn. Figur 2 – Flyt for lenketjenesten – Valg av avgiver og tjenestekontroll Altinn har verifisert sluttbrukerens identitet og sluttbrukeren er innenfor Circle of Trust med IDPorten og Altinn. Circle of Trust er et begrept innenfor SAML som beskriver systemer med gjensidig tillitt. Punkt 3. og Punkt 4. Sluttbrukeren blir ført til valg av avgiver siden i Altinn. Avgiverkontroll og eventuelle tjenestekontroller som er satt på lenketjenesten i TUL blir utført. Punkt 5. Dersom sluttbruker og valgt avgiver tilfredstiller kontrollene satt på tjenesten, blir brukeren videreført til den eksterne tjenesten med en temporær nøkkel lagt til URL. Figur 3 - Flyt for lenketjenesten - Autorisasjonskontroll Tjenesteeier har verifisert at sluttbrukeren er autentisert og sluttbruker er innenfor Circle of Trust med IDPorten, Altinn og Tjenesteeier. Punkt 6. Når sluttbruker kommer til den beskyttede tjenesten hos tjenesteeier, må tjenesteeier sjekke om sluttbrukeren er pålogget i tjenesteeiers løsning. Dersom sluttbrukeren ikke er pålogget i tjenesteeiers løsning, verifiseres det at brukeren er pålogget i IDPorten og IDPorten fødererer sluttbrukerens identitet til tjenesteeier. Punkt 7. Tjenesteeier bruker den temporære nøkkelen lagt på URL (tempkey) i webservicekall mot Altinn og henter avgiver valgt av sluttbruker i Altinn. Punkt 8. Tjenesteeier sender XACML request i webservicekall til Altinn for å få bekreftet at sluttbruker har rettigheter til å utføre spesifisert operasjon på lenketjenesten til tjenesteeieren for valgt avgiver. Punkt 9. Brukeren kan nå lenketjenesten. 5 Implementasjon av lenketjenesten. De påfølgende kapitlene vil gi en teknisk detaljert beskriveles av hvordan tjenesteiere bør implementere lenketjenesten i tjenesteeieres applikasjon. 5.1 Utvikling av tjenesteiers eksterne tjeneste Hvordan tjenesten skal fungere i ekstern portal har Altinn ikke et forhold til, og tjenesteier har selv ansvaret for utviklingen av applikasjonen som driver den eksterne tjenesten. Men, i forhold til lenketjenesten i Altinn er det tre hovedfunksjoner tjenesteier må implementere i sin løsning. 1. Føderering av identitet fra IDPorten Ressursene som inngår i tjenesten, og dermed er tilgjengelige for sluttbrukere, må beskyttes ved bruk av SAML for føderering av brukerindentiet fra IDPorten. Hvordan dette løses kan tjenesteier selv avgjøre innen for de kravene som stilles av IDPorten. Det som er viktig for lenketjenesten er at sluttbrukers identitet blir verifisert og mottatt i applikasjonen. 2. Hente avgiver med tempkey fra Altinn. Når sluttbrukeren overføres fra Altinn til den eksterne tjenesten i en http GET request blir en temporær nøkkel (tempkey) lagt til URL. Denne temporære nøkkelen skal benyttes i webservicekall til Altinn for å hente avgiveren brukeren har valgt i portalen. Det er altså viktig at den temporære nøkkelen kan videreføres igjennom fødereringen mot IDPorten, og dermed kan det være hensiktsmessig at applikasjonen mellomlagrer den temporære nøkkelen før sluttbrukeren blir «redirected» til IDPorten i forbindelse med føderering. 3. Sjekke sluttbrukers autorisasjon ved bruk av webservice Når identiteten til sluttbrukeren er fastslått etter fødereringen fra IDporten, og avgiver er mottatt i responsen fra Altinns webservice, må applikasjonen benytte Altinns autorisasjonswebservice for å få bekreftet at sluttbruker har rettigheter til å utføre spesifisert operasjon på lenketjenesten til tjenesteeieren for valgt avgiver. 5.2 Integrasjon mot IDPorten ID-Porten er Identity Provider for lenketjenester, og tjenesteeiere i Altinn som har lenketjenester må etablere en egen, standard, samarbeidsavtale med ID-porten. Dette fordi en slik tjenesteeier vil måtte ha en direkte integrasjon mot ID-porten. DIFI har utarbeidet en tilslutningsguide som beskriver den jobben som må gjøres for å sette opp SAML-integrasjon mot IDPorten. Tilslutningsguiden finnes under ID-Porten &amp;gt; Dokumentasjon i Samarbeidsportalen til Difi. 5.3 Utvikle Lenketjenesten i TUL Lenketjenestene utvikles i TUL på samme måte som andre tjenestetyper, ved at man først oppretter en tjeneste med tjenestetype Lenketjeneste, og deretter har utgaver av tjenesten på nivået under. Det er utgavene som migreres til SBL og er tilgjengelig for sluttbruker. Når tjenesten opprettes blir det generert en ekstern tjenestekode, som er unik for hver enkelt tjeneste. Sammen med ekstern utgavekode, som man setter på Utgaveparametre, danner ekstern tjenestekode en unik identifikator til hver utgave. Ekstern tjenestekode og ekstern utgavekode brukes både i direktelenke til tjenesten i Altinn, samt i autorisasjonsforespørselen mot Altinn. Det som skiller lenketjenestene fra andre tjenestetyper er at det på lenketjenestene legges inn en URL til tjenesten på tjenesteeiers side i utgavespesifikasjonen, og siden test-URL og prod-URL er forskjellig, må man derfor alltid opprette en test-utgave og en prod-utgave. På utgaveparametre definerer man lenken som skal peke mot skjema: - Utgavenavn – dette er navnet som sluttbruker ser i SBL - Kortnavn – vises bare i TUL - Ekstern utgavekode – numerisk kode som må være unik innen hver tjeneste. Sammen med tjenestekoden utgjør tjenesteutgavekoden en unik identifikator av tjenesesteutgaven, og dyplenken til skjema vil bestå av disse to verdiene - Hovedspråk – angi hvilket hovedspråk tjenesten skal finnes på - Gyldighetsdatoer – angi gyldig fra-dato og gyldig til-dato - Instansierings-/serivcekontroller - Altinn verifiserer at valgt avgiver er over 18 år før brukeren gis tilgang til lenketjenesten. Er kun gyldig dersom avgiver er person. - Altinn verifiserer at innlogget bruker har registerert personlig epostadresse i profilen før brukeren gis tilgang til lenketjenesten. - Lenketjeneste detaljer – her legges url til tjenesten på tjenesteeiers skjemamotor inn - Logging og sporing – angi om loggings og sporingsinfo skal lagres i tredjeparts arkiv, og evt hvor lenge. Minimum 10 år hvis logging/sporing skal benyttes. - Avgiverkrav – angi hvike aktører/avgivere som skal kunne bruke tjenesten. Tilgjengelige valg er; - Privatperson - Juridisk enhet - Bedrift - Konkursbo - Bedrift eller juridisk enhet - Person eller juridisk enhet - Bedrift, juridisk enhet eller konkursbo - Alle aktører - Sikkerhetsnivå – lenketjenester i Altinn 2 må settes opp med sikkerhetsnivå 3 eller 4, fordi IDPorten benyttes til autentisering og de tilbyr nivå 3 og 4. - Virksomhetsbrukere – angi om sluttbrukere skal kunne bruke virksomhetssertifikat til å logge inn. Med virksomhetssertifikat er det ingen knytning til fødselsnummeret til vedkommende som bruker tjenesten. - Samhandlingstjeneste – lenketjenester kan defineres til å kunne inngå i en samhandlingstjeneste. Da settes det et kryss på utgaven her, og utgaven vil være valgbar som tilgjengelig tjeneste for samhandlingstjenester. Altinn rolle På samme måte som andre tjenestetyper, må lenketjenestene knyttes til en eller flere Altinn-roller slik at tjenestene blir tilgjengelig for sluttbrukerne. Altinn-rollene er knyttet til et sett med eksterne roller fra Enhetsregisteret (ER), og når tjenesteeier skal velge hvilke(n) Altinn-rolle&amp;reg; som skal gi tilgang til tjenesten, er det viktig å tenke over en del ting; - Hvem skal bruke tjenesten – det må velges en eller flere roller som sikrer at alle aktuelle avgivere har tilgang til tjenesten. Ulike organisasjonstyper registrerer ulike typer eksterne roller i ER, og tjenesteeier må velge en Altinn-rolle som dekker ulike organisasjonstyper. F.eks vil et enkeltpersonsforetak kanskje bare ha innehaver registrert, mens et AS har både daglig leder, styreleder og revisor. Hvis både ENK’et og AS’et skal kunne benytte tjenesten, må Altinn-rollen som knyttes til tjenesten være knyttet til både Innehaver og Daglig leder, Styreleder eller Revisor. Tilgjengelige roller finnes på &amp;ldquo;rolleadministrasjonssiden&amp;rdquo; i TUL og i portalhjelpen i SBL. Skal ulike roller har tilgang til å utføre ulike operasjoner på tjenesten? Dette kan man skille på i rolletilknytningen. Vær i midlertid oppmerksom på at Altinn kun sjekker at man har lese-tilgang til tjenesten ved instansiering. Hvis man ønsker en mer detaljert autorisasjonssjekk, må dette implementeres i tjenesteeiers tjeneste-applikasjon. 5.4 Bruk av Altinns autorisasjonswebservice Altinns webservice for autorisasjon kan benyttes av tjenesteiere til å foreta autorisasjonsbeslutninger basert på rolle og rettighetsregler og delegeringer som ligger i Altinns autorisasjonsdatabase. Dette gjør at eksterne tjenester som ikke benytter Altinns tjenestemotor likevel kan benytte Altinns autorisasjonsmodell på tjenesten. For lenketjenester, for eksempel en tjeneste hvor avgiver kan være en organisasjon, er dette sentralt. Disse tabellene viser endepunktene og operasjonene for Altinns to webservices for autorisasjon som er aktuelle for lenketjenesten. AuthorizationAdministration https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc?wsdl Input Beskrivelse Endepukt operasjon GetReporteeByTempKey https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc GetReporteeByTempKey GetReportees https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc GetReportees AuthorizationDecisionPointExternal https://www.altinn.no/AuthorizationExternal/AdministrationExternal.svc?wsdl Basis operasjon URI/endepunkt Endepukt operasjon ExternalReporteeBE https://www.altinn.no/AuthorizationExternal/AuthorizationDecisionPointExternal.svc AuthorizeAccessExternal Input Beskrivelse tempKey Nøkkel som angitt i lenketjenestens request URL, vil utgå etter at informasjon er hentet ut – pålagt parameter. Returverdi Beskrivelse ExternalReporteeBE ExternalReporteeBE-objekt. Returverdi Beskrivelse Name Avgivers navn OrganizationNumber Organisasjonsnummer for denne avgiveren hvis dette er en organisasjon. SSN Fødselsnummer for denne avgiveren hvis dette er en person. Reportee Type Typebeskrivelse for hvilken type avgiver dette er: None, Person, Organization, eller SelfIdentified (ikke et praktisk mulig scenario i denne sammenhengen). Eksempel Request &amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt; &amp;lt;soap:Envelope xmlns:soap=&amp;quot;http://www.w3.org/2003/05/soap-envelope&amp;quot; xmlns:ns=&amp;quot;http://www.altinn.no/services/Authorization/Administration/2010/10&amp;quot;&amp;gt; &amp;lt;soap:Header/&amp;gt; &amp;lt;soap:Body&amp;gt; &amp;lt;ns:GetReporteeByTempKey&amp;gt; &amp;lt;ns:tempKey&amp;gt;76d4afac-f228-4055-bde5-f4aae0c6af8f&amp;lt;/ns:tempKey&amp;gt; &amp;lt;/ns:GetReporteeByTempKey&amp;gt; &amp;lt;/soap:Body&amp;gt; &amp;lt;/soap:Envelope&amp;gt; XML SOAP request Eksempel Response &amp;lt;s:Envelope xmlns:s=&amp;quot;http://www.w3.org/2003/05/soap-envelope&amp;quot; xmlns:a=&amp;quot;http://www.w3.org/2005/08/addressing&amp;quot; xmlns:u=&amp;quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&amp;quot;&amp;gt; &amp;lt;s:Header&amp;gt; &amp;lt;a:Action s:mustUnderstand=&amp;quot;1&amp;quot;&amp;gt;http://www.altinn.no/services/Authorization/Administration/2010/10/IAuthorizationAdministrationExternal/GetReporteeByTempKeyResponse&amp;lt;/a:Action&amp;gt; &amp;lt;o:Security s:mustUnderstand=&amp;quot;1&amp;quot; xmlns:o=&amp;quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&amp;quot;&amp;gt; &amp;lt;u:Timestamp u:Id=&amp;quot;_0&amp;quot;&amp;gt; &amp;lt;u:Created&amp;gt;2012-11-29T07:19:14.278Z&amp;lt;/u:Created&amp;gt; &amp;lt;u:Expires&amp;gt;2012-11-29T07:24:14.278Z&amp;lt;/u:Expires&amp;gt; &amp;lt;/u:Timestamp&amp;gt; &amp;lt;/o:Security&amp;gt; &amp;lt;/s:Header&amp;gt; &amp;lt;s:Body&amp;gt; &amp;lt;GetReporteeByTempKeyResponse xmlns=&amp;quot;http://www.altinn.no/services/Authorization/Administration/2010/10&amp;quot;&amp;gt; &amp;lt;GetReporteeByTempKeyResult xmlns:b=&amp;quot;http://schemas.altinn.no/services/Authorization/Administration/2012/11&amp;quot; xmlns:i=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&amp;gt; &amp;lt;b:Name&amp;gt;HÅKON TRANA&amp;lt;/b:Name&amp;gt; &amp;lt;b:OrganizationNumber i:nil=&amp;quot;true&amp;quot;/&amp;gt; &amp;lt;b:ReporteeType&amp;gt;Person&amp;lt;/b:ReporteeType&amp;gt; &amp;lt;b:SSN&amp;gt;05116602352&amp;lt;/b:SSN&amp;gt; &amp;lt;/GetReporteeByTempKeyResult&amp;gt; &amp;lt;/GetReporteeByTempKeyResponse&amp;gt; &amp;lt;/s:Body&amp;gt; &amp;lt;/s:Envelope&amp;gt; Feilsituasjoner Dersom nøkkelen er ugyldig (for eksempel, på grunn av timeout, eller tidligere bruk) vil operasjonen returnere en Altinnfault. Den eksterne tjenesten bør da presentere en feilmelding for sluttbruker, og gi sluttbruker mulighet til å gå tilbake til Altinn (dyplenken til tjenesten) for å starte tjenesten på ny. 5.4.2 AuthorizationDecisionPointExternal.AuthorizeAccessExternal Når applikasjonen som driver den eksterne tjenesten har verifisert identiten til brukeren med føderering fra IDPorten, og mottatt avgiver (valgt av sluttbruker) ved kall til GetReporteeByTempKey, må det verifiseres at sluttbruker har rettighet til å benytte tjenesten for valgt avgiver. Dette gjøres med kall til AuthorizationDecisionPointExternal.AuthorizeAccesExternal. AuthorizeAccessExternal operasjonen benytter XACML standarden og regler lagret i Altinn til å returnere en autorisasjonsbeslutning. Besluttningsgrunnlaget til autorisasjon for tjenester er de regler (rolleknytninger) som tjenesteeier har satt på lenketjenesten i TUL. Det kreves en XACMLRrquest som gir et XACML standardisert svar XACML-forespørselen skal inneholde en kombinasjon av følgende elementer: Foreldre-node AttributeId Gyldige verdier i AttributeValue Eksempel Subject urn:oasis:names:tc:xacml:2.0:subject: urn:altinn:ssn Utførende brukers fødselsnummer &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml: 2.0:subject:urn:altinn:ssn&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;07037512345&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn Avgivers fødselsnummer &amp;lt;AttributeAttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0: resource:urn:altinn:reportee-ssn&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;010203401944&amp;lt;/AttributeValue&amp;gt;&amp;lt;/Attribute&amp;gt; Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno Avgivers organisasjonsnnummer &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0: resource:urn:altinn:reportee-orgno&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;910453777&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode Eksterne tjenestekoder &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;2298&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; Resource urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode Ekstern utgavekode (tilhørende overnevnte tjenestekode) &amp;lt;/Attribute&amp;gt; &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;60804&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; Action urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id Read Write Sign ArchiveRead ArchiveDelete ServiceOwnerArchiveRead Delegate Hvilke operasjoner som kan benyttes for den aktuelle lenketjenesten defineres i TUL. &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;Sign&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; Environment urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment YT2 YT AT8 AT3 AT4 AT5 TT1 TT2 Prod &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0: action:urn:altinn:environment&amp;quot;DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;PR&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; XACML-forespørselen skal inneholde kun et Resource element med kombinasjon av enten avgivers fødselsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-ssn) eller avgivers organisasjonsnummer (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reportee-orgno), samt ekstern tjenestekode og utgavekode (urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode og urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode). Det må angis hvilket miljø requesten gjelder i Environment elementet (urn:oasis:names:tc:xacml:2.0:action:urn:altinn:environment). Altinn spesifikke elementer XACML-respons: Foreldre-node AttributeId Gyldige verdier i AttributeValue Eksempel Obligation urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:authenticationlevel Autentiseringsnivå 0, 1, 2, 3, 4 Hvilke nivå som skal kreves for en resurs. &amp;lt;tns:Obligation FulfillOn=&amp;quot;Permit&amp;quot; ObligationId=&amp;quot;&amp;quot;&amp;gt; &amp;lt;tns:AttributeAssignment AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:obligation:urn:altinn:authenticationlevel&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;tns:AttributeValue DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#integer&amp;quot;&amp;gt;3&amp;lt;/tns:AttributeValue&amp;gt; &amp;lt;/tns:AttributeAssignment&amp;gt; &amp;lt;/tns:Obligation&amp;gt; Nedenfor vises eksempler på gyldig forespørsler: AuthorizationRequest: &amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt; &amp;lt;Request xmlns=&amp;quot;urn:oasis:names:tc:xacml:2.0:context:schema:os&amp;quot; xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot; xsi:schemaLocation=&amp;quot;urn:oasis:names:tc:xacml:2.0:context:schema:os http://docs.oasis-open.org/xacml/access_control-xacml-2.0-context schemaos.xsd&amp;quot;&amp;gt; &amp;lt;!-- Altinn Sample Request. --&amp;gt; &amp;lt;!-- This authorization request tries to verify if user --&amp;gt; &amp;lt;!-- 06069460079 is allowed to perform sign operation --&amp;gt; &amp;lt;!-- on behalf of reportee 910453777 --&amp;gt; &amp;lt;!-- on service 2298, edition 60804 --&amp;gt; &amp;lt;Subject&amp;gt; &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:subject:urn:altinn:ssn&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;06069460079&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; &amp;lt;/Subject&amp;gt; &amp;lt;Resource&amp;gt; &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:reporte-orgno&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;910453777&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalservicecode&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;2298&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:resource:urn:altinn:externalserviceeditioncode&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;60804&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; &amp;lt;/Resource&amp;gt; &amp;lt;Action&amp;gt; &amp;lt;Attribute AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:action:urn:altinn:action-id&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;AttributeValue&amp;gt;Sign&amp;lt;/AttributeValue&amp;gt; &amp;lt;/Attribute&amp;gt; &amp;lt;/Action&amp;gt; &amp;lt;/Request&amp;gt; Operasjonen returnerer XML som også følger XACML standarden. Under vises et eksempel på en response. AuthorizationResponse: &amp;lt;xacml:Response xmlns:tns=&amp;quot;urn:oasis:names:tc:xacml:2.0:policy:schema:os&amp;quot; xmlns:xacml=&amp;quot;urn:oasis:names:tc:xacml:2.0:context:schema:os&amp;quot; xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot; xsi:schemaLocation=&amp;quot;urn:oasis:names:tc:xacml:2.0:context:schema:os http://docs.oasis-open.org/xacml/2.0/access_control-xacml-2.0-context-schema-os.xsd&amp;quot;&amp;gt; &amp;lt;xacml:Result ResourceId=&amp;quot;&amp;quot;&amp;gt; &amp;lt;xacml:Decision&amp;gt;Permit&amp;lt;/xacml:Decision&amp;gt; &amp;lt;xacml:Status&amp;gt; &amp;lt;xacml:StatusCode Value=&amp;quot;urn:oasis:names:tc:xacml:2.0:response:urn:altinn:ok&amp;quot; /&amp;gt; &amp;lt;xacml:StatusMessage&amp;gt;&amp;lt;/xacml:StatusMessage&amp;gt; &amp;lt;/xacml:Status&amp;gt; &amp;lt;tns:Obligations&amp;gt; &amp;lt;tns:Obligation FulfillOn=&amp;quot;Permit&amp;quot; ObligationId=&amp;quot;&amp;quot;&amp;gt; &amp;lt;tns:AttributeAssignment AttributeId=&amp;quot;urn:oasis:names:tc:xacml:2.0:obligation:urn:altinn:authenticationlevel&amp;quot; DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#string&amp;quot;&amp;gt; &amp;lt;tns:AttributeValue DataType=&amp;quot;http://www.w3.org/2001/XMLSchema#integer&amp;quot;&amp;gt;3&amp;lt;/tns:AttributeValue&amp;gt; &amp;lt;/tns:AttributeAssignment&amp;gt; &amp;lt;/tns:Obligation&amp;gt; &amp;lt;/tns:Obligations&amp;gt; &amp;lt;/xacml:Result&amp;gt; &amp;lt;/xacml:Response&amp;gt; Det er opprettet en Altinn-tilpasset XACML context XSD som kan brukes til å validere XACML request fra tjenesteeier. Denne inneholder de gyldige attributtene for XACML requester som sendes til Altinn. Altinn XACML context XSD ligger på Altinnnett under systemdokumentasjon. Autorisasjonsbeslutning Dersom XACML responsen fra Altinn (xacml:DecisionPermit/xacml:Decision) indikerer at brukeren har rettighet til å utføre spesifisert operasjon for spesifisert avgiver på spesifisert tjenesteutgave, kan brukeren gis adgang til den eksterne tjenesten. Men, dersom XACML responsen fra Altinn (xacml:DecisionDeny/xacml:Decision) indikerer at brukeren IKKE har rettighet til å utføre operasjoen, må applikasjonen nekte sluttbruker adgang til den eksterne tjenesten. Da bør sluttbruker gis mulighet til å velge avgiver på ny, og dette kan gjøres på flere måter: Sluttbruker kan sendes tilbake til Altinn (via dyplenke til tjenesten) for å velge avgiver på ny. Applikasjonen for eksterne tjenesten kan hente liste over sluttbrukers mulige avgivere ved kall til AuthorizationAdministration.GetReportees (se kapittel ) og gi sluttbruker mulighet til å velge avgiver på nytt i den eksterne tjenesten. Uavhengig av valgt metode for å velge avgiver på nytt, må det gjøre et påfølgende kall til AuthorizeAccessExternal metoden. Feilsituasjoner Dersom Altinn ikke klarte å gjøre en korrekt beslutning for parameterne spesifisert i requesten, vil XACML responsen fra Altinn indikerere dette (xacml:DecisionIndeterminate/xacml:Decision). Ved annen teknisk feil vil operasjonen returnere en Altinnfault. Den eksterne tjenesten bør da presentere en feilmelding for sluttbruker, og gi sluttbruker mulighet til å gå tilbake til Altinn (dyplenken til tjenesten) for å starte tjenesten på ny. 5.4.3 AuthorizationAdministrationExternal.GetReportees Metoden GetReportees returnerer alle mulige avgivere for en person (identifisert med fødselsnummer) uavhengig av hvilke roller/rettigheter denne personen har for avgiveren. Dermed må det også ved bruk av denne tjenesten utføres en påfølgende autorisasjonssjekk med XACML webservice mot en lenketjeneste som rollekravene for den eksterne tjenesten kan knyttes til. Dersom tjenesteier ønker å la sluttbrukeren velge avgiver i egen tjeneste som standard, kan applikasjonen som driver ekstern tjeneste oppnå dette ved å bruke denne metoden. Da må tjenesteeier gjøre følgende: Opprette lenketjeneste i Altinn og knytte den til en Altinn rolle. Dette gjør at roller/rettigheter for tjenesten kan delegeres i Altinns rolledelegeringside. Implementere valg av avgiver i egen portal og bruke GetReportees til å få liste over mulige avgivere fra Altinn. Implementere bruk av AuthorizeAccessExternal til å sjekke at brukeren har rettighet på tjenesten til til tjenesteier for valgt avgiver. Da trenger ikke sluttbrukerne å gå innom Altinn for å bruke tjenesten. Men delegering av roller og rettigheter til tjenesten må fremdeles gjøres i Altinn. Dersom tjenesteeier ikke ønsker å benytte valg av avgiver i Altinn kan de heller ikke benytte følgende servicekontroller på tjenesten: Kontroll av korrekt avgivertype (person, bedrift, juridisk enhet etc) Kontroll av at avgiver er 18. år Kontroll av at pålogget bruker har registrert epost i sin profil. Tabellen under beskriver datakontrakten for operasjonen: Input Beskrivelse userSSN Fødselsnummeret til brukeren det skal hentes avgivere for – pålagt parameter. retrieveInActiveReportee Flagg for å sette om også inaktive avgivere skal returneres, standard False – valgfri parameter. RetrieveSubEnitiy Flagg for å sette om også underenheter skal returneres, standard False – valgfri parameter. maximumReporteeCount Verdi for maksimum antall avgivere som skal returneres, standard satt til alle – valgfri parameter. Returverdi ExternalReporteeBEList Liste med ExternalReporteeBE-objekter Name Avgivers navn OrganizationNumber Organisasjonsnummer for denne avgiveren hvis dette er en organisasjon SSN Fødselsnummer for denne avgiveren hvis dette er en person ReporteeType Typebeskrivelse for hvilken type avgiver dette er: None, Person, Organization, eller SelfIdentified (ikke et praktisk mulig scenario i denne sammenhengen) Eksempel Request/Response GetReportees Request &amp;lt;soap:Envelope xmlns:soap=&amp;quot;http://www.w3.org/2003/05/soap-envelope&amp;quot; xmlns:ns=&amp;quot;http://www.altinn.no/services/Authorization/Administration/2010/10&amp;quot;&amp;gt; &amp;lt;soap:Header/&amp;gt; &amp;lt;soap:Body&amp;gt; &amp;lt;ns:GetReportees&amp;gt; &amp;lt;ns:userSSN&amp;gt;05116602352&amp;lt;/ns:userSSN&amp;gt; &amp;lt;!--Optional:--&amp;gt; &amp;lt;ns:retrieveInActiveReportee&amp;gt;false&amp;lt;/ns:retrieveInActiveReportee&amp;gt; &amp;lt;!--Optional:--&amp;gt; &amp;lt;ns:retrieveSubEnitiy&amp;gt;true&amp;lt;/ns:retrieveSubEnitiy&amp;gt; &amp;lt;!--Optional:--&amp;gt; &amp;lt;ns:maximumReporteeCount&amp;gt;10&amp;lt;/ns:maximumReporteeCount&amp;gt; &amp;lt;/ns:GetReportees&amp;gt; &amp;lt;/soap:Body&amp;gt; &amp;lt;/soap:Envelope&amp;gt; GetReportees Response &amp;lt;s:Envelope xmlns:s=&amp;quot;http://www.w3.org/2003/05/soap-envelope&amp;quot; xmlns:a=&amp;quot;http://www.w3.org/2005/08/addressing&amp;quot; xmlns:u=&amp;quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd&amp;quot;&amp;gt; &amp;lt;s:Header&amp;gt; &amp;lt;a:Action s:mustUnderstand=&amp;quot;1&amp;quot;&amp;gt;http://www.altinn.no/services/Authorization/Administration/2010/10/IAuthorizationAdministrationExternal/GetReporteesResponse&amp;lt;/a:Action&amp;gt; &amp;lt;o:Security s:mustUnderstand=&amp;quot;1&amp;quot; xmlns:o=&amp;quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd&amp;quot;&amp;gt; &amp;lt;u:Timestamp u:Id=&amp;quot;_0&amp;quot;&amp;gt; &amp;lt;u:Created&amp;gt;2012-11-29T09:06:49.796Z&amp;lt;/u:Created&amp;gt; &amp;lt;u:Expires&amp;gt;2012-11-29T09:11:49.796Z&amp;lt;/u:Expires&amp;gt; &amp;lt;/u:Timestamp&amp;gt; &amp;lt;/o:Security&amp;gt; &amp;lt;/s:Header&amp;gt; &amp;lt;s:Body&amp;gt; &amp;lt;GetReporteesResponse xmlns=&amp;quot;http://www.altinn.no/services/Authorization/Administration/2010/10&amp;quot;&amp;gt; &amp;lt;GetReporteesResult xmlns:b=&amp;quot;http://schemas.altinn.no/services/Authorization/Administration/2012/11&amp;quot; xmlns:i=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&amp;gt; &amp;lt;b:ExternalReporteeBE&amp;gt; &amp;lt;b:Name&amp;gt;Otta Transport AS Konkursbo&amp;lt;/b:Name&amp;gt; &amp;lt;b:OrganizationNumber&amp;gt;910453092&amp;lt;/b:OrganizationNumber&amp;gt; &amp;lt;b:ReporteeType&amp;gt;Organization&amp;lt;/b:ReporteeType&amp;gt; &amp;lt;b:SSN i:nil=&amp;quot;true&amp;quot;/&amp;gt; &amp;lt;/b:ExternalReporteeBE&amp;gt; &amp;lt;b:ExternalReporteeBE&amp;gt; &amp;lt;b:Name&amp;gt;MJOSUNDET OG RYPEFJORD&amp;lt;/b:Name&amp;gt; &amp;lt;b:OrganizationNumber&amp;gt;910059106&amp;lt;/b:OrganizationNumber&amp;gt; &amp;lt;b:ReporteeType&amp;gt;Organization&amp;lt;/b:ReporteeType&amp;gt; &amp;lt;b:SSN i:nil=&amp;quot;true&amp;quot;/&amp;gt; &amp;lt;/b:ExternalReporteeBE&amp;gt; &amp;lt;b:ExternalReporteeBE&amp;gt; &amp;lt;b:Name&amp;gt;HÅKON TRANA&amp;lt;/b:Name&amp;gt; &amp;lt;b:OrganizationNumber i:nil=&amp;quot;true&amp;quot;/&amp;gt; &amp;lt;b:ReporteeType&amp;gt;Person&amp;lt;/b:ReporteeType&amp;gt; &amp;lt;b:SSN&amp;gt;05116602352&amp;lt;/b:SSN&amp;gt; &amp;lt;/b:ExternalReporteeBE&amp;gt; &amp;lt;/GetReporteesResult&amp;gt; &amp;lt;/GetReporteesResponse&amp;gt; &amp;lt;/s:Body&amp;gt; &amp;lt;/s:Envelope&amp;gt; Feilsituasjoner Dersom sluttbrukeren (spesifisert med fødselsnummer) ikke har gitt samtykke til bruk av Altinn som privatperson eller for andre, vil GetReportees returnere en tom liste. Dersom sluttbruker (spesifisert med fødselsnummer) ikke har gitt samtykke til å rapportere på vegne av organisasjoner eller andre personer, vil GetReportees kun returnere sluttbruker selv som mulig avgiver. Dersom sluttbrukeren (spesifisert med fødselsnummer) ikke har gitt personlig samtykke i Altinn, vil GetReportees kun returnere organisasjoner eller andre personer som gyldige avgivere for sluttbrukeren. I disse tilfellene må sluttbruker informeres om dette, og gis mulighet til å logge inn i Altinn for å gi sitt samtykke. Dersom det fødselsnummeret spesifisert er ugyldig vil Altinn returnere en Altinnfault 6 Feilsituasjoner i produksjon Dersom det oppdages feil ved bruk av lenketjenesten, er det viktig at det indentifiseres hvor feilen ligger. Feil i forbindelse med føderering fra IDPorten skal meldes til IDPorten og ikke til Altinn. Dersom lenken til den eksterne tjenesten i Altinn er korrekt, det ikke er feil i forbindelse med føderering fra IDPorten, og tjenesteeier er sikker på at feilen ikke ligger i egen applikasjon bør tjenesteeier kontakte ASF. Feilmelding kan da sendes til tjenesteeier@altinn.no Feilmeldingen må inneholde informasjon om tjenesten, tidspunkt for feilen og hvilke brukere og avgivere feilen dreier seg om. SOAP request og response for kall til Altinns autorisasjonswebservices må også vedlegges feilmeldingen. "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/status/",
	"title": "Status",
	"tags": [],
	"description": "",
	"content": "Dette er siste overordnede status for utviklingen av tjenester 3.0. Status vil oppdateres etter hvert som ny informasjon er tilgjengelig. Arbeid med konsepter, arkitektur og veivalg (2015-2016) Teknisk PoC utviklet for å verifisere konsepter og veivalg (april-juni 2016) Presentere PoC og konsepter for tjenesteutviklere og arkitekter for å få feedback (juni-september 2016) Presentasjon og demo på servicelederseminar med tjenesteeierne (14. september 2016) Levert satsingsforslag for 2018, tjenester 3.0 sentral del av satsing (november 2016) Altinndagen 2016, der presentasjon om satsingsområde &amp;ldquo;Brukerorientering&amp;rdquo; viste hvordan en fremtidig tjeneste kan fungere (28. november 2016) Tjenester 3.0 som produkt i Altinn produktstrategi (versjon 1.0 var ferdig 10. januar 2017, versjon 1.1 ble ferdigstilt 2. mars) Altinn Design System utvikles med målsetting om å kunne gjenbruke UI-patterns på tvers av tekniske løsninger (ferdigstilles frem mot sommeren 2017) Utvikle en begrenset alpha slik at man kan lage enkle tjenester. Starte Enkeltpersonforetak brukes som case (utvikling tentativt sommeren 2017, alpha tilgjengelig høsten 2017) Arkitekturarbeid og arbeid med løsningsdesign, involvering av tjenesteeiere (høsten 2017) Avklaringer finansiering satsingsforslag for 2018, tjenester 3.0 sentral del av satsing (oktober 2017) "
},
{
	"uri": "https://altinn.github.io/docs/guides/",
	"title": "Guider",
	"tags": [],
	"description": "",
	"content": "I Altinn har vi flere guider, som er vår dokumentasjon for hvordan man tar i bruk Altinn som tjenesteeier. I første omgang så konverterer vi eksisterende dokumentasjon, før vi splitter opp, forenkler og forbedrer. Disse vil med andre ord forbedres kraftig i tiden fremover, så det er foreløpig ikke nødvendig å melde feil. Altinn API Tjenesteeier Lenketjenester Definisjoner Referanser "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/satsingsforslag2018/",
	"title": "Satsingsforslag 2018 - Oppsummering",
	"tags": [],
	"description": "",
	"content": "For å nå målsettingene i Regjeringens satsingsområde Konkurransekraft for norske arbeidsplasser, Digital agenda og å nå målene i Altinn-strategien, foreslås det å modernisere Felleskomponenten Altinn. Videreutvikling av Altinn legger til rette for økt realiseringstakt av helhetlige digitale offentlige sluttbrukertjenester, og muliggjør prinsippet om at informasjon til det offentlige skal leveres kun én gang. Selvbetjente verktøy for tjenesteproduksjon skal forenkle, og det skal legges bedre til rette for samhandling, innovasjon og informasjonsdeling ved bruk av Altinn. Formålet med tiltaket er: Helhetlig offentlige sluttbrukertjenester med brukeren i sentrum Informasjon til det offentlige skal leveres kun én gang "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/",
	"title": "Tjenester 3.0",
	"tags": [],
	"description": "",
	"content": "Dette er levende dokumentasjon (under arbeid) for tjenester 3.0, neste generasjon av offentlige tjenester. Etter hvert vil også kildekoden for 3.0 legges ut åpent på github.com/altinn. Målsettinger Status Satsingsforslag Arkitektur FAQ "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/dev-in-code/",
	"title": "Utvikling i kode-editor",
	"tags": [],
	"description": "",
	"content": "TODO "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/dev-in-browser/",
	"title": "Utvikling i nettleser",
	"tags": [],
	"description": "",
	"content": "TODO "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/architecture/",
	"title": "Arkitektur",
	"tags": [],
	"description": "",
	"content": "Under arbeid&amp;hellip; Git Det distribuerte versjonskontrollsystemet Git er nå det klart mest brukte versjonskontrollsystemet for utvikling av programvare. Det er derfor naturlig å benytte Git også for lagring og versjonering av tjenestene som utvikles. Hver tjeneste vil leve i et eget Git-repository, og vil inneholde en eller flere utgaver. En målsetting er å kunne la tjenesteeier velge hvor de utviklede tjenestene skal lagres, f.eks. GitHub, Team Services eller en Git-server som Altinn drifter. Både tjenesteutvikling i nettleser og tjenesteutvikling i kode-editor vil jobbe mot de samme versjonskontrollerte filene, og ha fullt innsyn i de filene som en tjeneste består av. Dokumentasjon Dokumentasjon av tjenester 3.0 vil ligge åpent tilgjengelig på GitHub slik at alle kan bidra og foreslå forbedringer. Markdown vil benyttes som format både for dokumentasjon, men også for tekst-ressurser og dokumentasjon for den enkelte tjeneste som utvikles. Åpen kildekode, cross platform Tjenester 3.0 skal være basert på fri programvare og ikke benytte proprietær programvare. Se også fjerde målsetting. Programvare PoC&amp;rsquo;en som er utviklet er basert på følgende programvare. Dette er ikke en uttømmende liste, og den kan endre seg. Programvare Beskrivelse .NET Core Rask, modulær og åpen plattform for moderne applikasjoner. Neste generasjon .NET. ASP.NET Core MVC Rammeverk for å utvikle web applikasjoner og API&amp;rsquo;er Bootstrap 4 CSS/JS rammeverk for responsive web-applikasjoner. Benyttes også av Altinn og i designsystemet. Git Distribuert versjonskontroll-system Monaco Editor Nettleserbasert kodeeditor, den samme som også benyttes av vs code. Markdig Bibliotek for håndtering av markdown Roslyn Kompilatorer og API for avansert kodeanalyse Visual Studio Code Fantastisk cross-platform kode-editor som bare blir bedre for hver måned. "
},
{
	"uri": "https://altinn.github.io/docs/altinncore/faq/",
	"title": "Ofte stilte spørsmål",
	"tags": [],
	"description": "",
	"content": "Her er svar på de vanligste spørsmålene om tjenester 3.0: Finnes det en beskrivelse av tjenester 3.0? Ja, på overordnet nivå så har vi fire målsettinger, og en beskrivelse av arkitekturen. Når kan vi ta i bruk tjenester 3.0? Vi er avhengig av finansiering for å få realisert tjenester 3.0 innen rimelig tid. Så lenge finansieringen ikke er plass så vil ikke målsettingene for 3.0 kunne realiseres. Vi ønsker likevel å forsøke å levere en frittstående &amp;ldquo;alpha-versjon&amp;rdquo; med begrenset funksjonalitet høsten 2017. Denne vil være basert på en &amp;ldquo;proof-of-concept&amp;rdquo; som har blitt laget for å bekrefte tekniske veivalg. Det å tilgjengeliggjøre og oppdatere tjenester 3.0 fortløpende fremover, for å få kontinuerlig feedback, er ønsket måte å jobbe på. Se siste status for detaljer. Kan man gjenbruke noe fra eksisterende tjenester basert på InfoPath, eller må vi starte helt på nytt? Tjenester 3.0 vil støtte eksisterende dataformater (XSD) fra SERES og OR, noe som betyr at alle grensesnitt (mottak, preutfylling, innsending, etc) vil kunne gjenbrukes uten endringer i tjenesteeiers fagsystemer eller sluttbrukersystemer. Kall mot dagens &amp;ldquo;mappere&amp;rdquo; og interne tjenester skal også fortsatt fungere, selv om vi på sikt ønsker å fase ut mappere til fordel for noe bedre. Vi har også vurdert muligheten for å lage et verktøy som automatisk konverterer fra InfoPath til tjenester 3.0, helt eller delvis. Etter diskusjoner med diverse tjenesteutviklere, så har det kommet frem at man sannsynligvis uansett vil ønske å forbedre brukergrensesnitt, og forenkle tekster og logikk når man går over til responsive tjenester som skal fungere også på mobil. Det å utvikle et konverteringsverktøy er ikke utelukket, men det må gi en reell verdi. Finnes det noen retningslinjer for å lette overgangen fra InfoPath? Lag enkle og fornuftige modeller (XSD) som inneholder så mye som mulig av datatyper, begrensninger, etc. istedenfor å kode disse selv. Benytt regelmotor (XML) istedenfor C# i InfoPath for logikk (særlig for kompliserte skjema). Lag gode og korte tekster som har en større sjanse for å fungere også på små skjermer. Vurder om store tabeller (antall kolonner) egentlig er nødvendig. Vil vi fortsatt kunne utvikle eget brukergrensesnitt og kun benytte API&amp;rsquo;ene i Altinn? Ja. API&amp;rsquo;ene til Altinn vil fortsatt fungere som før, og tjenester 3.0 vil løfte API&amp;rsquo;ene til en kanal som er likestilt med portal også ved utvikling og testing av tjenester. Det vil også legges til rette for å eksponere alle ressurser som utvikles som API, f.eks. tekst-ressurser, metadata, semantiske koblinger, valideringer, etc. Vil det forsvinne funksjonalitet som finnes i dagens plattform? I utgangspunktet nei, så fremt det ikke er funksjonalitet som ikke benyttes, eller som ikke gir mening lengre. De første versjon av tjenester 3.0 vil nok ikke inneholde all funkjsonalitet, da de viktigste egenskapene vil leveres først og videre utvikling vil gjøres basert på feedback. Er tjenester 3.0 egentlig prioritert? Ja. Tjenester 3.0 er helt sentral for å kunne realisere de fire satsingsområdene i Altinn-strategien. I tillegg er tjenester 3.0 definert som ett av hovedproduktene i Altinn, og er dermed sentral også i Altinn produktstrategi. Hva slags teknologi benyttes i tjenester 3.0? Se oversikten over programvare. Hvorfor kjøper dere ikke bare inn noe ferdig hyllevare for skjema? Det finnes rett og slett ikke hyllevare som dekker alle behovene som Altinn sine brukere og tjenesteeiere har til ytelse, funksjonalitet og sikkerhet. Bruk av hyllevare, først Adobe Form Server (Altinn I) og så Microsoft Forms Server (Altinn II), har vist at det er en veldig stor risiko å ikke selv ha kontroll over kjernefunksjonalitet i en stor løsning som skal leve lenge. Det har også vist seg å være ekstremt dyrt og krevende å forsøke å tilpasse hyllevare til å dekke behovene. Derfor velger vi heller å utvikle en løsning på toppen av åpen kildekode, og så dele det vi lager med alle. Når vi forbedrer åpen kildekode som vi benytter, så vil også alle andre som baserer seg på de samme prosjektene nyte godt av det. Når vil den gamle InfoPath-løsningen fases ut? Enten når alle tjenester er migrert over eller når support for InfoPath avsluttes (2020, ev. 2026 hvis vi bruker tid/penger på å oppgradere). Vi håper på å unngå å måtte leve lenge med dagens løsning, men det er naturlig nok avhengig av finansiering. Rent økonomisk så vil det være store gevinster ved å fase ut den gamle løsningen så fort som mulig. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/sikkerhet/autentisering/",
	"title": "Autentisering",
	"tags": [],
	"description": "Altinnplattformen har innebygd en rekke mekanismer for autentisering.",
	"content": "Altinnplattformen har innebygd en rekke mekanismer for autentisering. Fordeler og muligheter Altinnplattformen er føderert med ID-porten noe som gir at 4 millioner brukere allerede kan bruke Altinn uten å måtte registrere seg utover det å logge inn med ID-Porten. Via ID-porten kan brukerne logge inn på nivå 3 og 4 med alternativer som MinID, BankID, Buypass Altinn tilbyr også egne påloggingsalternativer for brukere som ikke har d-nummer eller f-nummer. Produkter som tilbys Autentisering via ID-Porten (MinID, BankID, Buypass, Commfides, BankID på mobil) Autentisering for selvregistrerte brukere Altinn SMS og Altinn Pin Autentisering for virksomhetsbrukere Autentisering for sluttbrukersystem via web service Hvordan komme i gang Autentisering håndteres automatisk av plattformen. Råd og tips Krev riktig autentiseringsnivå på tjenester som matcher kanalene Kanaler REST-API Sluttbrukersystem Portal Avhengigheter Under utvikling Teknisk dokumentasjon Under utvikling "
},
{
	"uri": "https://altinn.github.io/docs/katalog/sikkerhet/autorisasjon/",
	"title": "Autorisasjon",
	"tags": [],
	"description": "Autorisasjonskomponenten i Altinn er svært funksjonsrik og gir et kraftig verktøy til tjenesteeiere for å kunne styre tilgang til tjenester.",
	"content": "Autorisasjonskomponenten i Altinn er svært funksjonsrik og gir et kraftig verktøy til tjenesteeiere for å kunne styre tilgang til tjenester. Tjenesteutvikler kan definere hvilke roller som kreves for å brukes en tjeneste og Altinn sikrer at brukerne tilfredsstiller kravene. I Altinn kan også sluttbruker delegere videre rettighetene slik at for eksempel andre personer i en organisasjon kan utføre oppgaver. Fordeler og muligheter Altinn har integrert Folkeregister og Enhetsregister noe som gjør at man som tjenesteeier i Altinn får god tilgangskontroll på tjenester som skal benyttes av private eller organisasjon. Sluttbrukere har gode muligheter til å administrere sine rettigheter videre til andre innad eller utenfor sin organisasjon, noe som sikrer at de riktige personer får benyttet seg av tjenestene. For tjenesteeier tilbyr også Altinn grensesnitt som gjør det mulig å hente ut autorisasjonsinformasjon som for eksempel informasjon om hvilke roller en person har for en organisasjon. Dette kan brukes for å styre tilgang i eksterne løsninger. Tjenesteeier kan også benytte seg av et teknisk grensesnitt for å spørre om en bruker har tilgang til å utføre operasjoner på en gitt tjeneste. Produkter som tilbys Styring av tilgang på tjenester basert på roller i Enhetsregisteret/Altinn Styring på mulige avgivere via tjenesteierstyrt register Ekstern bruk av Altinns autorisasjonskomponent Råd og tips Knytt tjenester til roller som funksjonelt passer andre tilsvarende tjenester Oppfordre til enkeltdelegering av rettigheter over det å opprette lokale roller Kanaler REST-API Sluttbrukersystem Portal Avhengigheter Mye av funksjonaliteten som er tilgjengelig for sluttbruker er knyttet til at man som tjenesteeier har tjenester i Altinn plattformen. Teknisk dokumentasjon Implementasjonsguide for tjenesteeier Brukerveiledning TUL "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/betaling/",
	"title": "Betaling",
	"tags": [],
	"description": "I enkelte offentlige tjenester inngår betaling som en del av saksbehandlingen. Altinn har støtte for betaling med tre av de største betalingsleverandørene på det norske markedet.",
	"content": "I enkelte offentlige tjenester inngår betaling som en del av saksbehandlingen. Altinn har støtte for betaling med tre av de største betalingsleverandørene på det norske markedet. Det er opp til tjenesteeier å lage avtale med den leverandøren de ønsker å bruke av alternativene Nets, Payex og DIBS. Fordeler og muligheter Betalingsløsningen i Altinn kan benyttes i tilknytning til en innsendingstjeneste og være en del av arbeidsflyten til en innsending på fire ulike måter: I parallell med innsendingssteget – det vil si at man fyller ut et skjema, og fra siden der man skal bekrefte innsending velger man «Send inn og betal». Man sendes videre til en av betalingsleverandørene, og så snart betaling er utført er man tilbake på kvitteringen på innsending i Altinn Betaling før signering – der man etter utfylling først gjennomfører en betaling, og deretter signerer på innsendingen Betaling etter signering – der man får fylle ut og signere en innsending før man sendes videre til betalingsløsningen Forhåndsutfylt betaling – det vil si at det ikke kreves noen aktiv utfylling av et skjema. Brukeren sendes direkte til et betalingssteg Altinn vil ha støtte for betaling med tre av de største betalingsleverandørene på det norske markedet. Tjenesteeier inngår avtale med den leverandøren de ønsker å bruke av alternativene Nets, Payex og DIBS. Altinn vil også ha funksjonalitet for å begrense hvilke betalingsalternativer som er tilgjengelig – for eksempel hvis det er uønsket at betaling skal skje med enkelte typer kort. Det trenger ikke være et forhåndsbestemt beløp som skal betales per innsending. Tjenester med betaling kan defineres slik at hvor mye som skal betales avhenger av hva som fylles ut i skjemaet. Det går også an å definere at det kun er bestemte data som skal medføre betaling. Utfyllingen trenger ikke skje i Altinn. Betaling er også tilgjengelig til bruk i for eksempel apper eller tjenesteeiernes egne nettsteder via Altinns REST-API. Brukeren trenger med andre ord ikke vite at det er Altinns betalingsløsning som benyttes som del av en tjenesteeier sin tjeneste. Fordeler Tjenesteeier kan helautomatisere sine prosesser (raskere, enklere og mer effektiv prosess) Redusert behandlingstid for bruker Sikkerhet Produkter som tilbys REST-api Kvittering Arkivtjenester Meldingsboks Hvordan komme i gang Under arbeid Råd og tips Bruk en god betalingsbeskrivelse Kanaler Portal REST-API (forutsetter at betalingsvindu åpnes i browser) Avhengigheter Betaling kan kun benyttes sammen med innsendingstjenester. Over tid vil dette utvides til andre tjenestettyper. Teknisk dokumentasjon Under arbeid "
},
{
	"uri": "https://altinn.github.io/docs/katalog/support/brukersupport/",
	"title": "Brukersupport",
	"tags": [],
	"description": "Altinn Brukerservice tilbyr veiledningstjenster omkring spørsmål som gjelder innlogging, hvordan finne fram til riktig tjeneste, forståelse av felles funksjonalitet og teknisk veiledning til skjemautfylling, innsending, signering og mye mer.",
	"content": "Altinn Brukerservice tilbyr veiledningstjenster omkring spørsmål som gjelder innlogging, hvordan finne fram til riktig tjeneste, forståelse av felles funksjonalitet og teknisk veiledning til skjemautfylling, innsending, signering og mye mer. Altinn Brukerservice (ABS) Altinn brukerservice bygger på Brønnøysundregistrenes mangeårige erfaring med dataassistert planlegging av nødvendig bemanning foran etatens egne skjemafrister. Faglige spørsmål om besvarelse av det enkelte skjemaet eller forhold i den enkelte tjenesten, sendes videre til faglig brukerstøtte hos etatene ut fra klare grensedragninger i avtale med hver enkelt etat. 146 000 henvendelser på telefon og 45 000 e-poster i 2015 Tilgjengelig på telefon, e-post og sosiale medier kl 08.00 til 15.30 på hverdager. Utvidet åpningstid kan bestilles ved frister og spesielle hendelser Ca 40 veiledere opplært til å besvare henvendelser fra Altinn i første- og andrelinje Grundig og systematisk opplæring med fadderordning for veilederne Fokus på jevnlig faglig oppdatering Benytter brukerkunnskapen til å forbedre hjelpesidene på altinn.no, for å få brukeren selvhjulpen på nett Kort ventetid og kyndig veiledning ifølge brukertester Altinn Servicedesk (SD) Altinn Servicedesk(SD) er en tjeneste som rettet mot Sluttbrukersystemer og Tjensteeiere, samt understøtte 2 linje hos brukerservice (ABS). Servicedesk er opprettet for mottak og registrering av saker som: Support Feil Bestillinger Som Altinn sine leverandører eller interne ressurser må bistå tjenesteeiere og sluttbrukersystemer å utføre. Servicedesken skal følge opp alle saker kontinuerlig til de er løst, og sikre for at informasjon blir gitt innmelder underveis i prosessen. Servicedesken vil være Leverandørenes førstelinje og kan nås på telefon eller e-post. Driftsvarsel Altinn Sentralforvaltning har som standard tjeneste å sikre kontinuerlig varsling av driftshendelser eller planlagt vedlikehold, som kan påvirke bruken av Altinn sitt produksjon og testmiljøer for tjenesteeiere, sluttbrukere og sluttbrukersystemer. "
},
{
	"uri": "https://altinn.github.io/docs/guides/definisjoner/",
	"title": "Definisjoner",
	"tags": [],
	"description": "",
	"content": "Betegnelse Beskrivelse Abonnement Regelmessig aktivisering av innsendingstjeneste i avgivers arbeidsliste. Et abonnement kan forekomme 1 til X ganger. Autentisering En betegnelse på det å verifisere en bruker eller et systems identitet. Dette vil typisk skje ved en sjekk av brukernavn og passord og/eller pin kode stemmer overens med registrert informasjon. Autorisasjon En betegnelse på å verifisere at en gitt identifisert bruker eller system identitet har rettigheter til å utføre en handling eller har rettigheter til spesifikke data. Base64 Standard for å representere binære data som tekst, slik at binære data kan være en del av f.eks. en XML struktur. Batch En større mengde data av samme type gruppert sammen. Overføres i samme forsendelse, ofte rutinemessig. E-dialog En tjenesteeierdefinert samhandlingstjeneste. EnterpriseCertificate (EC) Sertifikat for en virksomhet, virksomhetssertifikat, som kan benyttes til autentisering og autorisering ifm implementasjon mot Altinn. Formidlingstjeneste Formidling av data mellom eksterne aktører som er tilknyttet Altinn. Altinn forholder seg ikke til innhold, kun deler av formatet hvor metadata for tjenesten angis. Innsendingstjeneste En innsendingstjeneste er en eller flere skjema definert av en tjenesteeier som fylles ut i portal eller sluttbrukersystem, evt. signeres, og sendes inn. Påbegynte og innsendte innsendingstjenester kan oppbevares i sluttbrukers meldingsboks i Altinn. Svardata sendes tjenesteeier Innsynstjenester Tjenesteeiere kan gjøre informasjon i egne registre (for eksempel saksbehandlingsløsninger eller elektroniske saksarkiv/saksmapper) tilgjengelig for den enkelte brukeren eller dennes representant. Lenketjeneste Formålet med en lenketjeneste er å overføre en bruker i Altinn til en annen nettside. En lenketjeneste er alltid assosiert med en URL. Kvittering Ved innsending av data til Altinn, eller mottak av data fra Altinn opprettes kvitteringer som partene senere kan benytte for å få oversikt over datautveksling med Altinn. Meldingsboks Samlingen av en sluttbrukers instansierte tjenester i Altinn (tjenestemotor og arkiv). Meldingstjeneste Offentlige virksomheter sender informasjon/melding til sluttbrukers meldingsboks i Altinn. Meldingene støtter HTML og vedlegg. Brukeren kan varsles med e-post eller SMS om at informasjon er gjort tilgjengelig for innsyn eller behandling. Tjenesteeieren får informasjon om hvilke utsendte meldinger som er åpnet og kan eventuelt kreve at brukeren bekrefter mottaket innen en fastsatt frist. Meldingene kan oppbevares i sluttbrukerens meldingsboks i Altinn i en fastsatt periode, eventuelt slettes av brukeren. MTOM Message Transmission Optimization Mechanism – Metodikk for effektiv forsendelse av binære vedlegg til og fra en web service. Preutfylling Forhåndsutfylling av skjema/skjemasett i Altinn for bruker/organisasjon vha. data mottatt fra tjenesteeiere eller nasjonale registre (f.eks. Folkeregisteret, Enhetsregisteret) Sak En instansiert samhandlingstjeneste, enten en samleside eller en e-dialog. SBL Sluttbrukerløsningen. Applikasjon som privatpersoner eller næringslivet benytter for å kommunisere med tjenesteeiere. Samhandlingstjeneste En tjeneste som knytter sammen andre tjenester som for sluttbruker og/eller tjenesteeier hører naturlig sammen. Samleside En brukerdefinert samhandlingstjeneste. Signering Tjenesteeier kan definere at spesifikke innsendingstjenester må signeres en eller flere ganger av bruker(e) før den aktuelle innsendingstjenesten kan ferdigstiller og sendes inn til Altinn. Skjema Formular/dokument definert av en tjenesteeier som inneholder rubrikker som skal besvares av den som bruker formularet. Kan være trykket på papir eller elektronisk – sluttbrukerløsningen benytter elektroniske skjema. Skjemasett En samling skjema som hører sammen. Gyldige kombinasjoner defineres av tjenesteeiere i TUL. SOAP Uavhengig protokoll spesifikasjon for utveksling av strukturert informasjon gjennom web services. TUL Tjenesteutviklingsløsningen. Applikasjon hvor tjenesteeiere bl.a. kan opprette tjenester for bruk i Altinn, for eksempel innsendingstjenester. Web service Tjeneste på Internet aksessert vha. HTTP/HTTPS som utfører en bestemt oppgave, eller en bestemt type oppgaver. WSDL Språk (xml) som beskriver en web service, dvs. informasjon om tjenester, protokoller og formater. Hensikten er å ha en velkjent måte for å etablere dialog mellom brukere og tilbydere av elektroniske tjenester. XACML EXtended Markup Language - XML er en språkdefinisjon for strukturering og beskrivelse av data. Web service Tjeneste på Internet aksessert vha. HTTP/HTTPS som utfører en bestemt oppgave, eller en bestemt type oppgaver. WSDL Språk (xml) som beskriver en web service, dvs. informasjon om tjenester, protokoller og formater. Hensikten er å ha en velkjent måte for å etablere dialog mellom brukere og tilbydere av elektroniske tjenester. XML EXtended Markup Language - XML er en språkdefinisjon for strukturering og beskrivelse av data. XSD XML Schema. Metabeskrivelse for XML data. Beskrivelse av hvordan XML dataene skal være strukturert og beskrivelse av alle dataelementene. Blir også brukt til å validere XML data. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/formidling/",
	"title": "Formidling av data",
	"tags": [],
	"description": "Formidlingstjenesten er en maskin-til-maskin formidling av store datamengder mellom ulike offentlige og private virksomheter.",
	"content": "Formidlingstjenesten er en maskin-til-maskin formidling av store datamengder mellom ulike offentlige og private virksomheter. Det blir ikke foretatt noe sjekk på innhold i dataene, men Altinn garanterer levering og sporbarhet for transport av data. Fordeler og muligheter Formidlingstjenesten muliggjør trygg og sikker maskin-til-maskin formidling av datamengder på inntil 1 GB mellom ulike offentlige og private virksomheter. Informasjon hentes fra virksomhetenes saksbehandlingsløsninger/registre og distribueres til en eller flere offentlige eller private mottakere gjennom Altinn. Tjenestetypen kan også benyttes for større overføringer fra private aktører i tilfeller hvor det ikke er behov for funksjonaliteten i innrapporteringstjenestene. Formidlingstjenesten har også en kvitteringsfunksjonalitet som gir kunden muligheten for å sende spørring om status for meldingen. Bruk av en formidlingstjeneste styres av tjenesteeier selv gjennom tjenesteeierstyrt rettighetsregister. Dette betyr at det er tjenesteeier selv som kan styre hvem som har rettighet til å benytte tjenesten. Oppsett av formidlingstjeneste og administrasjon av brukere skal kunne gjøres på egen hånd av tjenesteeiere og brukere uten involvering fra AAS. Formidlingstjenesten overføres fra avsender til mottaker, og tjenesteeiere benytter derfor ikke egne grensesnitt kun for tjenesteeiere for formidlingstjenesten, men benytter i stedet de samme grensesnitt som er tilgjengelig for alle brukere av Altinn. For å kunne ta i bruk formidlingstjenesten må tjenesteeier registrere et virksomhetssertifikat og påloggingen blir knyttet til organisasjonsnummer istedenfor fødselsnummer. Fordeler Håndterer stor datamengder Sikker overføring Tjenesteeierstyrt rettighetsregister Innloggingsmetode knyttet til organisasjonsnummer Produkter som tilbys Kvitteringersfunksjonaliteten Virksomhetssertifikat Hvordan komme i gang Her kan du få informasjon om hvordan man kommer i gang med å lage en formidlingstjeneste. Råd og tips Før man starter med utforming av tjenester er det lurt å gjøre seg kjent med Altinn-plattformen og mulighetene som ligger der For å få en god tjeneste kan det være hensiktsmessig å jobbe sammen med en eller flere kunder for at tjenestene skal dekke deres ønsker og behov Sette av god til utforming av god kravspesifikasjon, sette opp tjenestefunksjonalitet, samt innhold i meldinger som skal formidles Vær oppmerksom på at i tillegg til utvikling av tjenesten skal man ha på plass et mottakssystem og en integrasjon mellom tjenesteeier og Altinn. Erfaring viser at dette er mer tidkrevende enn man tror Kanaler Web service Avhengigheter Bruk av formidlingstjenester forutsetter bruk av Altinn autentisering og autorisasjon. Teknisk dokumentasjon Implementasjonsguide for sluttbrukere Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/innsending/",
	"title": "Innsending",
	"tags": [],
	"description": "Er en tjeneste der bruker fyller ut, signerer og sender inn et skjema",
	"content": "Er en tjeneste der bruker fyller ut, signerer og sender inn et skjema på www.altinn.no. Skjemaet kan også fylles ut og signeres/sendes inn via applikasjoner (med REST-API) eller sluttbrukersystem. Med REST-API kan skjema integreres på tjenesteeier sine egne nettsider og sendes inn derfra. Innsendingstjenesten kan bestå av et enkeltstående skjema eller et skjemasett med eller uten filvedlegg. Fordeler og muligheter I innsendingstjenester kan informasjon fra Folkeregisteret, Enhetsregisteret og brukerens profil preutfylles i skjema. Det er også mulig å hente inn informasjon fra eksterne systemer. Tjenesteeier kan legge skjema klart i sluttbrukerens meldingsboks i Altinn (abonnement) og det er mulig for tjenesteeier å sende inn data som skal forhåndsutfylles i skjema (preutfylling). Sluttbruker kan varsles på sms og/eller e-post om at det ligger et skjema klart til utfylling i Altinn. Det kan legges inn omfattende valideringsregler i skjema med tilhørende feilmeldinger. Det kan også legges inn Hjelp-knapper som gir tilgang til hjelpeinformasjon under utfyllingen dersom sluttbruker ønsker hjelp. En innsendingstjeneste kan presenteres på flere språk. Altinn har foreløpig språkstøtte for bokmål, nynorsk og engelsk. Tjenesteeier definerer hvilken flyt tjenesten skal følge i Altinn (prosessflyt). Med dette menes at man velger hvilke steg skjema skal gjennom hos utfyller. En prosessflyt kan bestå av utfylling, et gitt antall signeringer, betaling og innsending. Data registrert av sluttbruker sendes til eller hentes av tjenesteeier over valgt grensesnitt. Det er også mulig å tilrettelegge for at alle eller deler av dataene skal distribueres til en eller flere andre tjenesteeiere. Hvis det er ønskelig kan innsendingstjenester lagres i tjenesteeiers arkiv i Altinn. I dette arkivet kan tjenesteeier søke opp innsendte tjenester gjennom et nettlesergrensesnitt. Disse søkene tilbys også som webservices slik at tjenesteeier sitt system kan hente ut informasjon fra dette arkivet. Fordeler ved bruk av tjenesten Sikker identifikasjon av bruker Sikker dialog med bruker Elektronisk signering Bruker får veiledning og hjelp til utfylling Validering av data under utfylling gir tjenesteeier bedre data Skjema kan preutfylles med informasjon om bruker både fra interne systemer og eksterne registre som Enhetsregisteret og Folkeregisteret Skjema kan legges klart i meldingsboksen til aktuelle brukere og det kan sendes varsel på e-post og/eller sms om dette Tjenesten kan benyttes sammen med andre tjenester i samspill for å realisere en dialog mellom sluttbruker og tjenesteeier Språkstøtte Generering av PDF for utskrift og arkivering Håndtering av prosessflyter (mulig med flere signeringer, betaling) Produkter som tilbys Preutfylling Oppslag i egne register Abonnement Varsel Kryptering Prosessflyt Betaling Splitt av data Tjenesteeiers arkiv Hvordan komme i gang Informasjon om hvordan man kommer i gang med å lage en innsendingstjeneste Råd og tips Før man starter med utforming av tjenester er det lurt å gjøre seg kjent med Altinn-plattformen og mulighetene som ligger der Sett av god tid til planlegging og design av tjenesten Få avklart at Altinn har alt av funksjonalitet som tjenesten krever Vær oppmerksom på at i tillegg til utvikling av tjenester skal man ha på plass et mottakssystem og en integrasjon mellom tjenesteeier og Altinn. Erfaring viser at dette er mer tidkrevende enn man tror Planlegger man omfattende bruk av Altinn kan det være hensiktsmessig å starte med en enkel tjeneste for å gjøre seg kjent med og få kompetanse på løsningen Preutfyll skjema med opplysninger fra Enhetsregisteret eller Folkeregisteret og også med opplysninger fra egne systemer. Ikke spør etter data dere allerede har tilgang til Se gjerne en innsendingstjeneste i kombinasjon med andre tjenestetyper, som for eksempel meldingstjeneste, for å oppnå toveis kommunikasjon og en mer helhetlig prosess for sluttbrukeren Kanaler REST-Api Altinn-portalen Sluttbrukersystem Avhengigheter Innsendingstjenesten er en frittstående tjenestetype som kan benyttes i kombinasjon med andre tjenestetyper, som meldingstjenester og varsling, eller som et element i en samhandlingstjeneste. Det kan hentes inn informasjon i tjenesten fra tjensteeiers interne registre ved hjelp av webservice oppslag. Kall til eksterne webservices skal gå gjennom en mapper (proxy). Teknisk dokumentasjon Funksjonell spesifikasjon – Sluttbrukerløsningen Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/innsyn/",
	"title": "Innsyn",
	"tags": [],
	"description": "Er en tjeneste som benyttes for å gi bruker innsyn i data som er registrert i tjenesteeier sitt system, for eksempel saksbehandlingsløsninger eller elektroniske arkiv.",
	"content": "Er en tjeneste som benyttes for å gi bruker innsyn i data som er registrert i tjenesteeier sitt system, for eksempel saksbehandlingsløsninger eller elektroniske arkiv. En innsynstjeneste kan gi innsyn i flere forskjellige systemer hos tjenesteeier. Fordeler og muligheter Innsynstjenester er tjenester som brukes til å hente data fra en tjenesteeier til Altinn ved å kalle en eller flere web services. Forretningslogikk og data ligger hos tjenesteeier, mens presentasjonen av dataene ligger i Altinn. Tjenesteeiere kan gjøre informasjon i egne registre (for eksempel saksbehandlingsløsninger eller elektroniske saksarkiv/saksmapper) tilgjengelig for den enkelte brukeren eller dennes representant. Dataene kan også gjøres tilgjengelig for sluttbrukersystem. Innholdet i en innsynstjeneste vil på samme måte som for innsendingstjenester være alt som har med skjema, datainnholdet og selve interaksjonen med sluttbruker i sluttbrukerløsningen å gjøre. Uthenting av data fra tjenesteeiers systemer håndteres gjennom en såkalt mapper, som er en komponent for fleksibel integrasjon mellom Altinn og andre systemer. Innsynstjenesten består av følgende hoveddeler Mappere mot eksterne webtjenester- For utarbeidelse av Web Service mappere av innsynstjenester så er dette kode som tjenesteeier utvikler i Visual Studio InfoPath-skjema – visningen av innsynsoppslaget Tjenesteeier definerer tjenesten som skal supplere dataene, og definerer så et InfoPath-skjema som viser dataene for brukeren. Tjenesteeier kan definere om brukerne skal kunne lagre innsynstjenesten i min meldingsboks. Dette for at sluttbruker kan velge om de vil lagre en signert kopi av en innsynstjeneste. Den signerte innsynstjenesten lagres da i brukers arkiv i Altinn. En innsynstjeneste som ikke er signer og arkivert vil ikke være tilgjengelig i Altinn etter at den er benyttet. Sluttbruker kan også videresende Altinn-signert innsynstjeneste på e-post. Produkter som tilbys Kvitteringersfunksjonaliteten Virksomhetssertifikat Hvordan komme i gang Under utvikling Råd og tips Under utvikling Kanaler Portal Web service Avhengigheter Innsynstjeneste i Altinn forutsetter bruk av autentisering og autorisasjon i Altinn. Teknisk dokumentasjon Brukerdokumentasjon TUL Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/katalog/support/kurs-og-seminar/",
	"title": "Kurs og seminar",
	"tags": [],
	"description": "Altinn Sentralforvaltning har som krav at alle som skal utvikle tjenester mot Altinn, må gjennomføre grunnkurs i tjenesteutvikling.",
	"content": "Altinn Sentralforvaltning har som krav at alle som skal utvikle tjenester mot Altinn, må gjennomføre grunnkurs i tjenesteutvikling. Der en lærer å bruke tjenesteutviklingsløsningen (TUL) og SERES Domeneklient. Altinn sentralforvaltning gjennomfører regelmessige kurs i innføring i tjenesteutvikling i Altinn. Informasjon om når neste kurs er satt opp og påmeldingsinformasjon finner du på www.brreg.no. Innføring i tjenesteutvikling i Altinn (2- dagers kurs) Målgruppe Alle som på vegne av en offentlig virksomhet skal utvikle tjenester i Altinn, f.eks. saksbehandlere, IT-personell og konsulenter. Det kreves ingen formell IT-kompetanse, men det er en fordel med erfaring i bruk av IKT-verktøy, som f.eks. programmer som inngår i Microsoft Office. Innhold Presentasjon av tjenesteutviklingsprosessen i Altinn Overordnet informasjon om SERES og tjenesteutviklingsløsningen (TUL) Bruk av Domeneklienten (SERES) til å modellere informasjonselementer i en tjeneste Bruk av tjenesteutviklingsløsningen for utvikling av innsendingstjeneste (skjema) og meldingstjeneste Opplæringen gjennomføres primært ved praktisk bruk av verktøyene og er kun ment for personer som planlegger å utvikle tjenester i Altinn. Kurset vil ikke omhandle avansert tjenesteutvikling. Formål Gjøre tjenesteutvikler i stand til å utvikle gode innsendings- og meldingstjenester i Altinn. Meld deg på kurs her Altinndagen Dette er en konferanse som Altinn Sentralforvaltning arrangere hvert år for sluttbrukere, tjenesteiere, sluttbrukersystemer og andre aktuelle aktører i markedet. Informasjon om tidligere og kommende konferanse finner du på Altinnett. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/lenketjeneste/",
	"title": "Lenketjeneste",
	"tags": [],
	"description": "En lenketjeneste utfører autorisasjon i Altinn før brukeren sendes til et annet nettsted der selve tjenesten kjører.",
	"content": "En lenketjeneste utfører autorisasjon i Altinn før brukeren sendes til et annet nettsted der selve tjenesten kjører. Fordeler og muligheter Ved å utvikle en lenketjeneste vil tjenesteeier beholde sin egen tjenestemotor for utvikling av tjenesten. Altinn blir kun benyttet til tilgjengeliggjøring av tjenesten, samt til autorisering av etatens egenutviklede tjenester. Når en bruker benytter lenketjenester ved å starte tjenesten fra Altinn eller fra tjenesteeiers nettside vil man bli sendt til autentisering hos ID-porten. Sluttbruker foretar valg av avgiver i Altinn og det det utføres en autorisasjonskontroll og en tjenestekontrollfør brukeren blir sendt til lenketjenesten på ekstern løsning. Autorisasjonskrav til lenketjenester defineres i Altinn. Det er bare sikkerhetsnivåene som er tilgjengelig i IdPorten som kan benyttes på tjenesten. Lenketjenester blir ikke instansiert i Altinn og er derfor ikke å finne i «min meldingsboks» i Altinn. For å kunne identifisere hvilken avgiver brukeren valgte å starte tjenesten med, sendes det med en nøkkel som den eksterne tjenesteportalen kan benytte for å spørre Altinn om informasjon om valgt avgiver. Tjenesteeier kan gi tilbakemelding til brukeren via Altinn sin meldingstjeneste. Graden av integrasjon mellom Altinn og det eksterne nettstedet kan variere fra tjeneste til tjeneste. Tjenesteeier må ha satt opp føderering mot IDPorten og lenken (tjenesten hos tjenesteeier) må være en beskyttet ressurs. Det er 3 aktører i lenketjenesten: IDPorten, som er Identity Provider og foretar autentisering av sluttbruker Altinn foretar autorisasjonskontroll, tjenestekontroller og viderefører sluttbruker til tjeneste i ekstern portal. Tjenesteeier for ekstern tjeneste som tilbyr tjenesten til sluttbruker. Fordeler Sikkert Tjenesteeier har full kontroll på utvikling av tjenesten på sin side Produkter som tilbys Meldingstjeneste Autorisasjon Hvordan komme i gang Informasjon om hvordan man kommer i gang med å lage en lenketjeneste Råd og tips Husk ved bruk av lenketjeneste får ikke sluttbruker data i sitt felles arkiv. Det vil være opp til tjenesteeier å etablere eget arkiv for sluttbruker. Kanaler Portal Avhengigheter Lenketjenester forutsetter at man tar i bruk Autentisering og Autorisasjon i Altinn. Teknisk dokumentasjon Guide for lenketjeneste Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/katalog/sikkerhet/logging/",
	"title": "Logging",
	"tags": [],
	"description": "Altinnplattformen logger bruk av plattformen på en rekke måter. Logging av hendelser i løsningen skjer både i applikasjoner, databaser, i operativsystemet og i infrastrukturkomponenter.",
	"content": "Altinnplattformen logger bruk av plattformen på en rekke måter. Logging av hendelser i løsningen skjer både i applikasjoner, databaser, i operativsystemet og i infrastrukturkomponenter. Ulike komponenter har ulik rotasjonstid (sletting) basert på nødvendigheten for loggingen. Loggdata som ikke er relevant vil bli slettet. Fordeler og muligheter Fordelen med å ta i bruk Altinn som plattform for tjenester er at man får med forskjellige type loggefunksjonalitet. Alle innlogginger av brukere blir logget med informasjon om tidspunkt og IP-adresse. Tilgang til data blir logget med tidspunkt og med informasjon om bruker og hvilke data som ble aksessert. Hendelser som utfylling, signering, innsending blir logget i eventloggen og gir sluttbrukerne mulighet til selv se informasjon. Ved behov kan Altinn teamet analysere logger for å hjelpe tjenesteeier. Loggene i Altinn er benyttes også til rettslige tvister. Produkter som tilbys Autentiseringslogg Autorisasjonslogg Hendelseslogg (event) Hvordan komme i gang? Logging er automatisk en del av tjenester i plattformen. Kanaler REST-API Web Service Portal Avhengigheter Logging er ingen tjeneste man kan kjøre for seg selv, det er en del av andre tjenester man benytter i plattformen. Teknisk dokumentasjon Funksjonell spesifikasjon – Sluttbrukerløsningen "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/melding/",
	"title": "Melding",
	"tags": [],
	"description": "Er en tjeneste som lar tjenesteeier sende informasjon i form av en melding som brukerne kan lese i Altinn-portalen eller laste ned til sitt datasystem.",
	"content": "Er en tjeneste som lar tjenesteeier sende informasjon i form av en melding som brukerne kan lese i Altinn-portalen eller laste ned til sitt datasystem. Meldingen kan også leses på etatens eget nettsted ved hjelp av Altinn sitt REST-API. Det er støtte i Altinn for at meldinger til privatpersoner kan videresendes til Digital postkasse for innbygger istedenfor eller i tillegg til at den legges i Altinn. Det kan sendes varsel på e-post og/eller sms til sluttbruker om at informasjon er gjort tilgjengelig. Fordeler og muligheter Hvilke muligheter gir den Meldinger kan typisk være brev, vedtak, kvitteringer eller annen informasjon tjenesteeier ønsker å formidle til sine sluttbrukere. Meldingene støtter HTML og vedlegg og en melding kan: Være HTML basert (formatert visning i nettleser) Være XML basert med referanse til tilhørende visningsskjema (sende inn skjemadata som rendres med et InfoPath-skjema) Inneholde et eller flere binære vedlegg Være en kombinasjon av de over Maks størrelse pr vedlegg for opplastning i portalen er 10 MB pr vedlegg. Meldinger kan sendes til en gitt person eller virksomhet basert på fødsels- eller organisasjonsnummer, og bruker(e) kan varsles med e-post og/eller sms om at informasjon er gjort tilgjengelig. Hvis ikke mottakeradresse/telefonnummer spesifiseres vil dette hentes hos Difi sitt Kontakt- og reservasjonsregister hvis meldingen er til en privatperson, og i Altinn sitt kontaktregister for virksomheter dersom meldingen er til en virksomhet. Hvis man ønsker så kan det sendes ut et påfølgende varsel (purring) dersom meldingen ikke er åpnet innen et gitt tidspunkt som er bestemt av tjenesteeier. Tjenesteeier kan få informasjon om hvilke utsendte meldinger som er åpnet og kan eventuelt kreve at brukeren bekrefter mottaket innen en fastsatt frist. En meldingstjeneste kan presenteres på flere språk. Altinn har foreløpig språkstøtte for bokmål, nynorsk og engelsk. Hvis det er ønskelig kan meldingstjenester lagres i tjenesteeiers arkiv i Altinn. I dette arkivet kan tjenesteeier søke opp utsendte meldinger gjennom et nettlesergrensesnitt. Disse søkene tilbys også som webservices slik at tjenesteeier sitt system kan hente ut informasjon fra dette arkivet. Fordeler Sikker identifikasjon av mottaker Sikker dialog med bruker Bruker kan varsles på e-post og/eller sms om meldingen Altinn har oversikt over hvem som skal varsles - hvis ønskelig En og samme meldingstjeneste kan benyttes i flere sammenhenger Kan gi stor økonomisk gevinst sammenlignet med andre transportkanaler Tjenesteeier kan be om bekreftelse på at meldingen er lest Tjenesteeier kan få tilbakemelding på om meldinger er åpnet eller ikke Tjenesten kan benyttes sammen med andre tjenester i samspill for å realisere en dialog mellom sluttbruker og tjenesteeier Språkstøtte Produkter som tilbys Vedlegg Varsling Tjenesteeiers arkiv Hvordan komme i gang Informasjon om hvordan man kommer i gang med å lage en meldingstjeneste Råd og tips Under utvikling Kanaler REST API Sluttbrukersystem Avhengigheter Meldingstjenesten er en frittstående tjenestetype som kan benyttes i kombinasjon med andre tjenestetyper som innsendingstjenester eller som et element i en samhandlingstjeneste. Kan inneholde ulike typer vedlegg og kan kombineres med varslingsfunksjonalitet. Teknisk dokumentasjon Funksjonell spesifikasjon – Sluttbrukerløsningen Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/katalog/support/operativ-veiledning/",
	"title": "Operativ veiledning",
	"tags": [],
	"description": "Altinn Sentralforvaltning tilbyr rådgivning og veiledning for å kunne supportere tjenesteiere, sluttbrukersystemer og sluttbrukere.",
	"content": "Altinn Sentralforvaltning tilbyr rådgivning og veiledning for å kunne supportere Tjenesteiere, sluttbrukersystemer og sluttbrukere. Dette er team med gode og kvalitative kunnskaper rundt produktene som benyttes i Altinn, de skal sikre en god og fremoverlent service for å gjøre det enkelt å ta i bruk Altinn med tilhørende produkter og tjenester. Ta kontakt med ServiceDesken via selvbetjeningsportalen eller på tjenesteeier@altinn.no for å komme i dialog med oss Serviceleder Er operativt ansvarlig for alle tjenesteeiere, sluttbrukersystemleverandører og andre utviklere/sluttbrukere som benytter Altinn løsningen med tilhørende grensesnitt. Hva kan serviceleder bidra med? kontaktpunkt ved kundedialog kontaktpunkt ved eskalerte hendelser kontaktpunkt ved klager er ansvarlig for drift og forvaltning av tjenestene i Altinn. er hovedansvarlig for å sikre totalleveransen i Altinn-samarbeidet (kontraktuelt, merkantilt og kvalitetsmessig Tjenesteutviklingsveileder Målgruppe Tjenesteeiere og/eller konsulenter, som på vegne av en tjenesteeier trenger bistand knyttet til tjenesteutvikling i Altinn og Seres. Hva kan tjenesteutviklingsveiledere bistå med: Tjenesteeier kan etter eget ønske få en tjenesteutviklingsveileder hos Altinn og Seres som bistår i tjenesteutviklingsprosessen slik at vi sammen kan realisere tjenesteeier sin tjeneste på en mest mulig effektiv måte. Tjenesteutviklingsveileder kan bidra med: - gjennomføring av oppstarts-workshop - behandling av løpende henvendelser underveis i prosjektet - å avholde jevnlig statusmøter - råd og veiledning knyttet til tjenesteutviklingsverktøyene Løsningsarkitekt Målgruppe: Tjenesteeiere som trenger bistand for å kunne se mulighetsrommet slik at de får en optimal utnyttelse av Altinn-plattformen. Hva kan løsningsarkitektene bidra med? bistand og rådgivning knyttet til analyse av forretningsprosesser bistand og rådgivning knyttet til tjenesteeiers behov bistand og rådgivning knyttet til utarbeidelse av løsninsforslag for hvordan løsningen kan brukes til å dekkes tjenesteeieres behov. følge opp tekniske spørsmål "
},
{
	"uri": "https://altinn.github.io/docs/katalog/kanaler/altinn-api/",
	"title": "REST API",
	"tags": [],
	"description": "Altinn tilbyr et REST-API med autentisering ved hjelp av ID-Porten som gjør det mulig å bruke tjenestene i Altinn i en app eller ekstern nettside. Altinn API-et er enkelt og gratis å bruke.",
	"content": "Altinn tilbyr et REST-API med autentisering ved hjelp av ID-Porten som gjør det mulig å bruke tjenestene i Altinn i en app eller ekstern nettside. Altinn API-et er enkelt og gratis å bruke. Fordeler og muligheter Altinn API-et er et grensesnitt mellom brukerne og komponentene som allerede finnes i Altinn. Dette grensesnittet muliggjør å bruke Altinn-innhold i for eksempel smartphone-apps og andre nettportaler enn altinn.no. Altinn API benytter REST arkitekturstil, og baserer seg på en semantisk definisjon av innholdet. Strukturen i responsen fra API-et kan endre seg, men betydningen av elementene er den samme. Dette blir som når man navigerer seg inn på en vanlig nettside. Da kan en klient navigere seg inn i API-et ved å følge lenker med en definert betydning. Det er ikke sikkert at URL-en man var på sist fortsatt eksisterer, men det vil være mulig å bla eller søke seg tilbake til det samme innholdet fra forsiden. Fordelen med dette er at Altinn har mulighet til å bygge ut og omstrukturere innholdet i API-et uten at dette hindrer en klient fra å finne fremtil innholdet den brukte fra før. API-et baserer seg på de mekanismene som allerede finnes i HTTP-standarden og meldingshoder som brukes av vanlige nettlesere og webservere i dag. Altinn API støtter følgende formater - application/HAL+json - application/HAL+xml Les mer om Altinn-API her Produkter som tilbys Ekstern tilgang til «Min Meldingsboks» Hente ut meldinger Slette meldinger Filtrere meldinger Sende inn fra eksterne skjema Signere skjema Legge ved vedlegg eller benytte underskjema Hente preutfyllingsdata Tilgang til innsynstjenester Hente ut informasjon fra tjenesteeiers fagsystemer Ekstern rolle- og rettighetsadministrasjon Hente ut avgiverliste Administrere roller Administrere rettigheter Utføre delegeringer Ekstern tilgang til profilinformasjon Hente kontaktinformasjon for virksomheter Hente kontaktinformasjon for privatpersoner Hvordan komme i gang Informasjon om hvordan man kommer i gang med bruk av Altinn REST-Api Råd og tips Ved bruk av REST-API via portal er man avhengig av en gyldig ID-port sesjon både på Altinn og tjenesteiers portal. Nettlesere har i dag i større grad lagt inn sperre for cookies på tvers av domener. Legg derfor til rette for at bruker kan via sendt via Altinn under pålogging. (vises ikke for sluttbruker) Skal dere utvikle egne mobil-App for tjenester kan Altinns referanseapp være til inspirasjon på hvordan integrasjon kan gjøres. Kanaler API-et baserer seg på de mekanismene som allerede finnes i HTTP-standarden og meldingshoder som brukes av vanlige nettlesere og webservere i dag. Altinn API støtter følgende formater: - application/HAL+json - application/HAL+xml Avhengigheter Grensesnittene kan benyttes for innendingstjenester, meldingstjenester, formidlingstjenester og innsynstjenester. Teknisk dokumentasjon Dokumentasjon om bruk av Altinn-API finnes her: https://altinn.no/api/help/ https://altinn.github.io/docs/api/ Altinn har tilgjengeliggjort referansekode for å gjøre det enklere for ulike tilbydere å lage applikasjoner med Altinn-funksjonalitet. Referansekoden ligger på Altinns repository på GitHub: https://github.com/Altinn/AltinnApp "
},
{
	"uri": "https://altinn.github.io/docs/katalog/support/rammeavtale-konsulentbistand/",
	"title": "Rammeavtale konsulentbistand",
	"tags": [],
	"description": "Brønnøysundregistrene har inngått rammeavtaler på konsulentbistand for tjenesteutvikling i Altinn, som tjenesteeierne kan benytte seg av.",
	"content": "Brønnøysundregistrene har med virkning fra 10.05.2016 inngått rammeavtaler på konsulentbistand for tjenesteutvikling i Altinn. Disse rammeavtalene er etablert slik at i tillegg til Brønnøysundregistrene som oppdragsgiver, vil tjenesteeierne i Altinn-samarbeidet kunne avrope tjenester på disse rammeavtalene. Det er en forutsetning at det er etablert Altinn samarbeidsavtale med virksomheten og at bistand må være knyttet til tjenesteutvikling i Altinn (tjenesteutviklingsløsningen) med evt tilhørende tilleggstjenester. Rammeavtalene har en varighet på 1 år, med opsjon for å forlenge avtalene med inntil 1+1+1 år. Avtale inngått av Brønnøysundregistrene Følgende leverandører er etter konkurransen tildelt kontrakt innenfor de enkelte fagområdene som konkurransen omfattet: Accenture Knowit Dataess Sopra Steria Arkitektum Fagområde 1 (tjeneste-/ skjemautvikling) x x x x Fagområde 2 (tilleggstjenester innenfor mottakssystem utvikling/ implementering) x x x x Fagområde 3 (tilleggstjenester innenfor kursgjennomføring) x x x x Fagområde 4 (tilleggstjenester innenfor planlegging av tjenester) x x x x Nærmere spesifisering av fagområdene – se konkurransegrunnlag Det er altså etablert parallelle rammeavtaler med flere leverandører. Avrop skal skje etter minikonkurranser. Minikonkurranse En rammeavtale er en avtale inngått mellom en eller flere oppdragsgivere og en eller flere leverandører, og som har til formål å fastsette vilkårene for de kontraktene som skal tildeles i løpet av en gitt periode særlig med hensyn til pris og eventuelt planlagte mengder. Det endelige valget av leverandør forutsetter en ny (forenklet) konkurranse mellom alle rammeavtaleleverandørene, i samsvar med nærmere angitte prosedyrer som sikrer gjennomsiktighet, likebehandling og objektive kriterier. Dette benevnes som minikonkurranse. Gjennomføring av minikonkurranse skal bidra til å ivareta den enkelte tjenesteeiers egne og spesifikke behov knyttet til ønsket utført tjeneste innenfor avtalens ramme. Leverandørens leveranse innenfor et avrop skal bygge på avtaleverket. Tjenesteeiernes valg av leverandør skal foretas ut fra de samme tildelingskriterier som er gitt i konkurransen ifm etablering av rammeavtalene og med samme vektlegging, jfr konkurransegrunnlagets kap 13.3. Hvordan ta i bruk avtalen Gjennomføring av minikonkurranse Prosedyrer for tildelinger av kontrakt (gjennomføring av minikonkurranse) finnes i bilag 2 til rammeavtalen. Tjenesteeier er selv ansvarlig for gjennomføringen av minikonkurransen og at anskaffelsen skjer iht forskrift om offentlige anskaffelser. Det forutsettes at tjenesteeier benytter og rådfører seg med sitt eget innkjøpsfaglige personell i denne sammenheng. Vi ønsker å presisere følgende grunnleggende prosesser Før tjenesteeier starter gjennomføring av minikonkurransen må det bes om fullmakt ved å sende en henvendelse via selvbetjeningsportalen (benytt skjema for support) eller via e-post til tjenesteeier@altinn.no I henvendelsen gir dere en kort beskrivelse av bistandsbehovet hos tjenesteeier. Tjenesteeier skal starte gjennomføringen av minikonkurransen ved å henvende seg til samtlige leverandører (se etterfølgende kontaktliste). I henvendelsen skal tjenesteeier beskrive sitt konkrete behov til bistand (kravspesifikasjon) og be om tilbud på kompetanse, kapasitet og pris iht etablert rammeavtale. Tjenesteeier har ikke anledning til å utelate en eller flere av leverandørene. Tjenesteeier skal ikke foreta utlysning, verken i DOFFIN eller TED-Luxembourg. Tjenesteeier gir leverandørene en frist på minimum 10 virkedager for å besvare henvendelsen. Tjenesteeier skal motta skriftlig svar fra leverandørene i form av brev, faks eller e-post. Det er viktig at korrespondansen er sporbar og kan dokumenteres i ettertid. Tjenesteeierne må kontrollere at prisene som benyttes ved valg av leverandør, ikke overstiger rammeavtalens maksimalpriser. (jf. vedlegg 5 til avtalene). Det er anledning til å avtale lavere priser enn de som inngår i rammeavtalene. Tjenesteeier velger den leverandør som har det beste tilbudet på grunnlag av de to tildelingskriteriene som er beskrevet i konkurransegrunnlagets kap 13.3. Tildelingskriterier Vekting Pris 35% Kvalitet (de tilbudte konsulenters kompetanse og erfaring) 65% Tjenesteeier har ikke anledning til å benytte andre tildelingskriterier enn disse. Tjenesteeier skal vurdere sitt valg av leverandør(er) gjennom en protokoll. Brønnøysundregistrene anbefaler at den enkle protokollen for anskaffelser, som følger forskrift om offentlige anskaffelser, benyttes. Dersom du har spørsmål angående rammeavtalen er det bare å ta kontakt på tjenesteeier@altinn.no Kontaktpunkter hos leverandørene Leverandør Kontaktinformasjon Accenture Tonje Sandberg tonje.sandberg@accenture.com 906 06 491 Arkitektum Hallstein Søvik hallstein@arkitektum.no 982 200 07 Knowit Dataess Bjørn Deverill-Mathissen bjorn.deverill-mathisen@knowit.no 993 63 100 Sopra Steria Bjørn von der Fehr bjorn.fehr@soprasteria.com 928 86 222 Nyttig informasjon knyttet til avtalen Avtalene er tilgjengelige på Altinn dokumentsenter. Prisbilagene ligger ikke tilgjengelige på Altinn dokumentsenter. Ved behov kan disse forespørres levert fra tjenesteeier@altinn.no. Prisene gitt fra leverandørene i avtalene er maksimalpriser. Når leverandørene skal levere tilbud på konkrete oppdrag i avtaleperioden (Avrop etter minikonkurranse), vil leverandørene kunne tilby lavere priser. Rammeavtalen som er etablert inneholder områder for aktiviteter som kan gjøres forut for en tjenesteutvikling, f.eks bistand til planlegging og utvikling/implementering av mottakssystem. "
},
{
	"uri": "https://altinn.github.io/docs/api/referanse-app/",
	"title": "Referanse-app",
	"tags": [],
	"description": "",
	"content": "Altinn sentralforvaltning har tilgjengeliggjort referansekode for å gjøre det enklere for ulike tilbydere å lage applikasjoner med Altinn-funksjonalitet. Referansekoden ligger på Altinns repository på GitHub: https://github.com/Altinn/AltinnApp/ Koden er tilgjengelig med BSDs 3-klausul-lisens, noe som gir et godt grunnlag for de som ønsker å tilpasse koden til den bruken de måtte ønske. For å sikre at API-et som er brukt i referansekoden ikke misbrukes, krever Altinn at de som ønsker å benytte det registrerer sin applikasjon. "
},
{
	"uri": "https://altinn.github.io/docs/guides/tjenesteeier/referanser/",
	"title": "Referanser",
	"tags": [],
	"description": "",
	"content": "Dokument Beskrivelse Funksjonell spesifikasjon - Sluttbrukerløsningen Funksjonell beskrivelse av Sluttbrukerløsningen hvor bl.a. abonnement, preutfylling og meldinger blir beskrevet. Implementasjonsguide for integrasjon mot Altinn.doc Dette dokumentet beskriver den overordnede arkitekturen for integrasjon mot Altinn, samt sikkerhetsmekanismer som benyttes for kommunikasjon mellom Altinn og eksterne systemer. serviceinitiation.2010.10.xsd Meldingsbeskrivelse benyttet for innsending av preutfyllingsdata og abonnementsdata fra tjenesteeier på batchgrensesnitt. correspondence.2010.10.xsd Meldingsbeskrivelse benyttet for innsending av meldinger fra tjenesteeier på batchgrensesnitt. correspondence.confirmations.2010.10.xsd Meldingsbeskrivelse benyttet for innsending av meldinger fra tjenesteeier på batchgrensesnitt. AltUt.xsd Meldingsbeskrivelse benyttet for innsending av meldinger fra tjenesteeier på gammelt format, for både batch– og tjenestegrensesnitt. AltUtConfirmationBatch.xsd Meldingsbekreftelse benyttet for meldingsbekreftelser på gammelt format fra Altinn til tjenesteeier, batchgrensesnitt. GovOrganReceipt.xsd Meldingsbekreftelse benyttet for meldingsbekreftelser på gammelt format fra Altinn til tjenesteeier, batchgrensesnitt. genericbatch.2010.10.xsd Meldingsbeskrivelse benyttet for overføring av arkiverte innsendingstjenester fra Altinn til tjenesteeier genericbatch.2013.06.xsd Oppdatert meldingsbeskrivelse benyttet for overføring av arkiverte innsendingstjenester fra Altinn til tjenesteeier. Med støtte for vedleggstypenavn (AttachmentTypeName) og sjekksum av vedlegget (Checksum) OnlineBatchReceipt.xsd Kvittering ved online overføring av data fra Altinn til Tjenesteeier Videreformidling av identitet_SAML 2 0.doc Beskriver hvordan tjenesteleverandører kan sette opp og konfigurere et grensesnitt mot Altinn sin løsning for videreformidling av elektronisk identitet basert på SAML 2.0 protokollen. Beskrivelse Link Bestillingsskjemaer https://altinn.brreg.no/sites/dokument2/Bestillingsskjema Oppgaveregisteret - Oversikt over skjema spesifikasjoner http://w2.brreg.no/oppgaveregisteret/spesifikasjon_skjemaliste.jsp Tjenestekatalogen https://altinn.brreg.no/sites/program/altinn%20II/Lists/Tjenestekatalog Referanseklienter for Java og .Net https://altinn.brreg.no/sites/fagsystemer/Kokebker/Forms/AllItems.aspx?RootFolder=/sites/fagsystemer/Kokebker/Referanseklienter "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/samhandling/",
	"title": "Samhandling",
	"tags": [],
	"description": "Er en sammensetning av flere enkeltstående tjenester til en helhetlig prosess mellom en eller flere sluttbrukere og en eller flere offentlige virksomheter.",
	"content": "Er en sammensetning av flere enkeltstående tjenester til en helhetlig prosess mellom en eller flere sluttbrukere og en eller flere offentlige virksomheter. De ulike enkelttjenestene grupperes og presenteres for sluttbruker på en arbeidsflate. Arbeidsflaten kan samtidig gi veiledning og støtte i prosess og regelverk. Fordeler og muligheter En samhandlingstjeneste styrer sluttbruker gjennom en naturlig arbeidsflyt/prosess der definerte hendelser flytter samhandlingstjenesten fra steg til steg. Logging og sporing gjør at prosessforløpet kan spores uten avbrudd tilbake til utgangspunktet selv om prosessen går over tid og ulike aktører utfører sine steg én eller flere ganger. I sin enkleste form kan en samhandlingstjeneste samle tjenester som inngår i en enkel sekvensiell prosess mellom én avgiver og én tjenesteeier. Et eksempel på dette kan være at man sender inn søknad, mottar svar, sender eventuelt klage og mottar svar. I mer komplekse tilfeller kan samhandlingstjenesten involvere flere tjenesteeiere og/eller tillate svært mange alternative løp, avhengig av sluttbrukers handlinger kombinert med utfallet av enkelttjenestene som inngår i den. Fordeler Sikkerhet Flere aktører kan involveres i samme tjeneste Valideringer og hjelp om man ønsker Elektronisk signering Realisere en dialog mellom sluttbruker og tjenesteeier(e) Språkstøtte Generering av PDF for utskrift og arkivering Håndtering av prosessflyter (mulig med flere signeringer, betaling) Produkter som tilbys Under utvikling Hvordan komme i gang Under utvikling Råd og tips Under utvikling Kanaler Under utvikling Avhengigheter Under utvikling Teknisk dokumentasjon Funksjonell spesifikasjon – Sluttbrukerløsningen Brukerdokumentasjon TUL Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/samtykke/",
	"title": "Samtykke",
	"tags": [],
	"description": "Gjennom samtykkeløsningen i Altinn kan personer/organisasjoner gi samtykke til at en tredjepart (offentlige og private virksomheter) får midlertidig innsynsrett på et spesifikt sett med opplysninger om dem som tidligere er innhentet.",
	"content": "Gjennom samtykkeløsningen i Altinn kan personer/organisasjoner gi samtykke til at en tredjepart (offentlige og private virksomheter) får midlertidig innsynsrett på et spesifikt sett med opplysninger om dem som tidligere er innhentet. Dette kan for eksempel være ligningsdata fra Skatteetaten. Med sluttbrukerens samtykke vil tredjepart automatisk bli tildelt en tidsbegrenset lese-rettighet for en eller flere sett av opplysninger representert ved tjenester i Altinn. Fordeler og muligheter Samtykkeløsningen gir datakilder tilgang til å dele data de allerede har samlet inn på en person eller en organisasjon med en tredjepart som trenger de samme opplysningene. Løsningen kan utnyttes i en pågående prosess hos tredjepart hvor brukeren må gi samtykke til å innhente gitte opplysninger som en del av prosessen. Dette skjer ved at bruker sendes til en egen samtykkeside i Altinn. Siden støtter videreføring tilbake til tredjepart etter at bruker har gitt samtykke. For å kunne gi et samtykke må brukeren først identifisere seg med en elektronisk ID i den felles offentlige innloggingsløsningen ID-porten. Tredjepart angir hvilke opplysninger det ønskes midlertidig innsyn i, hvor lenge innsynet skal vare og i hvilken kontekst opplysningene skal benyttes. Dette angir tredjepart som input til samtykkesiden. Datakilden har på forhånd navngitt settet av opplysninger og angitt overordnet og detaljert beskrivelse av opplysningene det vil bli gitt tilgang til. Det er frivillig for brukeren om han ønsker å samtykke så han kan også velge å ikke gi samtykke. I Altinn vil alle samtykker logges slik at brukeren til en hver tid har oversikt over avgitte, slettede og opphørte samtykker. Bruker har her også muligheten til å trekke et samtykke han tidligere har gitt slik at innsynsretten stoppes. Det er støtte for to ulike dataflyter for overføringen av data etter at samtykket er gitt. Dataflyten kan gå gjennom Altinn eller den kan gå direkte mellom datakilde og tredjepart. Dersom overføringen av data skal gå gjennom Altinn benyttes en innsynstjeneste i Altinn. Tredjepart vil da knytte seg til Altinn for å be om data fra datakilden. Altinn autoriserer og videreformidler forespørselen til datakildene og returnerer datasettet ved autorisert tilgang. Dersom innsynet skjer direkte mellom datakilde og tredjepart benyttes en lenketjeneste. Her vil tredjepart etter at bruker har avgitt samtykke få en autorisasjonskode, som igjen kan brukes til å motta et signert autorisasjons-token. Tokenet gir informasjon om samtykket som er gitt, varighet og hvilke datasett det gjelder og benyttes overfor datakilde for å hente ut data. Fordeler for tredjepart: Enklere å kunne hente data direkte og strukturert Kundeinformasjonen er valid og krever ikke kontroll Gir økt effektivitet til ulike prosesser. Digital tilgang til brukerens data i en begrenset periode for å kunne utnytte dataene i en digital prosess med et avgrenset formål Fordeler for sluttbruker: Enklere og ukomplisert «avlevering» av etterspurt informasjon Gir større trygghet i situasjonen for kunden, - ikke krevende, forvirrende eller tidkrevende Vil kunne se hvilke data man har delt med hvem og når Fordeler for datakilde: Slipper henvendelser fra brukerne på å få f.eks. ligningspapirer, regnskapsopplysninger En sikker og brukerautorisert måte kunne gi eksterne parter tilgang til brukers data Råd og tips Samtykke kan knyttes til alle tjenester som har definert samtykketekst Utform samtykketeksten slik at sluttbruker forstår hva man gir samtykke til. Hvis du lar datakonsument aksessere data gjennom Altinn kan Altinn håndtere autorisasjonen. Dette sparer kompleksitet på datakonsument siden som kan velge å stole på Altinn. Kanaler Samtykke gis i portal og data kan aksesseres via REST eller webservice. Flyt utenom Altinn er også mulig. Varslingstjenesten Avhengigheter Samtykke knyttes til innsyn eller lenketjenester. Teknisk dokumentasjon Samtykkeløsning med bruk av token "
},
{
	"uri": "https://altinn.github.io/docs/katalog/sikkerhet/signering/",
	"title": "Signering",
	"tags": [],
	"description": "Altinn støtter signering av data som bruker skal sende inn. Dette sikrer at brukeren bekrefter innholdet før tjenesteeier mottar data.",
	"content": "Altinn støtter signering av data som bruker skal sende inn. Dette sikrer at brukeren bekrefter innholdet før tjenesteeier mottar data. Fordeler og muligheter Altinn støtter signeringsfunksjonalitet på innsendingstjenester. Dette betyr at tjenesteeier kan sette opp at som del av arbeidsflyten for utfylling av en innsendingstjeneste skal det signeres en eller flere ganger. Kravet vil typisk knyttes opp mot en gitt rolle i Altinn for at tjenesteeier skal kunne på en god må definere hvem som må signere en innsending. Signeringen kan styres av innhold i skjema slik at man f.eks. kan tvinge at revisor signerer i tilfeller hvor et gitt beløp overstiger en grense. Dette kalles betinget signering. Altinn støtter også at tjenesteeier definerer deler av skjema som kilde til hvem som skal signere. Dette kan f.eks. bety at bruker fyller ut informasjon om en person eller organisasjon i skjema og at basert på dette så må disse signere på skjema. Dette kalles automatisk parallell signering. Hvis du har ekstra høye krav til sikkerhet kan du kreve at signering skjer med BankID eller Buypass. Produkter som tilbys Enkel signering Betinget signering Parallell signering Automatisk parallell signering Nivå 4 signering med BankID og Buypass. Hvordan komme i gang? I utviklingshåndboken er det beskrevet hvordan man setter opp signering på innsendingstjenester. Råd og tips Hvis du har behov for å kunne sende inn via sluttbrukersystem må sikkerhetsnivå settes til nivå 2 for signering. Kanaler REST-API Web Services Portal Avhengigheter Signering kan kun brukes sammen med innsendingstjenester. Teknisk dokumentasjon Funksjonell spesifikasjon – Sluttbrukerløsningen "
},
{
	"uri": "https://altinn.github.io/docs/katalog/sikkerhet/",
	"title": "Sikkerhet",
	"tags": [],
	"description": "Altinn tilbyr omfattende sikkerhetsfunksjonalitet for å gi en trygg og sikker opplevelse både for tjenesteeiere og sluttbrukere.",
	"content": "Altinn tilbyr omfattende sikkerhetsfunksjonalitet for å gi en trygg og sikker opplevelse både for tjenesteeiere og sluttbrukere. Autentisering Altinnplattformen har innebygd en rekke mekanismer for autentisering. Autorisasjon Autorisasjonskomponenten i Altinn er svært funksjonsrik og gir et kraftig verktøy til tjenesteeiere for å kunne styre tilgang til tjenester. Logging Altinnplattformen logger bruk av plattformen på en rekke måter. Logging av hendelser i løsningen skjer både i applikasjoner, databaser, i operativsystemet og i infrastrukturkomponenter. Signering Altinn støtter signering av data som bruker skal sende inn. Dette sikrer at brukeren bekrefter innholdet før tjenesteeier mottar data. "
},
{
	"uri": "https://altinn.github.io/docs/slides/",
	"title": "Slides",
	"tags": [],
	"description": "Diverse presentasjoner",
	"content": "Diverse web-baserte presentasjoner. Tjenester 3.0 slide En presentasjon om målsettinger og konsepter for tjenester 3.0 "
},
{
	"uri": "https://altinn.github.io/docs/katalog/support/sluttbrukersystem/",
	"title": "Sluttbrukersystem",
	"tags": [],
	"description": "Altinn tilbyr støtte for åpne grensesnitt, og har helt siden starten i 2003 jobbet for størst mulig grad av integrasjon mot datasystemene som brukes i næringslivet og blant de profesjonelle brukerne.",
	"content": "Altinn tilbyr støtte for åpne grensesnitt, og har helt siden starten i 2003 jobbet for størst mulig grad av integrasjon mot datasystemene som brukes i næringslivet og blant de profesjonelle brukerne. Mer informasjon om integrasjon av datasystemer mot Altinn "
},
{
	"uri": "https://altinn.github.io/docs/katalog/support/statistikk/",
	"title": "Statistikk og rapporter",
	"tags": [],
	"description": "Altinn leverer ulike statistikker og rapporter til Tjenesteeiere.",
	"content": "Altinn leverer ulike statistikker og rapporter til Tjenesteeiere. Se beskrivelsen under menyvalget Statistikk eller Rapporter, over hva som er en del av leveranser for de tjenesteiere som har avtale med Altinn. Andre spesialrapporter må bestilles særskilt. Statistikk I Altinn tilbyr vi ulike typer statistikker. Transaksjoner. Denne statistikken viser en oversikt over alle transaksjoner siste måned. Disse kan sorteres og filtreres blant annet per tjenesteeier, per tjeneste, per sluttbrukersystem osv. Grensesnitt. Denne daglige statistikken viser status, inkludert antall overføringer, for abonnement og batch. Påloggings. Denne statistikken viser bruken av Altinns egne innloggingsmetoder, og har sammenligning mot fjoråret. PSA. Statistikk rundt bruk av selvangivelsesskjemaene. Alle statistikker finner du på statstikkområdet på dokumentsenteret. Andre spesifikke kundenære statistikker må bestilles særskilt. Rapportering Standard rapporter som leveres Tjenesteeiere er: - Månedlig Service Rapport "
},
{
	"uri": "https://altinn.github.io/docs/slides/tjenester30/",
	"title": "Tjenester 3.0 slide ! fullscreen",
	"tags": [],
	"description": "En presentasjon om målsettinger og konsepter for tjenester 3.0",
	"content": "Tjenester 3.0 Status Se siste status her. Hva er tjenester 3.0? 4 overordnede målsettinger&amp;hellip; Moderne tjenester Brukervennlige og effektive tjenester Responsivt design Universell utforming God ytelse og lav responstid Basert på moderne og åpne web-standarder Effektiv tjenesteutvikling 100% selvbetjening Effektiv og automatisert testing Parallell utvikling (basert på Git) Enkel datamodellering Åpen plattform med API&amp;rsquo;er Enkelt for fagperson, fleksibelt for utvikler Fagpersoner benytter nettleser Utviklere kan også bruke kode-editor Kan utvides av andre systemer Åpen kildekode, cross-platform Basert på åpen kildekode Deles som åpen kildekode Alle kan gjenbruke, og bidra til forbedringer Raskere videreutvikling Støtter Windows, macOS og Linux Konsepter 6 konsepter&amp;hellip; Git som back-end Alt som utvikles får full versjonshistorikk Enkel og rask deploy Ekte distribuert og parallell utvikling Back-end både for nettleser og kode-editor Git støttes av veldig mange verktøy Nærhet til web-teknologi Alt er basert på standard web-teknologi Verktøy blir aldri &amp;ldquo;i veien&amp;rdquo; eller utdatert Standard utviklerkompetanse Ingen proprietære verktøy som må læres Effektiv testing Støtte for automatisert testing Behøver ikke migrere for å få reell test Gjenbruker gjennomtestede komponenter Endringer i plattform gjøres kun ett sted Enkelt å tilpasse Alle deler av løsningen skal kunne &amp;ldquo;byttes ut&amp;rdquo; Kan utvides med egne widgets, maler, stilark, etc. Gjenbruk og overstyrbare defaults på alle nivåer API&amp;rsquo;er og Git som back-end gjør det enkelt å integrere andre systemer Åpen kildekode Tjenester 3.0 skal være åpen kildekode Vi skal benytte programvare med fri lisensiering, type MIT, Apache 2 eller BSD Vi skal bidra tilbake til prosjekter som vi benytter Ingen lisensutgifter Cross-platform Kan kjøre på både Windows, Linux og macOS Unngår låsing mot en enkelt plattform Kan kjøre lokalt på en laptop Muliggjør distribuert lokal utvikling og testing The End Tilbake til slides. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/dialog/varsling/",
	"title": "Varsling",
	"tags": [],
	"description": "Er en tjeneste som kan benyttes til å varsle brukere på e-post og/eller sms når en melding eller et skjema er gjort tilgjengelig i meldingsboksen i Altinn.",
	"content": "Er en tjeneste som kan benyttes til å varsle brukere på e-post og/eller sms når en melding eller et skjema er gjort tilgjengelig i meldingsboksen i Altinn. Det kan også sendes frittstående varsel som ikke er knyttet til en tjeneste. Fordeler og muligheter Varsel sendes basert på informasjon om konkret angitte adresser, mobiltelefonnummer og/eller e-post adresse eller ved å oppgi kun fødselsnummer eller organisasjonsnummer. For fødselsnummer hentes informasjonen fra Difi sitt kontakt- og reservasjonsregister og for organisasjonsnummer benyttes informasjonen som ligger på enheten i Altinn sitt kontaktregister. Dette inneholder både kontaktinformasjonen som er angitt i Enhetsregisteret i tillegg til informasjon lagt inn av organisasjonen selv. Varslene kan sendes ut både på e-post og SMS. Altinn har mulighet til å sende ut varsler til sluttbrukerne når tjenesteeier sender meldinger eller legger ut helt eller delvis forhåndsutfylte skjema i sluttbrukers meldingsboks. Det kan også sendes ut frittstående varsel som ikke er knyttet til en bestemt melding eller skjema. Varslene må være definert i Altinn før de kan benyttes av tjenesteeier. Altinn har flere generelle varselmaler som kan benyttes. I tillegg er det mulig å bestille egne maler. Tjenesteeier må selv spesifisere type mottakeradresse, tidspunkt for varsel, språk for varsel og hvilken varselmal som skal benyttes. Varslene sendes innenfor gitte tidspunkter. Som hovedregel sendes det ikke ut varsler på helligdager eller utenfor vanlig arbeidstid. Fordeler ved bruk av tjenesten Sikker dialog med bruker Tjenesteeier varsler når han ønsker Altinn har oversikt over hvem som skal varsles - hvis ønskelig Dialog: benytte tjenesten sammen med andre tjenester i samspill for å realisere en dialog mellom sluttbruker og tjenesteeier Språkstøtte Produkter som tilbys Varsling på e-post Varsling på sms Påfølgende varsel (purring) dersom meldingen ikke er åpnet innen et gitt tidspunkt Hvordan komme i gang Under utvikling Råd og tips Under utvikling Kanaler Under utvikling Avhengigheter Under utvikling Teknisk dokumentasjon Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/katalog/kanaler/grensesnitt-sluttbrukersystem/",
	"title": "Web services",
	"tags": [],
	"description": "Altinn støtter åpne grensesnitt og har helt siden starten jobbet for størst mulig grad av integrasjon mot datasystemene som brukes i næringslivet og blant de profesjonelle brukerne.",
	"content": "Altinn støtter åpne grensesnitt og har helt siden starten jobbet for størst mulig grad av integrasjon mot datasystemene som brukes i næringslivet og blant de profesjonelle brukerne. For datasystemer er det webservices som tilbys som integrasjonsgrensesnitt inn mot de tjenester Altinn tilbyr. Fordeler og muligheter Tilgang til tjenester og generell funksjonalitet i Altinn tilbys sluttbrukere uten at man trenger å være pålogget i portalen. Regnskapsførere, revisorer og andre større virksomheter som utfører mesteparten av sitt arbeid i et datasystem sender direkte fra systemet over til Altinn. Det har også blitt vanlig blant mindre aktører å bruke datasystem i forbindelse med innsending til Altinn da dette støtter opp om arbeidsprosessen til brukerne. For sluttbrukersystemer er det webservices som tilbys som integrasjonsgrensesnitt inn mot de tjenestene Altinn tilbyr. Det tilbys flere tjenester innenfor flere funksjonelle områder og en egen Implementasjonsguide for sluttbrukersystemer beskriver hvilken funksjonalitet som finnes med referanser til hvilke webservices som benyttes. Eieren av et sluttbrukersystem må registrere dette i Altinn slik at Altinn har mulighet til å autentisere og autorisere systemet på vegne av en avgiver. Ved registrering i portalen opprettes en unik sluttbrukersystemidentifikator og denne identifikatoren sendes med i alle webservice kall som gjøres mot Altinn. Kvitterings- og sporingsmekanismer ivaretar behov for tilbakemelding på det som er utført og sporing av data som er utvekslet gjennom plattformen. Produkter som tilbys Autentisering og autorisasjon av sluttbrukersystem og brukere Benytte innsendingstjeneste Benytte meldingstjeneste Benytte formidlingstjeneste Benytte innsynstjeneste Benytte samhandlingstjeneste Hvordan komme i gang Informasjon om hvordan man integrerer et sluttbrukersystem mot Altinn finnes her. Råd og tips Under utvikling Kanaler Under utvikling Avhengigheter Under utvikling Teknisk dokumentasjon Implementasjonsguide for sluttbrukersystemer "
},
{
	"uri": "https://altinn.github.io/docs/katalog/kanaler/grensesnitt-tjenesteeier/",
	"title": "Tjenesteeier",
	"tags": [],
	"description": "Tjenesteeier må etablere et grensesnitt mellom sine etatssystemer og Altinn for å sende og motta data.",
	"content": "Tjenesteeier må etablere et grensesnitt mellom sine etatssystemer og Altinn for å sende og motta data. Altinn tilbyr to forskjellige grensesnitt for de fleste funksjonelle integrasjonpunkter. Via webservice hvor tjenestekontrakter beskriver format for data og via batch på definerte standardformater. I tillegg er det mulig å velge at data fra en innsendingstjeneste legges i en DownloadQueue som tjenesteeier kan hente ut ved å sende en forespørsel til Altinn. Fordeler og muligheter Integrasjon via webservice muliggjør umiddelbar kommunikasjon og tilbakemelding på forespørsler. Formater for integrasjon i Altinn er nesten utelukkende basert på bruk av XML. Ved bruk av webservicer blir tjenesteeier sitt system autentisert og autorisert før det kan utføre operasjoner mot Altinn. Tjenesteeiers system må være registrert i Altinn og passord mottatt før tjenestene kan benyttes. Ved bruk av batch grensesnitt/filbasert integrasjon med Altinn benyttes FTP protokollen, fortrinnsvis SFTP (FTP over SSH), og det finnes to fremgangsmåter. Altinn kan hente data fra tjenesteeier sitt system eller tjenesteeier kan levere data på et definert Altinn område, dvs. SFTP server må etableres av ekstern part. Detaljer og tilpasning av den filbaserte overføringen avklares ved etablering. Som en tommelfingerregel kan man si at skal man overføre færre enn 100 elementer (alternativt mindre enn 30 MB) kan man benytte web service grensesnitt, men for store datamengder bør batch-grensesnitt benyttes. Tommelfingerregelen er scenarioavhengig og ingen absoluttgrense. For overføring av store datamengder er det vel så viktig at eksterne systemer er optimalt konfigurert iht. ønsket grensesnitt. Ved bruk av DownloadQueue tar tjenesteeier initiativet og henter data fra en innsendingstjeneste fra Altinn. En slik løsning stiller mindre krav til tjenesteeier sitt system. DownloadQueue anbefales for mindre tjenesteordninger uten stort trykk ved innsendingsfrister. Dersom det er ønskelig å bruke DownloadQueue på større tjenesteordninger må dette avklares med Altinn først. Produkter som tilbys Innsendingstjenester innsending av prefilldata innsending av abonnementsdata mottak av ferdig utfylte innsendinger fra Altinn uthenting av innsendte data fra tjenesteeiers eget arkiv uthenting av kvittering for status på innsending Meldingstjenester sende inn meldingstjenester motta meldingsbekreftelse sjekke status på meldingstjenester Lenketjeneste identifisere avgiver etterspørre informasjon om hvilke avgivere en bruker kan representere Formidlingstjeneste transportere data via web service eller SFTP kanal, både for opp- og nedlasting benytte tjenesteeierstyrt rettighetsregister for å begrense hvem som har tilgang til opp- og nedlasting av spesifikke tjenester kvittering for status på overførte data Innsynstjenester motta informasjon om brukere som har aktivert en innsynstjeneste Samhandlingstjeneste instansier en samhandlingstjeneste hente ut kjørende instanser av samhandlingstjenester knytte innsendingstjeneste til sak knytte meldingstjeneste til sak sett merknad på sak eller underliggende tjeneste sende hendelse til sak Kvitteringer hente kvitteringer for innsendte data kvittere for mottak av data hente lister med kvitteringer Frittstående varsel sende varsel til fødselsnummer eller organisasjonsnummer uten at varselet trenger å være tilknyttet en tjeneste Autorisasjon importere eksterne ressurser og regler for å avgjøre tilgang ved hjelp av tilgangsmekanismen i Altinn etter å ha importert eksterne regler kan det gjøres kall mot Altinn for å benytte Altinns autorisasjonskomponent hente roller Uthenting av tiltrodd tredjeparts logg tjenesteeiere vil ha muligheten til å hente ut logg over alle hendelser for innsendte innsendingstjenester Hvordan komme i gang Under utvikling Råd og tips Under utvikling Kanaler Webservices: Overføring av data i sanntid. Tjenesteeier må etablere dedikert webservice angitt av Altinn på egen plattform, og motta innsendinger automatisk etter hvert som de arkiveres. Batch: Satsvis overføring av data. Kan leveres til en tjenesteeiers mottakssystem dersom det er etablert, eller tjenesteeier kan hente data på et definert Altinn område. DownloadQueue: Tjenesteeier henter data fra en kø ved bruk av webservice. Avhengigheter Under utvikling Teknisk dokumentasjon Implementasjonsguide for tjenesteeier "
},
{
	"uri": "https://altinn.github.io/docs/api/annet/",
	"title": "Annet",
	"tags": [],
	"description": "",
	"content": "1. Lese egne profildata (Privatperson) Man kan hente ut informasjon fra egen brukerprofil i Altinn, som gir oversikt over hvem som er logget inn (Navn,Adresse, Personnr, &amp;hellip;). Det returneres også en lenke til profilsiden i Altinn.no portalen (lenke av type portalview). GET operasjon for å lese min Profil: GET /api/my/profile HTTP/1.1 ApiKey: myKey Accept: application/hal+json Respons fra API: { &amp;quot;Name&amp;quot;: &amp;quot;HÅKON TRANA&amp;quot;, &amp;quot;AddressLine1&amp;quot;: &amp;quot;&amp;quot;, &amp;quot;AddressLine2&amp;quot;: &amp;quot;Borgermester Platous gate 7&amp;quot;, &amp;quot;AddressLine3&amp;quot;: &amp;quot;5008 BERGEN&amp;quot;, &amp;quot;UserName&amp;quot;: &amp;quot;haakon@trana.net&amp;quot;, &amp;quot;MobileNumber&amp;quot;: &amp;quot;99988888&amp;quot;, &amp;quot;PreferredLanguage&amp;quot;: &amp;quot;NorwegianNO&amp;quot;, &amp;quot;ShowClientUnits&amp;quot;: true, &amp;quot;PrivateConsent&amp;quot;: true, &amp;quot;ProfessionalConsent&amp;quot;: true, &amp;quot;ContactInformation&amp;quot;: { &amp;quot;Email&amp;quot;: &amp;quot;haakon@trana.net&amp;quot;, &amp;quot;Mobile&amp;quot;: &amp;quot;99988888&amp;quot;, &amp;quot;RequestsEmailReceipts&amp;quot;: false }, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/api/my/profile&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://tt02.altinn.basefarm.net/Pages/Profile/MyUserSettings.aspx&amp;quot; } } } 2. Les kontaktinformasjon for Virksomheter Det er mulig å hente ut informasjon fra Kontaktinformasjon registrert på virksomheter brukeren har rettigheter for i Altinn. Ornganisasjonsnummeret til virksomheten benyttes til adressering. GET operasjon for å lese kontaktinformasjon for en virksomhet: GET /api/{orgno}/profile HTTP/1.1 ApiKey: myKey Accept: application/hal+json Respons fra API: { &amp;quot;Entity&amp;quot;: &amp;quot;Altinn testvirksomhet&amp;quot;, &amp;quot;Email&amp;quot;: test@test.com, &amp;quot;MobileNumber&amp;quot;: 99988888, &amp;quot;LastModifiedBy&amp;quot;: &amp;quot;LANDE JAN ÅGE&amp;quot;, &amp;quot;LastModifiedDate&amp;quot;: &amp;quot;2014-06-14T17:17:11.223&amp;quot;, &amp;quot;IsSelectedForNotification&amp;quot;: false, &amp;quot;_links&amp;quot;: { &amp;quot;self&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/428743989/profile&amp;quot; }, &amp;quot;portalview&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/Pages/Profile/UnitProfile.aspx?o=428743989&amp;quot; }, &amp;quot;contactinformation&amp;quot;: { &amp;quot;href&amp;quot;: &amp;quot;https://www.altinn.no/api/428743989/profile/contactinformation&amp;quot; } } } Email og MobileNumber er kontaktinformasjon registrert på virksomheten i Enhetsregisteret. Dersom brukere følger lenken til contactinformation vil det bli returnert en liste med kontaktinformasjon registert av brukerne i Altinn. Kontaktinformasjonen blir benyttet til varsling (epost og sms) på vegene av tjenesteeiere i Altinn. "
},
{
	"uri": "https://altinn.github.io/docs/api/om/",
	"title": "Om Altinn API",
	"tags": [],
	"description": "",
	"content": "Generell oppbygning av API-et Altinn API benytter REST arkitekturstil, og baserer seg på en semantisk definisjon av innholdet. Strukturen i responsen fra API-et kan endre seg, men betydningen av elementene er den samme. Dette blir som når man navigerer seg inn på en vanlig nettside. Da kan en klient navigere seg inn i API-et ved å følge lenker med en definert betydning. Det er ikke sikkert at URL-en man var på sist fortsatt eksisterer, men det vil være mulig å bla eller søke seg tilbake til det samme innholdet fra forsiden. Fordelen med dette er at Altinn har mulighet til å bygge ut og omstrukturere innholdet i API-et uten at dette hindrer en klient fra å finne frem til innholdet den brukte fra før. API-et baserer seg på de mekanismene som allerede finnes i HTTP-standarden og meldingshoder som brukes av vanlige nettlesere og webservere i dag. Altinn API støtter følgende formater application/HAL+json application/HAL+xml Navigasjon og semantikk Navigasjonen foregår ved at man navigerer til https://www.altinn.no/api/my/messages/ og navigerer seg via lenkene som finnes der. Det er mulig å bla seg innover i hierarkiet av meldinger, eller gå rett til en enkelt melding. API-et gir informasjonen som meldinger på formatene XML eller JSON. Siden XML og JSON mangler semantiske elementer, bruker meldingene i tillegg standarden HAL. HAL-formatet angir en ressurs med innhold og lenker. I tillegg kan hver ressurs inneholde andre ressurser med sine lenker og innhold. Lenkene angir en semantisk relasjon mellom ressursen man er på og ressursen det lenkes til. Foreløpig er følgende relasjoner definert, og flere relasjoner kan komme etter hvert som API-et bygges ut. Lenke Ressurs Beskrivelse self Message/Organization/Form URI til representasjon av den enkelte ressursen. print Message URI til utskriftsversjonen av et arkivert skjema eller et skjema under utfylling. Er kun gyldig for message elementer av typen FormTask. For print relasjoner er &amp;ldquo;mime-type&amp;rdquo; i de fleste tilfeller &amp;ldquo;application/pdf&amp;rdquo; men vil i noen tilfeller også være &amp;ldquo;application/text-html&amp;rdquo;. attachment Message URI og navn på vedlegg knyttet til message. form Message URI til skjema knyttet til meldingen av type FormTask. portalview Message URI til portal-visning av det aktuelle Message-objektet. formdata Form URI til skjemadata i XML-format. messages Organization URI til liste over meldinger for den aktuelle organisasjonen. OData OData kan brukes til filtrering, paging og sortering i lister av elementer av alle typer. Listene er begrenset i kode til å maksimalt inneholde 50 elementer. Det er mulig å utføre paging ved å sende med Odata parameteren skip (for eksempel $skip=50). Det er også mulig å filtrere listene som returneres basert på hvilke informasjonselementer de inneholder. For eksempel vil følgende parametere på message elementet $filter=ServiceOwner eq &#39;Skatteetaten&#39; kun returnere meldinger fra Skatteetaten. Se http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/ for ytterligere informasjon om OData støtte i Altinn API. "
},
{
	"uri": "https://altinn.github.io/docs/katalog/kanaler/portal/",
	"title": "Portal",
	"tags": [],
	"description": "Altinn-portalen tilbyr en felles meldingsboks til sluttbrukerne av Altinn samt standardfunksjonalitet for de forskjellige tjenestene.",
	"content": "Altinn-portalen tilbyr en felles meldingsboks til sluttbrukerne av Altinn samt standardfunksjonalitet for de forskjellige tjenestene. Fordeler og muligheter Fordelene med å benytte seg av Altinn-portalen og dens standardfunksjonalitet er at brukerne får et kjent brukergrensesnitt som de kjenner fra andre tjenester/tjenesteeiere. De finner kvitteringer der de er vant med det og de kan sette opp varsling i et felles brukergrensesnitt. For de forskjellige tjenestetypene tilbyr portalen brukergrensesnitt for å navigere seg mellom og i tjenestene. Produkter som tilbys Meldingsboks Arkiv Arbeidsflyt Profil Hvordan komme i gang Hvis man ikke gjør at aktivt valg om at tjenesten kan skal benytte kun skal være tilgjengelig via REST/Web service vil tjenestene være tilgjengelig i Altinn-portalen for sluttbrukere. Råd og tips Pek brukeren til Altinns egne hjelpetekst hvis det er behov for å veilede sluttbrukeren. Prøv å gjør informasjonen i tjenestekatalogen best mulig slik at sluttbruker i størst mulig grad forstår hva som kreves av tjenesten de skal benytte. Kanaler Portal Avhengigheter For tjenesteeiere gir portalen liten nytte uten at man også tilbyr tjenester i portalen. Dette kan være meldingstjeneste, innsendingstjeneste, innsynstjeneste, samhandlingstjeneste. Teknisk dokumentasjon Informasjon om Altinn Portal: Funksjonell spesifikasjon – Sluttbrukerløsningen "
},
{
	"uri": "https://altinn.github.io/docs/katalog/kanaler/apps/",
	"title": "Apps",
	"tags": [],
	"description": "Altinn Apps er i dag tre applikasjoner som er utviklet på de tre dominerende mobile plattformene iOS, Android og Windows Phone.",
	"content": "Altinn Apps er i dag tre applikasjoner som er utviklet på de tre dominerende mobile plattformene iOS, Android og Windows Phone. Funksjonalitet som foreløpig er tilgjengelig via apps er pålogging (via ID-Porten), visning av elementer i meldingsboks, signering (begrenset til noen få tjenester) og valg av aktør (person/organisasjon) som man har fått rettigheter av. Fordeler og muligheter Altinn-appen dekker et behov for enkel tilgang til meldingsboksen i Altinn på mobilen. Med appen kan du for eksempel sjekke skatteoppgjøret på mobilen mens du sitter på bussen på vei til jobb, eller du kan se om det er kommet noen meldinger til foretaket du er styreleder i. Det er et stort potensiale for fremtidig bruk av Altinn-appen og dette er noe det er fokus på fra Altinn sin side. Det vil sees på muligheter for å utnytte de mulighetene som apps har for å forenkle og effektivisere oppgaver for brukerne, som rask og sikker innlogging basert på biometri (fingeravtrykk eller scanning av øyne) og varsling som kan integreres i arbeidsflyten til bruker på en mye mer effektiv måte enn SMS eller epost. Dagens apps utnytter heller ikke det mulighetsrommet som finnes for utbredelse. Eksempler på dette er iPad og Apple TV og Windows 10-baserte laptop-er og PC-er. Målet er at Altinn-appen skal bidra til å effektivisere dialogen med det offentlige. Funksjonaliteten i appen realiseres ved å benytte Altinn sitt REST API (tekniske grensesnitt). Produkter som tilbys Foreløpig er følgende funksjonalitet tilgjengelig via apps: - Pålogging (via ID-Porten) - Visning av elementer i meldingsboks - Signering (begrenset til noen få tjenester) - Valg av aktør (person/organisasjon) som man har fått rettigheter av Hvordan komme i gang Under utvikling Råd og tips Under utvikling Kanaler Under utvikling Avhengigheter Under utvikling Teknisk dokumentasjon Under utvikling "
},
{
	"uri": "https://altinn.github.io/docs/_header/",
	"title": "",
	"tags": [],
	"description": "",
	"content": "docs "
},
{
	"uri": "https://altinn.github.io/docs/",
	"title": "",
	"tags": [],
	"description": "",
	"content": "Ny dok Vi i Altinn er i gang med å gjøre dokumentasjonen enklere og mer tilgjengelig, samt mye enklere å vedlikeholde. Vi er langt fra ferdige, men ønsker å dele så tidlig som mulig. Det er fortsatt mye arbeid som gjenstår. Dokumentasjonen er enkel markdown som blir til en statisk web site (html) som kan kjøre hvor som helst. Ønsker du å bidra? Alle markdown-filene som vi genererer denne dokumentasjonen fra ligger åpent på GitHub. Hver side inneholder også en Editer-lenke til den tilsvarende markdown-filen i GitHub. Hvis du ikke har direkte skrivetilgang så blir du etter å ha logget inn bedt om å trykke på en knapp for å opprette en såkalt pull request. Du kan også foreslå forbedringer eller melde feil ved å opprette issues. "
},
{
	"uri": "https://altinn.github.io/docs/credits/",
	"title": "Kred",
	"tags": [],
	"description": "",
	"content": "Vi i Altinn benytter Hugo for å generere opp hele dokumentasjonen med søk som en statisk web site. Det hele tar typisk rundt 0,1 sekund (!). Hugo er åpen kildekode i tillegg til å være lynrask. Anbefales. Som tema benytter vi docDock. Stor takk til Valere JEANTET. Reveal.js er et fantastisk rammeverk for presentasjoner på web. Takk til Hakim El Hattab. "
}]